{
  "manifest": {
    "author": {
      "name": "Gajus Kuizinas",
      "email": "gajus@gajus.com",
      "url": "http://gajus.com"
    },
    "ava": {
      "babel": {
        "compileAsTests": [
          "test/helpers/**/*"
        ]
      },
      "files": [
        "test/roarr/**/*"
      ],
      "require": [
        "@babel/register"
      ]
    },
    "dependencies": {
      "boolean": "^3.0.1",
      "detect-node": "^2.0.4",
      "globalthis": "^1.0.1",
      "json-stringify-safe": "^5.0.1",
      "semver-compare": "^1.0.0",
      "sprintf-js": "^1.1.2"
    },
    "description": "JSON logger for Node.js and browser.",
    "devDependencies": {
      "@ava/babel": "^1.0.1",
      "@babel/cli": "^7.11.6",
      "@babel/core": "^7.11.6",
      "@babel/node": "^7.10.5",
      "@babel/plugin-transform-flow-strip-types": "^7.10.4",
      "@babel/preset-env": "^7.11.5",
      "@babel/register": "^7.11.5",
      "ava": "^3.12.1",
      "babel-plugin-istanbul": "^6.0.0",
      "babel-plugin-transform-export-default-name": "^2.0.4",
      "coveralls": "^3.1.0",
      "domain-parent": "^1.0.0",
      "eslint": "^7.9.0",
      "eslint-config-canonical": "^24.1.1",
      "flow-bin": "^0.133.0",
      "flow-copy-source": "^2.0.9",
      "gitdown": "^3.1.3",
      "husky": "^4.3.0",
      "nyc": "^15.1.0",
      "semantic-release": "^17.1.1"
    },
    "engines": {
      "node": ">=8.0"
    },
    "husky": {
      "hooks": {
        "pre-commit": "npm run lint && npm run test && npm run build",
        "pre-push": "gitdown ./.README/README.md --output-file ./README.md --check"
      }
    },
    "keywords": [
      "log",
      "logger",
      "json"
    ],
    "main": "./dist/log.js",
    "name": "roarr",
    "nyc": {
      "include": [
        "src/**/*.js"
      ],
      "instrument": false,
      "reporter": [
        "text-lcov"
      ],
      "require": [
        "@babel/register"
      ],
      "sourceMap": false
    },
    "license": "BSD-3-Clause",
    "repository": {
      "type": "git",
      "url": "git@github.com:gajus/roarr.git"
    },
    "scripts": {
      "build": "rm -fr ./dist && NODE_ENV=production babel ./src --out-dir ./dist --copy-files --source-maps && flow-copy-source src dist",
      "create-readme": "gitdown ./.README/README.md --output-file ./README.md",
      "dev": "NODE_ENV=production babel ./src --out-dir ./dist --copy-files --source-maps --watch",
      "lint": "eslint ./src ./test && flow",
      "test": "NODE_ENV=test ava --serial --verbose"
    },
    "version": "2.15.4",
    "_registry": "npm",
    "_loc": "/home/brunomiguel/userrepository/pkgbuild/cerebro/src/yarn-cache/v6/npm-roarr-2.15.4-integrity/node_modules/roarr/package.json",
    "readmeFilename": "README.md",
    "readme": "<a name=\"roarr\"></a>\n# Roarr\n\n[![GitSpo Mentions](https://gitspo.com/badges/mentions/gajus/roarr?style=flat-square)](https://gitspo.com/mentions/gajus/roarr)\n[![Travis build status](http://img.shields.io/travis/gajus/roarr/master.svg?style=flat-square)](https://travis-ci.org/gajus/roarr)\n[![Coveralls](https://img.shields.io/coveralls/gajus/roarr.svg?style=flat-square)](https://coveralls.io/github/gajus/roarr)\n[![NPM version](http://img.shields.io/npm/v/roarr.svg?style=flat-square)](https://www.npmjs.org/package/roarr)\n[![Canonical Code Style](https://img.shields.io/badge/code%20style-canonical-blue.svg?style=flat-square)](https://github.com/gajus/canonical)\n[![Twitter Follow](https://img.shields.io/twitter/follow/kuizinas.svg?style=social&label=Follow)](https://twitter.com/kuizinas)\n\nJSON logger for Node.js and browser.\n\n* [Roarr](#roarr)\n    * [Motivation](#roarr-motivation)\n    * [Usage](#roarr-usage)\n        * [Producing logs](#roarr-usage-producing-logs)\n        * [Consuming logs](#roarr-usage-consuming-logs)\n        * [Filtering logs](#roarr-usage-filtering-logs)\n    * [Log message format](#roarr-log-message-format)\n    * [API](#roarr-api)\n        * [`adopt`](#roarr-api-adopt)\n        * [`child`](#roarr-api-child)\n        * [`getContext`](#roarr-api-getcontext)\n        * [`trace`](#roarr-api-trace)\n        * [`debug`](#roarr-api-debug)\n        * [`info`](#roarr-api-info)\n        * [`warn`](#roarr-api-warn)\n        * [`error`](#roarr-api-error)\n        * [`fatal`](#roarr-api-fatal)\n    * [Middlewares](#roarr-middlewares)\n    * [CLI program](#roarr-cli-program)\n    * [Transports](#roarr-transports)\n    * [Node.js environment variables](#roarr-node-js-environment-variables)\n    * [Conventions](#roarr-conventions)\n        * [Context property names](#roarr-conventions-context-property-names)\n        * [Using Roarr in an application](#roarr-conventions-using-roarr-in-an-application)\n    * [Recipes](#roarr-recipes)\n        * [Logging errors](#roarr-recipes-logging-errors)\n        * [Using with Elasticsearch](#roarr-recipes-using-with-elasticsearch)\n        * [Using with Scalyr](#roarr-recipes-using-with-scalyr)\n        * [Documenting use of Roarr](#roarr-recipes-documenting-use-of-roarr)\n\n\n<a name=\"roarr-motivation\"></a>\n## Motivation\n\nFor a long time I have been a big fan of using [`debug`](https://github.com/visionmedia/debug). `debug` is simple to use, works in Node.js and browser, does not require configuration and it is fast. However, problems arise when you need to parse logs. Anything but one-line text messages cannot be parsed in a safe way.\n\nTo log structured data, I have been using [Winston](https://github.com/winstonjs/winston) and [Bunyan](https://github.com/trentm/node-bunyan). These packages are great for application-level logging. I have preferred Bunyan because of the [Bunyan CLI program](https://github.com/trentm/node-bunyan#cli-usage) used to pretty-print logs. However, these packages require program-level configuration – when constructing an instance of a logger, you need to define the transport and the log-level. This makes them unsuitable for use in code designed to be consumed by other applications.\n\nThen there is [pino](https://github.com/pinojs/pino). pino is fast JSON logger, it has CLI program equivalent to Bunyan, it decouples transports, and it has sane default configuration. Unfortunately, you still need to instantiate logger instance at the application-level. This makes it more suitable for application-level logging just like Winston and Bunyan.\n\nI needed a logger that:\n\n* Does not block the event cycle (=fast).\n* Does not require initialisation.\n* Produces structured data.\n* [Decouples transports](#transports).\n* Has a [CLI program](#cli-program).\n* Works in Node.js and browser.\n* Configurable using environment variables.\n\nIn other words,\n\n* a logger that I can use in an application code and in dependencies.\n* a logger that allows to correlate logs between the main application code and the dependency code.\n* a logger that works well with transports in external processes.\n\nRoarr is this logger.\n\n<a name=\"roarr-usage\"></a>\n## Usage\n\n<a name=\"roarr-usage-producing-logs\"></a>\n### Producing logs\n\nRoarr logger API for producing logs is the same in Node.js and browser.\n\n1. Import `roarr`\n2. Use any of the [API](#api) methods to log messages.\n\nExample:\n\n```js\nimport log from 'roarr';\n\nlog('foo');\n\n```\n\n<a name=\"roarr-usage-consuming-logs\"></a>\n### Consuming logs\n\nRoarr logs are consumed differently in Node.js and browser.\n\n<a name=\"roarr-usage-consuming-logs-node-js\"></a>\n#### Node.js\n\nIn Node.js, Roarr logging is disabled by default. To enable logging, you must start program with an environment variable `ROARR_LOG` set to `true`, e.g.\n\n```bash\nROARR_LOG=true node ./index.js\n\n```\n\nAll logs will be written to stdout.\n\n<a name=\"roarr-usage-consuming-logs-browser\"></a>\n#### Browser\n\nIn a browser, you must implement `ROARR.write` method to read logs, e.g.\n\n```js\nimport {\n  ROARR,\n} from 'roarr';\n\nROARR.write = () => {};\n\n```\n\nThe API of the `ROARR.write` is:\n\n```js\n(message: string) => void;\n\n```\n\nExample implementation:\n\n```js\nimport {\n  ROARR,\n} from 'roarr';\n\nROARR.write = (message) => {\n  console.log(JSON.parse(message));\n};\n\n```\n\nor if you are initializing `ROARR.write` _before_ `roarr` is loaded:\n\n```js\n// Ensure that `globalThis.ROARR` is configured.\nconst ROARR = globalThis.ROARR = globalThis.ROARR || {};\n\nROARR.write = (message) => {\n  console.log(JSON.parse(message));\n};\n\n```\n\nIf your platform does not support [`globalThis`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis), use [`globalthis` polyfill](https://www.npmjs.com/package/globalthis).\n\n<a name=\"roarr-usage-filtering-logs\"></a>\n### Filtering logs\n\n<a name=\"roarr-usage-filtering-logs-node-js-1\"></a>\n#### Node.js\n\nIn Node.js, Roarr prints all or none logs (refer to the [`ROARR_LOG` environment variable](#environment-variables) documentation).\n\nUse [`roarr filter` CLI program](#filter-program) to filter the logs that are written to stdout by the program, e.g.\n\n```bash\nROARR_LOG=true node ./index.js | roarr filter '{\"context.logLevel\":{gt:30}}'\n\n```\n\nAlternatively, use a JSON processor such as [jq](https://stedolan.github.io/jq/)\n\n<a name=\"roarr-usage-filtering-logs-browser-1\"></a>\n#### Browser\n\nIn a browser, Roarr calls `globalThis.ROARR.write` for every log message. Implement your own custom logic to filter logs, e.g.\n\n```js\nglobalThis.ROARR.write = (message) => {\n  const payload = JSON.parse(message);\n\n  if (payload.context.logLevel > 30) {\n    console.log(payload);\n  }\n};\n\n```\n\n<a name=\"roarr-log-message-format\"></a>\n## Log message format\n\n|Property name|Contents|\n|---|---|\n|`context`|Arbitrary, user-provided structured data. See [context property names](#context-property-names).|\n|`message`|User-provided message formatted using [printf](https://en.wikipedia.org/wiki/Printf_format_string).|\n|`sequence`|An incremental ID.|\n|`time`|Unix timestamp in milliseconds.|\n|`version`|Roarr log message format version.|\n\nExample:\n\n```js\n{\n  \"context\": {\n    \"application\": \"task-runner\",\n    \"hostname\": \"curiosity.local\",\n    \"instanceId\": \"01BVBK4ZJQ182ZWF6FK4EC8FEY\",\n    \"taskId\": 1\n  },\n  \"message\": \"starting task ID 1\",\n  \"sequence\": 0,\n  \"time\": 1506776210000,\n  \"version\": \"1.0.0\"\n}\n\n```\n\n<a name=\"roarr-api\"></a>\n## API\n\n`roarr` package exports a function with the following API:\n\n```js\nexport type LoggerType =\n  (\n    context: MessageContextType,\n    message: string,\n    c?: SprintfArgumentType,\n    d?: SprintfArgumentType,\n    e?: SprintfArgumentType,\n    f?: SprintfArgumentType,\n    g?: SprintfArgumentType,\n    h?: SprintfArgumentType,\n    i?: SprintfArgumentType,\n    k?: SprintfArgumentType\n  ) => void |\n  (\n    message: string,\n    b?: SprintfArgumentType,\n    c?: SprintfArgumentType,\n    d?: SprintfArgumentType,\n    e?: SprintfArgumentType,\n    f?: SprintfArgumentType,\n    g?: SprintfArgumentType,\n    h?: SprintfArgumentType,\n    i?: SprintfArgumentType,\n    k?: SprintfArgumentType\n  ) => void;\n\n```\n\nTo put it into words:\n\n* First parameter can be either a string (message) or an object.\n  * If first parameter is an object (context), the second parameter must be a string (message).\n* Arguments after the message parameter are used to enable [printf message formatting](https://en.wikipedia.org/wiki/Printf_format_string).\n  * Printf arguments must be of a primitive type (`string | number | boolean | null`).\n  * There can be up to 9 printf arguments (or 8 if the first parameter is the context object).\n\nRefer to the [Usage documentation](#usage) for common usage examples.\n\n<a name=\"roarr-api-adopt\"></a>\n### <code>adopt</code>\n\n```js\n<T>(routine: () => Promise<T>, context: MessageContextType) => Promise<T>,\n\n```\n\n`adopt` function uses Node.js [`domain`](https://nodejs.org/api/domain.html) to pass-down context properties.\n\nWhen using `adopt`, context properties will be added to all _all_ Roarr messages within the same asynchronous context, e.g.\n\n```js\nawait log.adopt(\n  async () => {\n    log('foo 0');\n\n    await log.adopt(\n      () => {\n        log('foo 1');\n      },\n      {\n        baz: 'baz 1',\n      },\n    );\n  },\n  {\n    bar: 'bar 0',\n  },\n);\n\n// {\"context\":{\"bar\":\"bar 0\"},\"message\":\"foo 0\",\"sequence\":0,\"time\":1531914656076,\"version\":\"1.0.0\"}\n// {\"context\":{\"bar\":\"bar 0\",\"baz\":\"baz 1\"},\"message\":\"foo 1\",\"sequence\":1,\"time\":1531914656077,\"version\":\"1.0.0\"}]\n\n```\n\n<a name=\"roarr-api-adopt-requirements\"></a>\n#### Requirements\n\n* `adopt` method only works in Node.js.\n* You must shim Node.js using [`domain-parent`](https://github.com/gajus/domain-parent).\n\n<a name=\"roarr-api-child\"></a>\n### <code>child</code>\n\n```js\n(context: TranslateMessageFunctionType | MessageContextType) => LoggerType,\n\n```\n\nThe `child` function has two signatures:\n\n1. Accepts an object.\n2. Accepts a function.\n\n<a name=\"roarr-api-child-object-parameter\"></a>\n#### Object parameter\n\n```js\n(context: MessageContextType) => LoggerType;\n\n```\n\nCreates a child logger appending the provided `context` object to the previous logger context.\n\nExample:\n\n```js\nimport log from 'roarr';\n\nconst childLog = log.child({\n  foo: 'bar'\n});\n\nlog.debug('foo 1');\nchildLog.debug('foo 2');\n\n// {\"context\":{\"logLevel\":20},\"message\":\"foo 1\",\"sequence\":0,\"time\":1531914529921,\"version\":\"1.0.0\"}\n// {\"context\":{\"foo\":\"bar\",\"logLevel\":20},\"message\":\"foo 2\",\"sequence\":1,\"time\":1531914529922,\"version\":\"1.0.0\"}\n\n```\n\nRefer to [middlewares](#middlewares) documentation for use case examples.\n\n<a name=\"roarr-api-child-function-parameter\"></a>\n#### Function parameter\n\n```js\n(translateMessage: TranslateMessageFunctionType) => LoggerType;\n\n```\n\nCreates a child logger where every message is intercepted.\n\nExample:\n\n```js\nimport log from 'roarr';\n\nconst childLog = log.child((message) => {\n  return {\n    ...message,\n    message: message.message.replace('foo', 'bar'),\n  }\n});\n\nlog.debug('foo 1');\nchildLog.debug('foo 2');\n\n// {\"context\":{\"logLevel\":20},\"message\":\"foo 1\",\"sequence\":0,\"time\":1531914656076,\"version\":\"1.0.0\"}\n// {\"context\":{\"logLevel\":20},\"message\":\"bar 2\",\"sequence\":1,\"time\":1531914656077,\"version\":\"1.0.0\"}\n\n```\n\n<a name=\"roarr-api-getcontext\"></a>\n### <code>getContext</code>\n\nReturns the current context.\n\nExample:\n\n```js\nimport log from 'roarr';\n\nconst childLogger = log.child({\n  foo: 'bar'\n});\n\nchildLogger.getContext();\n\n// {foo: 'bar'}\n\n```\n\n<a name=\"roarr-api-trace\"></a>\n### <code>trace</code>\n<a name=\"roarr-api-debug\"></a>\n### <code>debug</code>\n<a name=\"roarr-api-info\"></a>\n### <code>info</code>\n<a name=\"roarr-api-warn\"></a>\n### <code>warn</code>\n<a name=\"roarr-api-error\"></a>\n### <code>error</code>\n<a name=\"roarr-api-fatal\"></a>\n### <code>fatal</code>\n\nConvenience methods for logging a message with `logLevel` context property value set to a numeric value representing the [log level](#log-levels), e.g.\n\n```js\nimport log from 'roarr';\n\nlog.trace('foo');\nlog.debug('foo');\nlog.info('foo');\nlog.warn('foo');\nlog.error('foo');\nlog.fatal('foo');\n\n```\n\nProduces output:\n\n```\n{\"context\":{\"logLevel\":10},\"message\":\"foo\",\"sequence\":0,\"time\":1506776210000,\"version\":\"1.0.0\"}\n{\"context\":{\"logLevel\":20},\"message\":\"foo\",\"sequence\":1,\"time\":1506776210000,\"version\":\"1.0.0\"}\n{\"context\":{\"logLevel\":30},\"message\":\"foo\",\"sequence\":2,\"time\":1506776210000,\"version\":\"1.0.0\"}\n{\"context\":{\"logLevel\":40},\"message\":\"foo\",\"sequence\":3,\"time\":1506776210000,\"version\":\"1.0.0\"}\n{\"context\":{\"logLevel\":50},\"message\":\"foo\",\"sequence\":4,\"time\":1506776210000,\"version\":\"1.0.0\"}\n{\"context\":{\"logLevel\":60},\"message\":\"foo\",\"sequence\":5,\"time\":1506776210000,\"version\":\"1.0.0\"}\n\n```\n\n<a name=\"roarr-middlewares\"></a>\n## Middlewares\n\nRoarr logger supports middlewares implemented as [`child`](#child) message translate functions, e.g.\n\n```js\nimport log from 'roarr';\nimport createSerializeErrorMiddleware from '@roarr/middleware-serialize-error';\n\nconst childLog = log.child(createSerializeErrorMiddleware());\n\nconst error = new Error('foo');\n\nlog.debug({error}, 'bar');\nchildLog.debug({error}, 'bar');\n\n// {\"context\":{\"logLevel\":20,\"error\":{}},\"message\":\"bar\",\"sequence\":0,\"time\":1531918373676,\"version\":\"1.0.0\"}\n// {\"context\":{\"logLevel\":20,\"error\":{\"name\":\"Error\",\"message\":\"foo\",\"stack\":\"[REDACTED]\"}},\"message\":\"bar\",\"sequence\":1,\"time\":1531918373678,\"version\":\"1.0.0\"}\n\n```\n\nRoarr middlwares enable translation of every bit of information that is used to construct a log message.\n\nThe following are the official middlewares:\n\n* [`@roarr/middleware-serialize-error`](https://github.com/gajus/roarr-middleware-serialize-error)\n\nRaise an issue to add your middleware of your own creation.\n\n<a name=\"roarr-cli-program\"></a>\n## CLI program\n\nRoarr CLI program provides ability to filter and pretty-print Roarr logs.\n\n![CLI output demo](./.README/cli-output-demo.png)\n\nCLI program has been moved to a separate package [`@roarr/cli`](https://github.com/gajus/roarr-cli).\n\n```bash\nnpm install @roarr/cli -g\n\n```\n\nExplore all CLI commands and options using `roarr --help` or refer to [`@roarr/cli`](https://github.com/gajus/roarr-cli) documentation.\n\n<a name=\"roarr-transports\"></a>\n## Transports\n\nA transport in most logging libraries is something that runs in-process to perform some operation with the finalised log line. For example, a transport might send the log line to a standard syslog server after processing the log line and reformatting it.\n\nRoarr does not support in-process transports.\n\nRoarr does not support in-process transports because Node processes are single threaded processes (ignoring some technical details). Given this restriction, Roarr purposefully offloads handling of the logs to external processes so that the threading capabilities of the OS can be used (or other CPUs).\n\nDepending on your configuration, consider one of the following log transports:\n\n* [Beats](https://www.elastic.co/products/beats) for aggregating at a process level (written in Go).\n* [logagent](https://github.com/sematext/logagent-js) for aggregating at a process level (written in JavaScript).\n* [Fluentd](https://www.fluentd.org/) for aggregating logs at a container orchestration level (e.g. Kubernetes) (written in Ruby).\n\n<a name=\"roarr-node-js-environment-variables\"></a>\n## Node.js environment variables\n\nUse environment variables to control `roarr` behaviour.\n\n|Name|Type|Function|Default|\n|---|---|---|---|\n|`ROARR_LOG`|Boolean|Enables/ disables logging.|`false`|\n|`ROARR_STREAM`|`STDOUT`, `STDERR`|Name of the stream where the logs will be written.|`STDOUT`|\n\nWhen using `ROARR_STREAM=STDERR`, use [`3>&1 1>&2 2>&3 3>&-`](https://stackoverflow.com/a/2381643/368691) to pipe stderr output.\n\n<a name=\"roarr-conventions\"></a>\n## Conventions\n\n<a name=\"roarr-conventions-context-property-names\"></a>\n### Context property names\n\nRoarr does not have reserved context property names. However, I encourage use of the following conventions:\n\n|Context property name|Use case|\n|---|---|\n|`application`|Name of the application (do not use in code intended for distribution; see `package` property instead).|\n|`logLevel`|A numeric value indicating the [log level](#log-levels). See [API](#api) for the build-in loggers with a pre-set log-level.|\n|`namespace`|Namespace within a package, e.g. function name. Treat the same way that you would construct namespaces when using the [`debug`](https://github.com/visionmedia/debug) package.|\n|`package`|Name of the NPM package.|\n\nThe `roarr pretty-print` [CLI program](#cli-program) is using the context property names suggested in the conventions to pretty-print the logs for the developer inspection purposes.\n\n<a name=\"roarr-conventions-context-property-names-log-levels\"></a>\n#### Log levels\n\nThe `roarr pretty-print` [CLI program](#cli-program) translates `logLevel` values to the following human-readable names:\n\n|`logLevel`|Human-readable name|\n|---|---|\n|10|TRACE|\n|20|DEBUG|\n|30|INFO|\n|40|WARN|\n|50|ERROR|\n|60|FATAL|\n\n<a name=\"roarr-conventions-using-roarr-in-an-application\"></a>\n### Using Roarr in an application\n\nTo avoid code duplication, you can use a singleton pattern to export a logger instance with predefined context properties (e.g. describing the application).\n\nI recommend to create a file `Logger.js` in the project directory. Inside this file create and export a child instance of Roarr with context parameters describing the project and the script instance, e.g.\n\n```js\n/**\n * @file Example contents of a Logger.js file.\n */\n\nimport log from 'roarr';\n\nconst Logger = log.child({\n  // .foo property is going to appear only in the logs that are created using\n  // the current instance of a Roarr logger.\n  foo: 'bar'\n});\n\nexport default Logger;\n\n```\n\nRoarr does not have reserved context property names. However, I encourage use of the [conventions](#conventions).\n\n<a name=\"roarr-recipes\"></a>\n## Recipes\n\n<a name=\"roarr-recipes-logging-errors\"></a>\n### Logging errors\n\nThis is not specific to Roarr – this suggestion applies to any kind of logging.\n\nIf you want to include an instance of [`Error`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error) in the context, you must serialize the error.\n\nThe least-error prone way to do this is to use an existing library, e.g. [`serialize-error`](https://www.npmjs.com/package/serialize-error).\n\n```js\nimport log from 'roarr';\nimport serializeError from 'serialize-error';\n\n// [..]\n\nsend((error, result) => {\n  if (error) {\n    log.error({\n      error: serializeError(error)\n    }, 'message not sent due to a remote error');\n\n    return;\n  }\n\n  // [..]\n});\n\n```\n\nWithout using serialisation, your errors will be logged without the error name and stack trace.\n\n<a name=\"roarr-recipes-using-with-elasticsearch\"></a>\n### Using with Elasticsearch\n\nIf you are using [Elasticsearch](https://www.elastic.co/products/elasticsearch), you will want to create an [index template](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html).\n\nThe following serves as the ground work for the index template. It includes the main Roarr log message properties (context, message, time) and the context properties suggested in the [conventions](#conventions).\n\n```json\n{\n  \"mappings\": {\n    \"log_message\": {\n      \"_source\": {\n        \"enabled\": true\n      },\n      \"dynamic\": \"strict\",\n      \"properties\": {\n        \"context\": {\n          \"dynamic\": true,\n          \"properties\": {\n            \"application\": {\n              \"type\": \"keyword\"\n            },\n            \"hostname\": {\n              \"type\": \"keyword\"\n            },\n            \"instanceId\": {\n              \"type\": \"keyword\"\n            },\n            \"logLevel\": {\n              \"type\": \"integer\"\n            },\n            \"namespace\": {\n              \"type\": \"text\"\n            },\n            \"package\": {\n              \"type\": \"text\"\n            }\n          }\n        },\n        \"message\": {\n          \"type\": \"text\"\n        },\n        \"time\": {\n          \"format\": \"epoch_millis\",\n          \"type\": \"date\"\n        }\n      }\n    }\n  },\n  \"template\": \"logstash-*\"\n}\n\n```\n\n<a name=\"roarr-recipes-using-with-scalyr\"></a>\n### Using with Scalyr\n\nIf you are using [Scalyr](https://www.scalyr.com/), you will want to create a custom parser `RoarrLogger`:\n\n```js\n{\n  patterns: {\n    tsPattern: \"\\\\w{3},\\\\s\\\\d{2}\\\\s\\\\w{3}\\\\s\\\\d{4}\\\\s[\\\\d:]+\",\n    tsPattern_8601: \"\\\\d{4}-\\\\d{2}-\\\\d{2}T[\\\\d:.]+Z\"\n  }\n  formats: [\n    {format: \"${parse=json}$\"},\n    {format: \".*\\\"time\\\":$timestamp=number$,.*\"},\n    {format: \"$timestamp=tsPattern$ GMT $detail$\"},\n    {format: \"$timestamp=tsPattern_8601$ $detail$\"}\n  ]\n}\n\n```\n\nand configure the individual programs to use `RoarrLogger`. In case of Kubernetes, this means adding a `log.config.scalyr.com/attributes.parser: RoarrLogger` annotation to the associated deployment, pod or container.\n\n<a name=\"roarr-recipes-documenting-use-of-roarr\"></a>\n### Documenting use of Roarr\n\nIf your package is using Roarr, include instructions in `README.md` describing how to enable logging, e.g.\n\n```md\n## Logging\n\nThis package is using [`roarr`](https://www.npmjs.com/package/roarr) logger to log the program's state.\n\nExport `ROARR_LOG=true` environment variable to enable log printing to stdout.\n\nUse [`roarr-cli`](https://github.com/gajus/roarr-cli) program to pretty-print the logs.\n\n```\n",
    "licenseText": "Copyright (c) 2019, Gajus Kuizinas (http://gajus.com/)\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n    * Redistributions in binary form must reproduce the above copyright\n      notice, this list of conditions and the following disclaimer in the\n      documentation and/or other materials provided with the distribution.\n    * Neither the name of the Gajus Kuizinas (http://gajus.com/) nor the\n      names of its contributors may be used to endorse or promote products\n      derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL ANUARY BE LIABLE FOR ANY\nDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\nON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.npmjs.org/roarr/-/roarr-2.15.4.tgz",
    "type": "tarball",
    "reference": "https://registry.npmjs.org/roarr/-/roarr-2.15.4.tgz",
    "hash": "",
    "integrity": "sha512-CHhPh+UNHD2GTXNYhPWLnU8ONHdI+5DI+4EYIAOaiD63rHeYlZvyh8P+in5999TTSFgUYuKUAjzRI4mdh/p+2A==",
    "registry": "npm",
    "packageName": "roarr",
    "cacheIntegrity": "sha512-CHhPh+UNHD2GTXNYhPWLnU8ONHdI+5DI+4EYIAOaiD63rHeYlZvyh8P+in5999TTSFgUYuKUAjzRI4mdh/p+2A== sha1-9f55W3uDjM/jXcYI4Cgrnrouev0="
  },
  "registry": "npm",
  "hash": "08784f87e50d1c3d864d735884f58b9d4f0e347748fb90c8fb811820039a883eb7ac7798959bf287c3fe8a7e7df7d4d348581462e294023cd123899d87fa7ed8"
}