{
  "manifest": {
    "name": "internmap",
    "version": "1.0.0",
    "description": "Map and Set with automatic key interning",
    "homepage": "https://github.com/mbostock/internmap/",
    "license": "ISC",
    "author": {
      "name": "Mike Bostock",
      "url": "https://bost.ocks.org/mike"
    },
    "main": "dist/internmap.js",
    "unpkg": "dist/internmap.min.js",
    "module": "src/index.js",
    "repository": {
      "type": "git",
      "url": "https://github.com/mbostock/internmap.git"
    },
    "files": [
      "dist/**/*.js",
      "src/**/*.js"
    ],
    "scripts": {
      "pretest": "rollup -c",
      "test": "tape test/**/*-test.js && eslint src test",
      "prepublishOnly": "rm -rf dist && yarn test",
      "postpublish": "git push && git push --tags"
    },
    "sideEffects": false,
    "devDependencies": {
      "eslint": "^7.18.0",
      "rollup": "^2.37.1",
      "rollup-plugin-terser": "^7.0.2",
      "tape": "^4.13.3",
      "tape-await": "^0.1.2"
    },
    "_registry": "npm",
    "_loc": "/home/brunomiguel/userrepository/pkgbuild/cerebro/src/yarn-cache/v6/npm-internmap-1.0.0-3c6bf0944b0eae457698000412108752bbfddb56-integrity/node_modules/internmap/package.json",
    "readmeFilename": "README.md",
    "readme": "# InternMap\n\n*For live examples, see https://observablehq.com/@mbostock/internmap.*\n\nIf you use dates as keys in a JavaScript Map (or as values in a Set), you may be surprised that it won’t work as you expect.\n\n```js\ndateMap = new Map([\n  [new Date(Date.UTC(2001, 0, 1)), \"red\"],\n  [new Date(Date.UTC(2001, 0, 1)), \"green\"] // distinct key!\n])\n```\n```js\ndateMap.get(new Date(Date.UTC(2001, 0, 1))) // undefined!\n```\n\nThat’s because Map uses the [SameValueZero algorithm](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness) to determine key equality: for two dates to be considered the same, they must be the same instance (the same object), not just the same moment in time. This is true of the equality operator, too.\n\n```js\n{\n  const date1 = new Date(Date.UTC(2001, 0, 1));\n  const date2 = new Date(Date.UTC(2001, 0, 1));\n  return date1 === date2; // false!\n}\n```\n\nYou can avoid this issue by using primitive values such as numbers or strings as keys instead. But it’s tedious and easy to forget to coerce types. (You’ll also need to do the inverse type conversion when pulling keys out of the map, say when using *map*.keys or *map*.entries, or when iterating over the map. The inverse above is new Date(*key*). Also, if you forget to coerce your key to a number when using *map*.get, it’s easy not to notice because the map won’t throw an error; it’ll simply return undefined.)\n\n```js\nnumberMap = new Map([[978307200000, \"red\"]])\nnumberMap.get(978307200000) // \"red\"\nnumberMap.get(new Date(978307200000)) // undefined; oops!\n```\n\nWouldn’t it be easier if Map and Set “just worked” with dates? Or with any object that supports [*object*.valueOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf)?\n\nEnter **InternMap**. [*Interning*](https://en.wikipedia.org/wiki/String_interning) refers to storing only one copy of each distinct key. An InternMap considers two Date instances representing the same moment to be equal, storing only the first instance.\n\n```js\nmap = new InternMap([\n  [new Date(Date.UTC(2001, 0, 1)), \"red\"],\n  [new Date(Date.UTC(2001, 0, 1)), \"green\"] // replaces previous entry\n])\n```\n```js\nmap.get(new Date(Date.UTC(2001, 0, 1))) // \"green\"\n```\n```js\n[...map.keys()] // [2001-01-01]\n```\n\nInternMap extends Map, so you can simply drop it in whenever you’d prefer this behavior to the SameValueZero algorithm. Because InternMap calls *object*.valueOf only for non-primitive keys, note that you can pass primitive keys, too.\n\n```js\nmap.get(978307200000) // \"green\"; this works too!\n```\n\nInternMap keeps only the first distinct key according to its associated primitive value. Avoid adding keys to the map with inconsistent types.\n\n```js\nmap2 = new InternMap([\n  [978307200000, \"red\"], // danger!\n  [new Date(Date.UTC(2001, 0, 1)), \"blue\"]\n])\n```\n```js\nmap2.get(new Date(Date.UTC(2001, 0, 1))) // \"blue\"; this still works…\n```\n```js\n[...map2.keys()] // [978307200000]; but the key isn’t a Date\n```\n\nWhile InternMap uses *object*.valueOf by default to compute the intern key, you can pass a key function as a second argument to the constructor to change the behavior. For example, if you use JSON.stringify, you can use arrays as compound keys (assuming that the array elements can be serialized to JSON).\n\n```js\nmap3 = new InternMap([\n  [[\"foo\", \"bar\"], 1],\n  [[\"foo\", \"baz\"], 2],\n  [[\"goo\", \"bee\"], 3]\n], JSON.stringify)\n```\n```js\nmap3.get([\"foo\", \"baz\"]) // 2\n```\n\nThere’s an **InternSet** class, too.\n\n```js\nset = new InternSet([\n  new Date(Date.UTC(2000, 0, 1)),\n  new Date(Date.UTC(2001, 0, 1)),\n  new Date(Date.UTC(2001, 0, 1))\n])\n```\n",
    "licenseText": "Copyright 2021 Mike Bostock\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the author nor the names of contributors may be used to\n  endorse or promote products derived from this software without specific prior\n  written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/internmap/-/internmap-1.0.0.tgz#3c6bf0944b0eae457698000412108752bbfddb56",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/internmap/-/internmap-1.0.0.tgz",
    "hash": "3c6bf0944b0eae457698000412108752bbfddb56",
    "integrity": "sha512-SdoDWwNOTE2n4JWUsLn4KXZGuZPjPF9yyOGc8bnfWnBQh7BD/l80rzSznKc/r4Y0aQ7z3RTk9X+tV4tHBpu+dA==",
    "registry": "npm",
    "packageName": "internmap",
    "cacheIntegrity": "sha512-SdoDWwNOTE2n4JWUsLn4KXZGuZPjPF9yyOGc8bnfWnBQh7BD/l80rzSznKc/r4Y0aQ7z3RTk9X+tV4tHBpu+dA== sha1-PGvwlEsOrkV2mAAEEhCHUrv921Y="
  },
  "registry": "npm",
  "hash": "3c6bf0944b0eae457698000412108752bbfddb56"
}