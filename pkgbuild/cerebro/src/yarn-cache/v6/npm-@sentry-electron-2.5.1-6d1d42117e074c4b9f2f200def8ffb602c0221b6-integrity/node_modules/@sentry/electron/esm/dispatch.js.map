{"version":3,"file":"dispatch.js","sourceRoot":"","sources":["../src/dispatch.ts"],"names":[],"mappings":";AAEA,OAAO,EAAE,cAAc,EAAE,MAAM,eAAe,CAAC;AAI/C;;;;GAIG;AACH;IAIE;;;;;;;OAOG;IACH,wBAAmB,OAAwB;QACzC,0EAA0E;QAC1E,2EAA2E;QAC3E,wEAAwE;QACxE,2EAA2E;QAC3E,0DAA0D;QAE1D,2EAA2E;QAC3E,0EAA0E;QAC1E,4EAA4E;QAC5E,cAAc;QACd,IAAM,WAAW;QACf,sEAAsE;QACtE,OAAO,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,cAAc,CAAC;QAClH,IAAI,CAAC,MAAM,GAAG,IAAI,WAAW,CAAC,OAAO,CAAC,CAAC;IACzC,CAAC;IAED;;OAEG;IACI,wCAAe,GAAtB,UAAuB,IAAY,EAAE,KAAY,EAAE,KAAY;QAC7D,OAAO,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;IACzD,CAAC;IAED;;OAEG;IACH,6EAA6E;IACtE,yCAAgB,GAAvB,UAAwB,SAAc,EAAE,IAAgB,EAAE,KAAa;QACrE,OAAO,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;IAC9D,CAAC;IAED;;OAEG;IACI,uCAAc,GAArB,UAAsB,OAAe,EAAE,KAAgB,EAAE,IAAgB,EAAE,KAAa;QACtF,OAAO,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;IACjE,CAAC;IAED;;OAEG;IACI,qCAAY,GAAnB,UAAoB,KAAY,EAAE,IAAgB,EAAE,KAAa;QAC/D,OAAO,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;IACtD,CAAC;IAED;;OAEG;IACI,+BAAM,GAAb;QACE,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;IAC9B,CAAC;IAED;;OAEG;IACI,mCAAU,GAAjB;QACE,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;IAClC,CAAC;IAED;;OAEG;IACU,8BAAK,GAAlB,UAAmB,OAAgB;;;gBACjC,sBAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,EAAC;;;KACnC;IAED;;OAEG;IACU,8BAAK,GAAlB,UAAmB,OAAgB;;;gBACjC,sBAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,EAAC;;;KACnC;IAED;;OAEG;IACH,6EAA6E;IACtE,yCAAgB,GAAvB,UAAwB,OAAY;QAClC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;IACxC,CAAC;IAED;;OAEG;IACI,uCAAc,GAArB,UAA6C,WAAgC;QAC3E,OAAO,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;IACjD,CAAC;IAED;;OAEG;IACI,0CAAiB,GAAxB;QACE,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC;IAClC,CAAC;IACH,qBAAC;AAAD,CAAC,AA3GD,IA2GC;;AAED;;;;;GAKG;AACH,MAAM,UAAU,YAAY,CAAC,OAAwB;IACnD,gHAAgH;IAChH,OAAO,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACpH,CAAC;AAMD,2EAA2E;AAC3E,MAAM,UAAU,eAAe;IAC7B,+DAA+D;IAC/D,OAAO,OAAO,CAAC,IAAI,KAAK,SAAS;QAC/B,CAAC,CAAC;YACE,QAAQ,EAAE,cAAc,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,oBAAoB;YAC/D,IAAI,EAAE,cAAc,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,gBAAgB;SACxD;QACH,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC,mBAAmB,EAAE,CAAC;IAC3D,8DAA8D;AAChE,CAAC","sourcesContent":["import { ClientClass, Scope } from '@sentry/core';\nimport { Dsn, Event, EventHint, Integration, IntegrationClass, Severity } from '@sentry/types';\nimport { dynamicRequire } from '@sentry/utils';\n\nimport { ElectronClient as ElectronClientInterface, ElectronOptions } from './common';\n\n/**\n * The Sentry Electron SDK Frontend.\n *\n * @see ElectronOptions for documentation on configuration options.\n */\nexport class ElectronClient implements ElectronClientInterface {\n  /** Actual frontend implementation for the main or renderer process. */\n  private readonly _inner: ElectronClientInterface;\n\n  /**\n   * Creates a new Electron SDK instance.\n   *\n   * This constructor automatically chooses the right implementation for the\n   * process type (`browser` or `renderer`).\n   *\n   * @param options Configuration options for this SDK.\n   */\n  public constructor(options: ElectronOptions) {\n    // We dynamically load the frontend implementation for the current process\n    // type. In frontend bundlers such as webpack or rollup, those requires are\n    // resolved statically. For this reason, we use `dynamicRequire` for the\n    // main implementation here, which is only defined in the main process. The\n    // renderer implementation must use the default `require`.\n\n    // In case `process.type` is not defined, dispatch defaults to the renderer\n    // implementation, which should be fine for most cases. False positives of\n    // this would be running `@sentry/electron` in a bare node process, which is\n    // acceptable.\n    const clientClass: ClientClass<ElectronClientInterface, ElectronOptions> =\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      process.type === 'browser' ? dynamicRequire(module, './main').MainClient : require('./renderer').RendererClient;\n    this._inner = new clientClass(options);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public captureMinidump(path: string, event: Event, scope: Scope): string | undefined {\n    return this._inner.captureMinidump(path, event, scope);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  public captureException(exception: any, hint?: EventHint, scope?: Scope): string | undefined {\n    return this._inner.captureException(exception, hint, scope);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public captureMessage(message: string, level?: Severity, hint?: EventHint, scope?: Scope): string | undefined {\n    return this._inner.captureMessage(message, level, hint, scope);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public captureEvent(event: Event, hint?: EventHint, scope?: Scope): string | undefined {\n    return this._inner.captureEvent(event, hint, scope);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public getDsn(): Dsn | undefined {\n    return this._inner.getDsn();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public getOptions(): ElectronOptions {\n    return this._inner.getOptions();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public async close(timeout?: number): Promise<boolean> {\n    return this._inner.close(timeout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public async flush(timeout?: number): Promise<boolean> {\n    return this._inner.flush(timeout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  public showReportDialog(options: any): void {\n    this._inner.showReportDialog(options);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public getIntegration<T extends Integration>(integration: IntegrationClass<T>): T | null {\n    return this._inner.getIntegration(integration);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setupIntegrations(): void {\n    this._inner.setupIntegrations();\n  }\n}\n\n/**\n * This either calls init on main with node interations or renderer\n * with browser integrations.\n *\n * @param options Options\n */\nexport function specificInit(options: ElectronOptions): void {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions, @typescript-eslint/no-unsafe-member-access\n  process.type === 'browser' ? dynamicRequire(module, './main').init(options) : require('./renderer').init(options);\n}\n\n/** Convenience interface used to expose Integrations */\nexport interface Integrations {\n  [key: string]: Integration;\n}\n/** Return all integrations depending if running in browser or renderer. */\nexport function getIntegrations(): { node: Integrations; electron: Integrations } | { browser: Integrations } {\n  /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n  return process.type === 'browser'\n    ? {\n        electron: dynamicRequire(module, './main').ElectronIntegrations,\n        node: dynamicRequire(module, './main').NodeIntegrations,\n      }\n    : { browser: require('./renderer').BrowserIntegrations };\n  /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n}\n"]}