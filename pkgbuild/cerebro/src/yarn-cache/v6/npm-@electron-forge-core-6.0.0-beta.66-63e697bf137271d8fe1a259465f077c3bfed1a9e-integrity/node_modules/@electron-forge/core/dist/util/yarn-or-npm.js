"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.hasYarn = exports.yarnOrNpmSpawn = exports.default = void 0;
var _chalk = _interopRequireDefault(require("chalk"));
var _crossSpawnPromise = require("@malept/cross-spawn-promise");
var _logSymbols = _interopRequireDefault(require("log-symbols"));
var _yarnOrNpm = _interopRequireDefault(require("yarn-or-npm"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const safeYarnOrNpm = ()=>{
    const system = (0, _yarnOrNpm).default();
    switch(process.env.NODE_INSTALLER){
        case 'yarn':
        case 'npm':
            return process.env.NODE_INSTALLER;
        default:
            if (process.env.NODE_INSTALLER) {
                // eslint-disable-next-line no-console
                console.warn(_logSymbols.default.warning, _chalk.default.yellow(`Unknown NODE_INSTALLER, using detected installer ${system}`));
            }
            return system;
    }
};
var _default = safeYarnOrNpm;
exports.default = _default;
const yarnOrNpmSpawn = (args, opts)=>(0, _crossSpawnPromise).spawn(safeYarnOrNpm(), args, opts)
;
exports.yarnOrNpmSpawn = yarnOrNpmSpawn;
const hasYarn = ()=>safeYarnOrNpm() === 'yarn'
;
exports.hasYarn = hasYarn;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3lhcm4tb3ItbnBtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgeyBDcm9zc1NwYXduQXJncywgQ3Jvc3NTcGF3bk9wdGlvbnMsIHNwYXduIH0gZnJvbSAnQG1hbGVwdC9jcm9zcy1zcGF3bi1wcm9taXNlJztcbmltcG9ydCBsb2dTeW1ib2xzIGZyb20gJ2xvZy1zeW1ib2xzJztcbmltcG9ydCB5YXJuT3JOcG0gZnJvbSAneWFybi1vci1ucG0nO1xuXG5jb25zdCBzYWZlWWFybk9yTnBtID0gKCk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHN5c3RlbSA9IHlhcm5Pck5wbSgpO1xuICBzd2l0Y2ggKHByb2Nlc3MuZW52Lk5PREVfSU5TVEFMTEVSKSB7XG4gICAgY2FzZSAneWFybic6XG4gICAgY2FzZSAnbnBtJzpcbiAgICAgIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0lOU1RBTExFUjtcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfSU5TVEFMTEVSKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUud2Fybihsb2dTeW1ib2xzLndhcm5pbmcsIGNoYWxrLnllbGxvdyhgVW5rbm93biBOT0RFX0lOU1RBTExFUiwgdXNpbmcgZGV0ZWN0ZWQgaW5zdGFsbGVyICR7c3lzdGVtfWApKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzeXN0ZW07XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNhZmVZYXJuT3JOcG07XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG5leHBvcnQgY29uc3QgeWFybk9yTnBtU3Bhd24gPSAoYXJncz86IENyb3NzU3Bhd25BcmdzLCBvcHRzPzogQ3Jvc3NTcGF3bk9wdGlvbnMpOiBQcm9taXNlPHN0cmluZz4gPT4gc3Bhd24oc2FmZVlhcm5Pck5wbSgpLCBhcmdzLCBvcHRzKTtcblxuZXhwb3J0IGNvbnN0IGhhc1lhcm4gPSAoKTogYm9vbGVhbiA9PiBzYWZlWWFybk9yTnBtKCkgPT09ICd5YXJuJztcbiJdLCJuYW1lcyI6WyJzYWZlWWFybk9yTnBtIiwic3lzdGVtIiwieWFybk9yTnBtIiwicHJvY2VzcyIsImVudiIsIk5PREVfSU5TVEFMTEVSIiwiY29uc29sZSIsIndhcm4iLCJsb2dTeW1ib2xzIiwid2FybmluZyIsImNoYWxrIiwieWVsbG93IiwieWFybk9yTnBtU3Bhd24iLCJhcmdzIiwib3B0cyIsInNwYXduIiwiaGFzWWFybiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0IsR0FBTyxDQUFQLE1BQU87QUFDZ0MsR0FBNkIsQ0FBN0Isa0JBQTZCO0FBQy9ELEdBQWEsQ0FBYixXQUFhO0FBQ2QsR0FBYSxDQUFiLFVBQWE7Ozs7OztBQUVuQyxLQUFLLENBQUNBLGFBQWEsT0FBaUIsQ0FBQztJQUNuQyxLQUFLLENBQUNDLE1BQU0sT0FBR0MsVUFBUztJQUN4QixNQUFNLENBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjO1FBQ2hDLElBQUksQ0FBQyxDQUFNO1FBQ1gsSUFBSSxDQUFDLENBQUs7WUFDUixNQUFNLENBQUNGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjOztZQUVqQyxFQUFFLEVBQUVGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjLEVBQUUsQ0FBQztnQkFDL0IsRUFBc0MsQUFBdEMsb0NBQXNDO2dCQUN0Q0MsT0FBTyxDQUFDQyxJQUFJLENBQUNDLFdBQVUsU0FBQ0MsT0FBTyxFQUFFQyxNQUFLLFNBQUNDLE1BQU0sRUFBRSxpREFBaUQsRUFBRVYsTUFBTTtZQUMxRyxDQUFDO1lBQ0QsTUFBTSxDQUFDQSxNQUFNOztBQUVuQixDQUFDO2VBRWNELGFBQWE7O0FBR3JCLEtBQUssQ0FBQ1ksY0FBYyxJQUFJQyxJQUFxQixFQUFFQyxJQUF3QixPQUFzQkMsa0JBQUssUUFBQ2YsYUFBYSxJQUFJYSxJQUFJLEVBQUVDLElBQUk7O1FBQXhIRixjQUFjLEdBQWRBLGNBQWM7QUFFcEIsS0FBSyxDQUFDSSxPQUFPLE9BQWtCaEIsYUFBYSxPQUFPLENBQU07O1FBQW5EZ0IsT0FBTyxHQUFQQSxPQUFPIn0=