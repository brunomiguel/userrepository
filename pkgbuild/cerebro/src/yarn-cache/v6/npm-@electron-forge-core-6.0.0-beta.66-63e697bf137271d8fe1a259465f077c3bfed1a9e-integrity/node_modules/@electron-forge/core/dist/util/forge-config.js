"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setInitialForgeConfig = setInitialForgeConfig;
exports.fromBuildIdentifier = fromBuildIdentifier;
exports.forgeConfigIsValidFilePath = forgeConfigIsValidFilePath;
exports.renderConfigTemplate = renderConfigTemplate;
exports.default = void 0;
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _path = _interopRequireDefault(require("path"));
var _lodash = require("lodash");
var _readPackageJson = require("./read-package-json");
var _pluginInterface = _interopRequireDefault(require("./plugin-interface"));
var _hook = require("./hook");
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const underscoreCase = (str)=>str.replace(/(.)([A-Z][a-z]+)/g, '$1_$2').replace(/([a-z0-9])([A-Z])/g, '$1_$2').toUpperCase()
;
/* eslint-disable @typescript-eslint/no-explicit-any */ // eslint-disable-next-line arrow-parens
const proxify = (buildIdentifier, proxifiedObject, envPrefix)=>{
    let newObject = {};
    if (Array.isArray(proxifiedObject)) {
        newObject = [];
    }
    for (const [key, val] of Object.entries(proxifiedObject)){
        if (typeof val === 'object' && key !== 'pluginInterface' && !(val instanceof RegExp)) {
            newObject[key] = proxify(buildIdentifier, proxifiedObject[key], `${envPrefix}_${underscoreCase(key)}`);
        } else {
            newObject[key] = proxifiedObject[key];
        }
    }
    return new Proxy(newObject, {
        get (target, name, receiver) {
            // eslint-disable-next-line no-prototype-builtins
            if (!target.hasOwnProperty(name) && typeof name === 'string') {
                const envValue = process.env[`${envPrefix}_${underscoreCase(name)}`];
                if (envValue) return envValue;
            }
            const value = Reflect.get(target, name, receiver);
            // eslint-disable-next-line no-underscore-dangle
            if (value && typeof value === 'object' && value.__isMagicBuildIdentifierMap) {
                const identifier = typeof buildIdentifier === 'function' ? buildIdentifier() : buildIdentifier;
                return value.map[identifier];
            }
            return value;
        },
        getOwnPropertyDescriptor (target, name) {
            const envValue = process.env[`${envPrefix}_${underscoreCase(name)}`];
            // eslint-disable-next-line no-prototype-builtins
            if (target.hasOwnProperty(name)) {
                return Reflect.getOwnPropertyDescriptor(target, name);
            }
            if (envValue) {
                return {
                    writable: true,
                    enumerable: true,
                    configurable: true,
                    value: envValue
                };
            }
            return undefined;
        }
    });
};
function setInitialForgeConfig(packageJSON) {
    // eslint-disable-line @typescript-eslint/no-explicit-any
    const { name =''  } = packageJSON;
    packageJSON.config.forge.makers[0].config.name = name.replace(/-/g, '_');
}
function fromBuildIdentifier(map) {
    return {
        map,
        __isMagicBuildIdentifierMap: true
    };
}
async function forgeConfigIsValidFilePath(dir, forgeConfig) {
    return typeof forgeConfig === 'string' && (await _fsExtra.default.pathExists(_path.default.resolve(dir, forgeConfig)) || _fsExtra.default.pathExists(_path.default.resolve(dir, `${forgeConfig}.js`)));
}
function renderConfigTemplate(dir, templateObj, obj) {
    for (const [key, value] of Object.entries(obj)){
        if (typeof value === 'object' && value !== null) {
            renderConfigTemplate(dir, templateObj, value);
        } else if (typeof value === 'string') {
            obj[key] = (0, _lodash).template(value)(templateObj);
            if (obj[key].startsWith('require:')) {
                // eslint-disable-next-line global-require, import/no-dynamic-require
                obj[key] = require(_path.default.resolve(dir, obj[key].substr(8)));
            }
        }
    }
}
var _default = async (dir)=>{
    const packageJSON = await (0, _readPackageJson).readRawPackageJson(dir);
    let forgeConfig = packageJSON.config && packageJSON.config.forge ? packageJSON.config.forge : null;
    if (!forgeConfig) {
        if (await _fsExtra.default.pathExists(_path.default.resolve(dir, 'forge.config.js'))) {
            forgeConfig = 'forge.config.js';
        } else {
            forgeConfig = {};
        }
    }
    if (await forgeConfigIsValidFilePath(dir, forgeConfig)) {
        try {
            // eslint-disable-next-line @typescript-eslint/no-var-requires, global-require, import/no-dynamic-require
            forgeConfig = require(_path.default.resolve(dir, forgeConfig));
        } catch (err) {
            // eslint-disable-next-line no-console
            console.error(`Failed to load: ${_path.default.resolve(dir, forgeConfig)}`);
            throw err;
        }
    } else if (typeof forgeConfig !== 'object') {
        throw new Error('Expected packageJSON.config.forge to be an object or point to a requirable JS file');
    }
    const defaultForgeConfig = {
        electronRebuildConfig: {},
        packagerConfig: {},
        makers: [],
        publishers: [],
        plugins: []
    };
    forgeConfig = {
        ...defaultForgeConfig,
        ...forgeConfig
    };
    const templateObj = {
        ...packageJSON,
        year: new Date().getFullYear()
    };
    renderConfigTemplate(dir, templateObj, forgeConfig);
    forgeConfig.pluginInterface = new _pluginInterface.default(dir, forgeConfig);
    forgeConfig = await (0, _hook).runMutatingHook(forgeConfig, 'resolveForgeConfig', forgeConfig);
    return proxify(forgeConfig.buildIdentifier || '', forgeConfig, 'ELECTRON_FORGE');
};
exports.default = _default;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2ZvcmdlLWNvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGb3JnZUNvbmZpZywgSUZvcmdlUmVzb2x2YWJsZU1ha2VyIH0gZnJvbSAnQGVsZWN0cm9uLWZvcmdlL3NoYXJlZC10eXBlcyc7XG5pbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IHJlYWRSYXdQYWNrYWdlSnNvbiB9IGZyb20gJy4vcmVhZC1wYWNrYWdlLWpzb24nO1xuaW1wb3J0IFBsdWdpbkludGVyZmFjZSBmcm9tICcuL3BsdWdpbi1pbnRlcmZhY2UnO1xuaW1wb3J0IHsgcnVuTXV0YXRpbmdIb29rIH0gZnJvbSAnLi9ob29rJztcblxuY29uc3QgdW5kZXJzY29yZUNhc2UgPSAoc3RyOiBzdHJpbmcpID0+XG4gIHN0clxuICAgIC5yZXBsYWNlKC8oLikoW0EtWl1bYS16XSspL2csICckMV8kMicpXG4gICAgLnJlcGxhY2UoLyhbYS16MC05XSkoW0EtWl0pL2csICckMV8kMicpXG4gICAgLnRvVXBwZXJDYXNlKCk7XG5cbmV4cG9ydCB0eXBlIFBhY2thZ2VKU09ORm9ySW5pdGlhbEZvcmdlQ29uZmlnID0ge1xuICBuYW1lPzogc3RyaW5nO1xuICBjb25maWc6IHtcbiAgICBmb3JnZToge1xuICAgICAgbWFrZXJzOiBQaWNrPElGb3JnZVJlc29sdmFibGVNYWtlciwgJ25hbWUnIHwgJ2NvbmZpZyc+W107XG4gICAgfTtcbiAgfTtcbn07XG5cbi8vIFdoeTogbmVlZHMgYWNjZXNzIHRvIE9iamVjdCBtZXRob2RzIGFuZCBhbHNvIG5lZWRzIHRvIGJlIGFibGUgdG8gbWF0Y2ggYW55IGludGVyZmFjZS5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG50eXBlIFByb3hpZWRPYmplY3QgPSBvYmplY3Q7XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBhcnJvdy1wYXJlbnNcbmNvbnN0IHByb3hpZnkgPSA8VCBleHRlbmRzIFByb3hpZWRPYmplY3Q+KGJ1aWxkSWRlbnRpZmllcjogc3RyaW5nIHwgKCgpID0+IHN0cmluZyksIHByb3hpZmllZE9iamVjdDogVCwgZW52UHJlZml4OiBzdHJpbmcpOiBUID0+IHtcbiAgbGV0IG5ld09iamVjdDogVCA9IHt9IGFzIGFueTtcbiAgaWYgKEFycmF5LmlzQXJyYXkocHJveGlmaWVkT2JqZWN0KSkge1xuICAgIG5ld09iamVjdCA9IFtdIGFzIGFueTtcbiAgfVxuXG4gIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhwcm94aWZpZWRPYmplY3QpKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIGtleSAhPT0gJ3BsdWdpbkludGVyZmFjZScgJiYgISh2YWwgaW5zdGFuY2VvZiBSZWdFeHApKSB7XG4gICAgICAobmV3T2JqZWN0IGFzIGFueSlba2V5XSA9IHByb3hpZnkoYnVpbGRJZGVudGlmaWVyLCAocHJveGlmaWVkT2JqZWN0IGFzIGFueSlba2V5XSwgYCR7ZW52UHJlZml4fV8ke3VuZGVyc2NvcmVDYXNlKGtleSl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIChuZXdPYmplY3QgYXMgYW55KVtrZXldID0gKHByb3hpZmllZE9iamVjdCBhcyBhbnkpW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm94eTxUPihuZXdPYmplY3QsIHtcbiAgICBnZXQodGFyZ2V0LCBuYW1lLCByZWNlaXZlcikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICAgICAgaWYgKCF0YXJnZXQuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgdHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IGVudlZhbHVlID0gcHJvY2Vzcy5lbnZbYCR7ZW52UHJlZml4fV8ke3VuZGVyc2NvcmVDYXNlKG5hbWUpfWBdO1xuICAgICAgICBpZiAoZW52VmFsdWUpIHJldHVybiBlbnZWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZhbHVlID0gUmVmbGVjdC5nZXQodGFyZ2V0LCBuYW1lLCByZWNlaXZlcik7XG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlcnNjb3JlLWRhbmdsZVxuICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUuX19pc01hZ2ljQnVpbGRJZGVudGlmaWVyTWFwKSB7XG4gICAgICAgIGNvbnN0IGlkZW50aWZpZXIgPSB0eXBlb2YgYnVpbGRJZGVudGlmaWVyID09PSAnZnVuY3Rpb24nID8gYnVpbGRJZGVudGlmaWVyKCkgOiBidWlsZElkZW50aWZpZXI7XG4gICAgICAgIHJldHVybiB2YWx1ZS5tYXBbaWRlbnRpZmllcl07XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBuYW1lKSB7XG4gICAgICBjb25zdCBlbnZWYWx1ZSA9IHByb2Nlc3MuZW52W2Ake2VudlByZWZpeH1fJHt1bmRlcnNjb3JlQ2FzZShuYW1lIGFzIHN0cmluZyl9YF07XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIG5hbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW52VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICB2YWx1ZTogZW52VmFsdWUsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSk7XG59O1xuLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5cbi8qKlxuICogU2V0cyBzZW5zaWJsZSBkZWZhdWx0cyBmb3IgdGhlIGBjb25maWcuZm9yZ2VgIG9iamVjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEluaXRpYWxGb3JnZUNvbmZpZyhwYWNrYWdlSlNPTjogUGFja2FnZUpTT05Gb3JJbml0aWFsRm9yZ2VDb25maWcpOiB2b2lkIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIGNvbnN0IHsgbmFtZSA9ICcnIH0gPSBwYWNrYWdlSlNPTjtcblxuICAoKHBhY2thZ2VKU09OLmNvbmZpZy5mb3JnZSBhcyBGb3JnZUNvbmZpZykubWFrZXJzIGFzIElGb3JnZVJlc29sdmFibGVNYWtlcltdKVswXS5jb25maWcubmFtZSA9IG5hbWUucmVwbGFjZSgvLS9nLCAnXycpO1xufVxuXG5leHBvcnQgdHlwZSBCdWlsZElkZW50aWZpZXJNYXA8VD4gPSBSZWNvcmQ8c3RyaW5nLCBUIHwgdW5kZWZpbmVkPjtcbmV4cG9ydCB0eXBlIEJ1aWxkSWRlbnRpZmllckNvbmZpZzxUPiA9IHtcbiAgbWFwOiBCdWlsZElkZW50aWZpZXJNYXA8VD47XG4gIF9faXNNYWdpY0J1aWxkSWRlbnRpZmllck1hcDogdHJ1ZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQnVpbGRJZGVudGlmaWVyPFQ+KG1hcDogQnVpbGRJZGVudGlmaWVyTWFwPFQ+KTogQnVpbGRJZGVudGlmaWVyQ29uZmlnPFQ+IHtcbiAgcmV0dXJuIHtcbiAgICBtYXAsXG4gICAgX19pc01hZ2ljQnVpbGRJZGVudGlmaWVyTWFwOiB0cnVlLFxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZm9yZ2VDb25maWdJc1ZhbGlkRmlsZVBhdGgoZGlyOiBzdHJpbmcsIGZvcmdlQ29uZmlnOiBzdHJpbmcgfCBGb3JnZUNvbmZpZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gdHlwZW9mIGZvcmdlQ29uZmlnID09PSAnc3RyaW5nJyAmJiAoKGF3YWl0IGZzLnBhdGhFeGlzdHMocGF0aC5yZXNvbHZlKGRpciwgZm9yZ2VDb25maWcpKSkgfHwgZnMucGF0aEV4aXN0cyhwYXRoLnJlc29sdmUoZGlyLCBgJHtmb3JnZUNvbmZpZ30uanNgKSkpO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckNvbmZpZ1RlbXBsYXRlKGRpcjogc3RyaW5nLCB0ZW1wbGF0ZU9iajogYW55LCBvYmo6IGFueSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvYmopKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgIHJlbmRlckNvbmZpZ1RlbXBsYXRlKGRpciwgdGVtcGxhdGVPYmosIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9ialtrZXldID0gdGVtcGxhdGUodmFsdWUpKHRlbXBsYXRlT2JqKTtcbiAgICAgIGlmIChvYmpba2V5XS5zdGFydHNXaXRoKCdyZXF1aXJlOicpKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBnbG9iYWwtcmVxdWlyZSwgaW1wb3J0L25vLWR5bmFtaWMtcmVxdWlyZVxuICAgICAgICBvYmpba2V5XSA9IHJlcXVpcmUocGF0aC5yZXNvbHZlKGRpciwgb2JqW2tleV0uc3Vic3RyKDgpKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChkaXI6IHN0cmluZyk6IFByb21pc2U8Rm9yZ2VDb25maWc+ID0+IHtcbiAgY29uc3QgcGFja2FnZUpTT04gPSBhd2FpdCByZWFkUmF3UGFja2FnZUpzb24oZGlyKTtcbiAgbGV0IGZvcmdlQ29uZmlnOiBGb3JnZUNvbmZpZyB8IHN0cmluZyB8IG51bGwgPSBwYWNrYWdlSlNPTi5jb25maWcgJiYgcGFja2FnZUpTT04uY29uZmlnLmZvcmdlID8gcGFja2FnZUpTT04uY29uZmlnLmZvcmdlIDogbnVsbDtcblxuICBpZiAoIWZvcmdlQ29uZmlnKSB7XG4gICAgaWYgKGF3YWl0IGZzLnBhdGhFeGlzdHMocGF0aC5yZXNvbHZlKGRpciwgJ2ZvcmdlLmNvbmZpZy5qcycpKSkge1xuICAgICAgZm9yZ2VDb25maWcgPSAnZm9yZ2UuY29uZmlnLmpzJztcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yZ2VDb25maWcgPSB7fSBhcyBGb3JnZUNvbmZpZztcbiAgICB9XG4gIH1cblxuICBpZiAoYXdhaXQgZm9yZ2VDb25maWdJc1ZhbGlkRmlsZVBhdGgoZGlyLCBmb3JnZUNvbmZpZykpIHtcbiAgICB0cnkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXMsIGdsb2JhbC1yZXF1aXJlLCBpbXBvcnQvbm8tZHluYW1pYy1yZXF1aXJlXG4gICAgICBmb3JnZUNvbmZpZyA9IHJlcXVpcmUocGF0aC5yZXNvbHZlKGRpciwgZm9yZ2VDb25maWcgYXMgc3RyaW5nKSkgYXMgRm9yZ2VDb25maWc7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGxvYWQ6ICR7cGF0aC5yZXNvbHZlKGRpciwgZm9yZ2VDb25maWcgYXMgc3RyaW5nKX1gKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIGZvcmdlQ29uZmlnICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgcGFja2FnZUpTT04uY29uZmlnLmZvcmdlIHRvIGJlIGFuIG9iamVjdCBvciBwb2ludCB0byBhIHJlcXVpcmFibGUgSlMgZmlsZScpO1xuICB9XG4gIGNvbnN0IGRlZmF1bHRGb3JnZUNvbmZpZyA9IHtcbiAgICBlbGVjdHJvblJlYnVpbGRDb25maWc6IHt9LFxuICAgIHBhY2thZ2VyQ29uZmlnOiB7fSxcbiAgICBtYWtlcnM6IFtdLFxuICAgIHB1Ymxpc2hlcnM6IFtdLFxuICAgIHBsdWdpbnM6IFtdLFxuICB9O1xuICBmb3JnZUNvbmZpZyA9IHtcbiAgICAuLi5kZWZhdWx0Rm9yZ2VDb25maWcsXG4gICAgLi4uZm9yZ2VDb25maWcsXG4gIH07XG5cbiAgY29uc3QgdGVtcGxhdGVPYmogPSB7IC4uLnBhY2thZ2VKU09OLCB5ZWFyOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgfTtcbiAgcmVuZGVyQ29uZmlnVGVtcGxhdGUoZGlyLCB0ZW1wbGF0ZU9iaiwgZm9yZ2VDb25maWcpO1xuXG4gIGZvcmdlQ29uZmlnLnBsdWdpbkludGVyZmFjZSA9IG5ldyBQbHVnaW5JbnRlcmZhY2UoZGlyLCBmb3JnZUNvbmZpZyk7XG5cbiAgZm9yZ2VDb25maWcgPSBhd2FpdCBydW5NdXRhdGluZ0hvb2soZm9yZ2VDb25maWcsICdyZXNvbHZlRm9yZ2VDb25maWcnLCBmb3JnZUNvbmZpZyk7XG5cbiAgcmV0dXJuIHByb3hpZnk8Rm9yZ2VDb25maWc+KGZvcmdlQ29uZmlnLmJ1aWxkSWRlbnRpZmllciB8fCAnJywgZm9yZ2VDb25maWcsICdFTEVDVFJPTl9GT1JHRScpO1xufTtcbiJdLCJuYW1lcyI6WyJzZXRJbml0aWFsRm9yZ2VDb25maWciLCJmcm9tQnVpbGRJZGVudGlmaWVyIiwiZm9yZ2VDb25maWdJc1ZhbGlkRmlsZVBhdGgiLCJyZW5kZXJDb25maWdUZW1wbGF0ZSIsInVuZGVyc2NvcmVDYXNlIiwic3RyIiwicmVwbGFjZSIsInRvVXBwZXJDYXNlIiwicHJveGlmeSIsImJ1aWxkSWRlbnRpZmllciIsInByb3hpZmllZE9iamVjdCIsImVudlByZWZpeCIsIm5ld09iamVjdCIsIkFycmF5IiwiaXNBcnJheSIsImtleSIsInZhbCIsIk9iamVjdCIsImVudHJpZXMiLCJSZWdFeHAiLCJQcm94eSIsImdldCIsInRhcmdldCIsIm5hbWUiLCJyZWNlaXZlciIsImhhc093blByb3BlcnR5IiwiZW52VmFsdWUiLCJwcm9jZXNzIiwiZW52IiwidmFsdWUiLCJSZWZsZWN0IiwiX19pc01hZ2ljQnVpbGRJZGVudGlmaWVyTWFwIiwiaWRlbnRpZmllciIsIm1hcCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIndyaXRhYmxlIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsInVuZGVmaW5lZCIsInBhY2thZ2VKU09OIiwiY29uZmlnIiwiZm9yZ2UiLCJtYWtlcnMiLCJkaXIiLCJmb3JnZUNvbmZpZyIsImZzIiwicGF0aEV4aXN0cyIsInBhdGgiLCJyZXNvbHZlIiwidGVtcGxhdGVPYmoiLCJvYmoiLCJ0ZW1wbGF0ZSIsInN0YXJ0c1dpdGgiLCJyZXF1aXJlIiwic3Vic3RyIiwicmVhZFJhd1BhY2thZ2VKc29uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiRXJyb3IiLCJkZWZhdWx0Rm9yZ2VDb25maWciLCJlbGVjdHJvblJlYnVpbGRDb25maWciLCJwYWNrYWdlckNvbmZpZyIsInB1Ymxpc2hlcnMiLCJwbHVnaW5zIiwieWVhciIsIkRhdGUiLCJnZXRGdWxsWWVhciIsInBsdWdpbkludGVyZmFjZSIsIlBsdWdp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