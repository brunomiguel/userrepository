"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.siblingDep = siblingDep;
exports.default = exports.exactDevDeps = exports.devDeps = exports.deps = void 0;
var _asyncOra = require("@electron-forge/async-ora");
var _debug = _interopRequireDefault(require("debug"));
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _path = _interopRequireDefault(require("path"));
var _installDependencies = _interopRequireWildcard(require("../../util/install-dependencies"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _interopRequireWildcard(obj) {
    if (obj && obj.__esModule) {
        return obj;
    } else {
        var newObj = {};
        if (obj != null) {
            for(var key in obj){
                if (Object.prototype.hasOwnProperty.call(obj, key)) {
                    var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};
                    if (desc.get || desc.set) {
                        Object.defineProperty(newObj, key, desc);
                    } else {
                        newObj[key] = obj[key];
                    }
                }
            }
        }
        newObj.default = obj;
        return newObj;
    }
}
const d = (0, _debug).default('electron-forge:init:npm');
const corePackage = _fsExtra.default.readJsonSync(_path.default.resolve(__dirname, '../../../package.json'));
function siblingDep(name) {
    return `@electron-forge/${name}@^${corePackage.version}`;
}
const deps = [
    'electron-squirrel-startup'
];
exports.deps = deps;
const devDeps = [
    siblingDep('cli'),
    siblingDep('maker-squirrel'),
    siblingDep('maker-zip'),
    siblingDep('maker-deb'),
    siblingDep('maker-rpm')
];
exports.devDeps = devDeps;
const exactDevDeps = [
    'electron'
];
exports.exactDevDeps = exactDevDeps;
var _default = async (dir)=>{
    await (0, _asyncOra).asyncOra('Installing NPM Dependencies', async ()=>{
        d('installing dependencies');
        await (0, _installDependencies).default(dir, deps);
        d('installing devDependencies');
        await (0, _installDependencies).default(dir, devDeps, _installDependencies.DepType.DEV);
        d('installing exact devDependencies');
        for (const packageName of exactDevDeps){
            await (0, _installDependencies).default(dir, [
                packageName
            ], _installDependencies.DepType.DEV, _installDependencies.DepVersionRestriction.EXACT);
        }
    });
};
exports.default = _default;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcGkvaW5pdC1zY3JpcHRzL2luaXQtbnBtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzeW5jT3JhIH0gZnJvbSAnQGVsZWN0cm9uLWZvcmdlL2FzeW5jLW9yYSc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5pbXBvcnQgaW5zdGFsbERlcExpc3QsIHsgRGVwVHlwZSwgRGVwVmVyc2lvblJlc3RyaWN0aW9uIH0gZnJvbSAnLi4vLi4vdXRpbC9pbnN0YWxsLWRlcGVuZGVuY2llcyc7XG5cbmNvbnN0IGQgPSBkZWJ1ZygnZWxlY3Ryb24tZm9yZ2U6aW5pdDpucG0nKTtcbmNvbnN0IGNvcmVQYWNrYWdlID0gZnMucmVhZEpzb25TeW5jKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8uLi8uLi9wYWNrYWdlLmpzb24nKSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaWJsaW5nRGVwKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgQGVsZWN0cm9uLWZvcmdlLyR7bmFtZX1AXiR7Y29yZVBhY2thZ2UudmVyc2lvbn1gO1xufVxuXG5leHBvcnQgY29uc3QgZGVwcyA9IFsnZWxlY3Ryb24tc3F1aXJyZWwtc3RhcnR1cCddO1xuZXhwb3J0IGNvbnN0IGRldkRlcHMgPSBbc2libGluZ0RlcCgnY2xpJyksIHNpYmxpbmdEZXAoJ21ha2VyLXNxdWlycmVsJyksIHNpYmxpbmdEZXAoJ21ha2VyLXppcCcpLCBzaWJsaW5nRGVwKCdtYWtlci1kZWInKSwgc2libGluZ0RlcCgnbWFrZXItcnBtJyldO1xuZXhwb3J0IGNvbnN0IGV4YWN0RGV2RGVwcyA9IFsnZWxlY3Ryb24nXTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKGRpcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIGF3YWl0IGFzeW5jT3JhKCdJbnN0YWxsaW5nIE5QTSBEZXBlbmRlbmNpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgZCgnaW5zdGFsbGluZyBkZXBlbmRlbmNpZXMnKTtcbiAgICBhd2FpdCBpbnN0YWxsRGVwTGlzdChkaXIsIGRlcHMpO1xuXG4gICAgZCgnaW5zdGFsbGluZyBkZXZEZXBlbmRlbmNpZXMnKTtcbiAgICBhd2FpdCBpbnN0YWxsRGVwTGlzdChkaXIsIGRldkRlcHMsIERlcFR5cGUuREVWKTtcblxuICAgIGQoJ2luc3RhbGxpbmcgZXhhY3QgZGV2RGVwZW5kZW5jaWVzJyk7XG4gICAgZm9yIChjb25zdCBwYWNrYWdlTmFtZSBvZiBleGFjdERldkRlcHMpIHtcbiAgICAgIGF3YWl0IGluc3RhbGxEZXBMaXN0KGRpciwgW3BhY2thZ2VOYW1lXSwgRGVwVHlwZS5ERVYsIERlcFZlcnNpb25SZXN0cmljdGlvbi5FWEFDVCk7XG4gICAgfVxuICB9KTtcbn07XG4iXSwibmFtZXMiOlsic2libGluZ0RlcCIsImQiLCJkZWJ1ZyIsImNvcmVQYWNrYWdlIiwiZnMiLCJyZWFkSnNvblN5bmMiLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsIm5hbWUiLCJ2ZXJzaW9uIiwiZGVwcyIsImRldkRlcHMiLCJleGFjdERldkRlcHMiLCJkaXIiLCJhc3luY09yYSIsImluc3RhbGxEZXBMaXN0IiwiRGVwVHlwZSIsIkRFViIsInBhY2thZ2VOYW1lIiwiRGVwVmVyc2lvblJlc3RyaWN0aW9uIiwiRVhBQ1QiXSwibWFwcGluZ3MiOiI7Ozs7UUFVZ0JBLFVBQVUsR0FBVkEsVUFBVTs7QUFWRCxHQUEyQixDQUEzQixTQUEyQjtBQUNsQyxHQUFPLENBQVAsTUFBTztBQUNWLEdBQVUsQ0FBVixRQUFVO0FBQ1IsR0FBTSxDQUFOLEtBQU07QUFFd0MsR0FBaUMsQ0FBakMsb0JBQWlDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFaEcsS0FBSyxDQUFDQyxDQUFDLE9BQUdDLE1BQUssVUFBQyxDQUF5QjtBQUN6QyxLQUFLLENBQUNDLFdBQVcsR0FBR0MsUUFBRSxTQUFDQyxZQUFZLENBQUNDLEtBQUksU0FBQ0MsT0FBTyxDQUFDQyxTQUFTLEVBQUUsQ0FBdUI7U0FFbkVSLFVBQVUsQ0FBQ1MsSUFBWSxFQUFVLENBQUM7SUFDaEQsTUFBTSxFQUFFLGdCQUFnQixFQUFFQSxJQUFJLENBQUMsRUFBRSxFQUFFTixXQUFXLENBQUNPLE9BQU87QUFDeEQsQ0FBQztBQUVNLEtBQUssQ0FBQ0MsSUFBSSxHQUFHLENBQUM7SUFBQSxDQUEyQjtBQUFBLENBQUM7UUFBcENBLElBQUksR0FBSkEsSUFBSTtBQUNWLEtBQUssQ0FBQ0MsT0FBTyxHQUFHLENBQUNaO0lBQUFBLFVBQVUsQ0FBQyxDQUFLO0lBQUdBLFVBQVUsQ0FBQyxDQUFnQjtJQUFHQSxVQUFVLENBQUMsQ0FBVztJQUFHQSxVQUFVLENBQUMsQ0FBVztJQUFHQSxVQUFVLENBQUMsQ0FBVztBQUFDLENBQUM7UUFBdElZLE9BQU8sR0FBUEEsT0FBTztBQUNiLEtBQUssQ0FBQ0MsWUFBWSxHQUFHLENBQUM7SUFBQSxDQUFVO0FBQUEsQ0FBQztRQUEzQkEsWUFBWSxHQUFaQSxZQUFZO3NCQUVIQyxHQUFXLEdBQW9CLENBQUM7SUFDcEQsS0FBSyxLQUFDQyxTQUFRLFdBQUMsQ0FBNkIsd0NBQWMsQ0FBQztRQUN6RGQsQ0FBQyxDQUFDLENBQXlCO1FBQzNCLEtBQUssS0FBQ2Usb0JBQWMsVUFBQ0YsR0FBRyxFQUFFSCxJQUFJO1FBRTlCVixDQUFDLENBQUMsQ0FBNEI7UUFDOUIsS0FBSyxLQUFDZSxvQkFBYyxVQUFDRixHQUFHLEVBQUVGLE9BQU8sRUFBRUssb0JBQU8sU0FBQ0MsR0FBRztRQUU5Q2pCLENBQUMsQ0FBQyxDQUFrQztRQUNwQyxHQUFHLEVBQUUsS0FBSyxDQUFDa0IsV0FBVyxJQUFJTixZQUFZLENBQUUsQ0FBQztZQUN2QyxLQUFLLEtBQUNHLG9CQUFjLFVBQUNGLEdBQUcsRUFBRSxDQUFDSztnQkFBQUEsV0FBVztZQUFBLENBQUMsRUFBRUYsb0JBQU8sU0FBQ0MsR0FBRyxFQUFFRSxvQkFBcUIsdUJBQUNDLEtBQUs7UUFDbkYsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDIn0=