"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getElectronModulePath = getElectronModulePath;
exports.getElectronVersion = getElectronVersion;
exports.updateElectronDependency = updateElectronDependency;
var _debug = _interopRequireDefault(require("debug"));
var _findUp = _interopRequireDefault(require("find-up"));
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _path = _interopRequireDefault(require("path"));
var _semver = _interopRequireDefault(require("semver"));
var _yarnOrNpm = _interopRequireDefault(require("./yarn-or-npm"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const d = (0, _debug).default('electron-forge:electron-version');
const electronPackageNames = [
    'electron-prebuilt-compile',
    'electron-prebuilt',
    'electron-nightly',
    'electron'
];
function findElectronDep(dep) {
    return electronPackageNames.includes(dep);
}
async function findAncestorNodeModulesPath(dir, packageName) {
    d('Looking for a lock file to indicate the root of the repo');
    const lockPath = await (0, _findUp).default([
        'package-lock.json',
        'yarn.lock',
        'pnpm-lock.yaml'
    ], {
        cwd: dir,
        type: 'file'
    });
    if (lockPath) {
        d(`Found lock file: ${lockPath}`);
        const nodeModulesPath = _path.default.join(_path.default.dirname(lockPath), 'node_modules', packageName);
        if (await _fsExtra.default.pathExists(nodeModulesPath)) {
            return nodeModulesPath;
        }
    }
    return Promise.resolve(undefined);
}
async function determineNodeModulesPath(dir, packageName) {
    const nodeModulesPath = _path.default.join(dir, 'node_modules', packageName);
    if (await _fsExtra.default.pathExists(nodeModulesPath)) {
        return nodeModulesPath;
    }
    return findAncestorNodeModulesPath(dir, packageName);
}
class PackageNotFoundError extends Error {
    constructor(packageName, dir){
        super(`Cannot find the package "${packageName}". Perhaps you need to run "${(0, _yarnOrNpm).default()} install" in "${dir}"?`);
    }
}
exports.PackageNotFoundError = PackageNotFoundError;
function getElectronModuleName(packageJSON) {
    if (!packageJSON.devDependencies) {
        throw new Error('package.json for app does not have any devDependencies');
    }
    // Why: checked above
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    const packageName = electronPackageNames.find((pkg)=>packageJSON.devDependencies[pkg]
    );
    if (packageName === undefined) {
        throw new Error('Could not find any Electron packages in devDependencies');
    }
    return packageName;
}
async function getElectronPackageJSONPath(dir, packageName) {
    const nodeModulesPath = await determineNodeModulesPath(dir, packageName);
    if (!nodeModulesPath) {
        throw new PackageNotFoundError(packageName, dir);
    }
    const electronPackageJSONPath = _path.default.join(nodeModulesPath, 'package.json');
    if (await _fsExtra.default.pathExists(electronPackageJSONPath)) {
        return electronPackageJSONPath;
    }
    return undefined;
}
async function getElectronModulePath(dir, packageJSON) {
    const moduleName = getElectronModuleName(packageJSON);
    const packageJSONPath = await getElectronPackageJSONPath(dir, moduleName);
    if (packageJSONPath) {
        return _path.default.dirname(packageJSONPath);
    }
    return undefined;
}
async function getElectronVersion(dir, packageJSON) {
    const packageName = getElectronModuleName(packageJSON);
    // Why: checked in getElectronModuleName
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    let version = packageJSON.devDependencies[packageName];
    if (!_semver.default.valid(version)) {
        // It's not an exact version, find it in the actual module
        const electronPackageJSONPath = await getElectronPackageJSONPath(dir, packageName);
        if (electronPackageJSONPath) {
            const electronPackageJSON = await _fsExtra.default.readJson(electronPackageJSONPath);
            // eslint-disable-next-line prefer-destructuring
            version = electronPackageJSON.version;
        } else {
            throw new PackageNotFoundError(packageName, dir);
        }
    }
    return version;
}
function updateElectronDependency(packageJSON, dev, exact) {
    const alteredDev = [].concat(dev);
    let alteredExact = [].concat(exact);
    // Why: checked in getElectronModuleName
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    if (Object.keys(packageJSON.devDependencies).find(findElectronDep)) {
        alteredExact = alteredExact.filter((dep)=>dep !== 'electron'
        );
    } else if (packageJSON.dependencies) {
        const electronKey = Object.keys(packageJSON.dependencies).find(findElectronDep);
        if (electronKey) {
            alteredExact = alteredExact.filter((dep)=>dep !== 'electron'
            );
            d(`Moving ${electronKey} from dependencies to devDependencies`);
            alteredDev.push(`${electronKey}@${packageJSON.dependencies[electronKey]}`);
            delete packageJSON.dependencies[electronKey];
        }
    }
    return [
        alteredDev,
        alteredExact
    ];
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2VsZWN0cm9uLXZlcnNpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCBmaW5kVXAgZnJvbSAnZmluZC11cCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgc2VtdmVyIGZyb20gJ3NlbXZlcic7XG5pbXBvcnQgeWFybk9yTnBtIGZyb20gJy4veWFybi1vci1ucG0nO1xuXG5jb25zdCBkID0gZGVidWcoJ2VsZWN0cm9uLWZvcmdlOmVsZWN0cm9uLXZlcnNpb24nKTtcblxuY29uc3QgZWxlY3Ryb25QYWNrYWdlTmFtZXMgPSBbJ2VsZWN0cm9uLXByZWJ1aWx0LWNvbXBpbGUnLCAnZWxlY3Ryb24tcHJlYnVpbHQnLCAnZWxlY3Ryb24tbmlnaHRseScsICdlbGVjdHJvbiddO1xuXG50eXBlIFBhY2thZ2VKU09OV2l0aERlcHMgPSB7XG4gIGRldkRlcGVuZGVuY2llcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGRlcGVuZGVuY2llcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59O1xuXG5mdW5jdGlvbiBmaW5kRWxlY3Ryb25EZXAoZGVwOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIGVsZWN0cm9uUGFja2FnZU5hbWVzLmluY2x1ZGVzKGRlcCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZpbmRBbmNlc3Rvck5vZGVNb2R1bGVzUGF0aChkaXI6IHN0cmluZywgcGFja2FnZU5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPiB7XG4gIGQoJ0xvb2tpbmcgZm9yIGEgbG9jayBmaWxlIHRvIGluZGljYXRlIHRoZSByb290IG9mIHRoZSByZXBvJyk7XG4gIGNvbnN0IGxvY2tQYXRoID0gYXdhaXQgZmluZFVwKFsncGFja2FnZS1sb2NrLmpzb24nLCAneWFybi5sb2NrJywgJ3BucG0tbG9jay55YW1sJ10sIHsgY3dkOiBkaXIsIHR5cGU6ICdmaWxlJyB9KTtcbiAgaWYgKGxvY2tQYXRoKSB7XG4gICAgZChgRm91bmQgbG9jayBmaWxlOiAke2xvY2tQYXRofWApO1xuICAgIGNvbnN0IG5vZGVNb2R1bGVzUGF0aCA9IHBhdGguam9pbihwYXRoLmRpcm5hbWUobG9ja1BhdGgpLCAnbm9kZV9tb2R1bGVzJywgcGFja2FnZU5hbWUpO1xuICAgIGlmIChhd2FpdCBmcy5wYXRoRXhpc3RzKG5vZGVNb2R1bGVzUGF0aCkpIHtcbiAgICAgIHJldHVybiBub2RlTW9kdWxlc1BhdGg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBkZXRlcm1pbmVOb2RlTW9kdWxlc1BhdGgoZGlyOiBzdHJpbmcsIHBhY2thZ2VOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4ge1xuICBjb25zdCBub2RlTW9kdWxlc1BhdGg6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHBhdGguam9pbihkaXIsICdub2RlX21vZHVsZXMnLCBwYWNrYWdlTmFtZSk7XG4gIGlmIChhd2FpdCBmcy5wYXRoRXhpc3RzKG5vZGVNb2R1bGVzUGF0aCkpIHtcbiAgICByZXR1cm4gbm9kZU1vZHVsZXNQYXRoO1xuICB9XG4gIHJldHVybiBmaW5kQW5jZXN0b3JOb2RlTW9kdWxlc1BhdGgoZGlyLCBwYWNrYWdlTmFtZSk7XG59XG5cbmV4cG9ydCBjbGFzcyBQYWNrYWdlTm90Rm91bmRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IocGFja2FnZU5hbWU6IHN0cmluZywgZGlyOiBzdHJpbmcpIHtcbiAgICBzdXBlcihgQ2Fubm90IGZpbmQgdGhlIHBhY2thZ2UgXCIke3BhY2thZ2VOYW1lfVwiLiBQZXJoYXBzIHlvdSBuZWVkIHRvIHJ1biBcIiR7eWFybk9yTnBtKCl9IGluc3RhbGxcIiBpbiBcIiR7ZGlyfVwiP2ApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEVsZWN0cm9uTW9kdWxlTmFtZShwYWNrYWdlSlNPTjogUGFja2FnZUpTT05XaXRoRGVwcyk6IHN0cmluZyB7XG4gIGlmICghcGFja2FnZUpTT04uZGV2RGVwZW5kZW5jaWVzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwYWNrYWdlLmpzb24gZm9yIGFwcCBkb2VzIG5vdCBoYXZlIGFueSBkZXZEZXBlbmRlbmNpZXMnKTtcbiAgfVxuXG4gIC8vIFdoeTogY2hlY2tlZCBhYm92ZVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICBjb25zdCBwYWNrYWdlTmFtZSA9IGVsZWN0cm9uUGFja2FnZU5hbWVzLmZpbmQoKHBrZykgPT4gcGFja2FnZUpTT04uZGV2RGVwZW5kZW5jaWVzIVtwa2ddKTtcbiAgaWYgKHBhY2thZ2VOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGFueSBFbGVjdHJvbiBwYWNrYWdlcyBpbiBkZXZEZXBlbmRlbmNpZXMnKTtcbiAgfVxuXG4gIHJldHVybiBwYWNrYWdlTmFtZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0RWxlY3Ryb25QYWNrYWdlSlNPTlBhdGgoZGlyOiBzdHJpbmcsIHBhY2thZ2VOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4ge1xuICBjb25zdCBub2RlTW9kdWxlc1BhdGggPSBhd2FpdCBkZXRlcm1pbmVOb2RlTW9kdWxlc1BhdGgoZGlyLCBwYWNrYWdlTmFtZSk7XG4gIGlmICghbm9kZU1vZHVsZXNQYXRoKSB7XG4gICAgdGhyb3cgbmV3IFBhY2thZ2VOb3RGb3VuZEVycm9yKHBhY2thZ2VOYW1lLCBkaXIpO1xuICB9XG5cbiAgY29uc3QgZWxlY3Ryb25QYWNrYWdlSlNPTlBhdGggPSBwYXRoLmpvaW4obm9kZU1vZHVsZXNQYXRoLCAncGFja2FnZS5qc29uJyk7XG4gIGlmIChhd2FpdCBmcy5wYXRoRXhpc3RzKGVsZWN0cm9uUGFja2FnZUpTT05QYXRoKSkge1xuICAgIHJldHVybiBlbGVjdHJvblBhY2thZ2VKU09OUGF0aDtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbGVjdHJvbk1vZHVsZVBhdGgoZGlyOiBzdHJpbmcsIHBhY2thZ2VKU09OOiBQYWNrYWdlSlNPTldpdGhEZXBzKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHtcbiAgY29uc3QgbW9kdWxlTmFtZSA9IGdldEVsZWN0cm9uTW9kdWxlTmFtZShwYWNrYWdlSlNPTik7XG4gIGNvbnN0IHBhY2thZ2VKU09OUGF0aCA9IGF3YWl0IGdldEVsZWN0cm9uUGFja2FnZUpTT05QYXRoKGRpciwgbW9kdWxlTmFtZSk7XG4gIGlmIChwYWNrYWdlSlNPTlBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5kaXJuYW1lKHBhY2thZ2VKU09OUGF0aCk7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RWxlY3Ryb25WZXJzaW9uKGRpcjogc3RyaW5nLCBwYWNrYWdlSlNPTjogUGFja2FnZUpTT05XaXRoRGVwcyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHBhY2thZ2VOYW1lID0gZ2V0RWxlY3Ryb25Nb2R1bGVOYW1lKHBhY2thZ2VKU09OKTtcblxuICAvLyBXaHk6IGNoZWNrZWQgaW4gZ2V0RWxlY3Ryb25Nb2R1bGVOYW1lXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gIGxldCB2ZXJzaW9uID0gcGFja2FnZUpTT04uZGV2RGVwZW5kZW5jaWVzIVtwYWNrYWdlTmFtZV07XG4gIGlmICghc2VtdmVyLnZhbGlkKHZlcnNpb24pKSB7XG4gICAgLy8gSXQncyBub3QgYW4gZXhhY3QgdmVyc2lvbiwgZmluZCBpdCBpbiB0aGUgYWN0dWFsIG1vZHVsZVxuICAgIGNvbnN0IGVsZWN0cm9uUGFja2FnZUpTT05QYXRoID0gYXdhaXQgZ2V0RWxlY3Ryb25QYWNrYWdlSlNPTlBhdGgoZGlyLCBwYWNrYWdlTmFtZSk7XG4gICAgaWYgKGVsZWN0cm9uUGFja2FnZUpTT05QYXRoKSB7XG4gICAgICBjb25zdCBlbGVjdHJvblBhY2thZ2VKU09OID0gYXdhaXQgZnMucmVhZEpzb24oZWxlY3Ryb25QYWNrYWdlSlNPTlBhdGgpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICB2ZXJzaW9uID0gZWxlY3Ryb25QYWNrYWdlSlNPTi52ZXJzaW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgUGFja2FnZU5vdEZvdW5kRXJyb3IocGFja2FnZU5hbWUsIGRpcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZlcnNpb247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVFbGVjdHJvbkRlcGVuZGVuY3kocGFja2FnZUpTT046IFBhY2thZ2VKU09OV2l0aERlcHMsIGRldjogc3RyaW5nW10sIGV4YWN0OiBzdHJpbmdbXSk6IFtzdHJpbmdbXSwgc3RyaW5nW11dIHtcbiAgY29uc3QgYWx0ZXJlZERldiA9IChbXSBhcyBzdHJpbmdbXSkuY29uY2F0KGRldik7XG4gIGxldCBhbHRlcmVkRXhhY3QgPSAoW10gYXMgc3RyaW5nW10pLmNvbmNhdChleGFjdCk7XG4gIC8vIFdoeTogY2hlY2tlZCBpbiBnZXRFbGVjdHJvbk1vZHVsZU5hbWVcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgaWYgKE9iamVjdC5rZXlzKHBhY2thZ2VKU09OLmRldkRlcGVuZGVuY2llcyEpLmZpbmQoZmluZEVsZWN0cm9uRGVwKSkge1xuICAgIGFsdGVyZWRFeGFjdCA9IGFsdGVyZWRFeGFjdC5maWx0ZXIoKGRlcCkgPT4gZGVwICE9PSAnZWxlY3Ryb24nKTtcbiAgfSBlbHNlIGlmIChwYWNrYWdlSlNPTi5kZXBlbmRlbmNpZXMpIHtcbiAgICBjb25zdCBlbGVjdHJvbktleSA9IE9iamVjdC5rZXlzKHBhY2thZ2VKU09OLmRlcGVuZGVuY2llcykuZmluZChmaW5kRWxlY3Ryb25EZXApO1xuICAgIGlmIChlbGVjdHJvbktleSkge1xuICAgICAgYWx0ZXJlZEV4YWN0ID0gYWx0ZXJlZEV4YWN0LmZpbHRlcigoZGVwKSA9PiBkZXAgIT09ICdlbGVjdHJvbicpO1xuICAgICAgZChgTW92aW5nICR7ZWxlY3Ryb25LZXl9IGZyb20gZGVwZW5kZW5jaWVzIHRvIGRldkRlcGVuZGVuY2llc2ApO1xuICAgICAgYWx0ZXJlZERldi5wdXNoKGAke2VsZWN0cm9uS2V5fUAke3BhY2thZ2VKU09OLmRlcGVuZGVuY2llc1tlbGVjdHJvbktleV19YCk7XG4gICAgICBkZWxldGUgcGFja2FnZUpTT04uZGVwZW5kZW5jaWVzW2VsZWN0cm9uS2V5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gW2FsdGVyZWREZXYsIGFsdGVyZWRFeGFjdF07XG59XG4iXSwibmFtZXMiOlsiZ2V0RWxlY3Ryb25Nb2R1bGVQYXRoIiwiZ2V0RWxlY3Ryb25WZXJzaW9uIiwidXBkYXRlRWxlY3Ryb25EZXBlbmRlbmN5IiwiZCIsImRlYnVnIiwiZWxlY3Ryb25QYWNrYWdlTmFtZXMiLCJmaW5kRWxlY3Ryb25EZXAiLCJkZXAiLCJpbmNsdWRlcyIsImZpbmRBbmNlc3Rvck5vZGVNb2R1bGVzUGF0aCIsImRpciIsInBhY2thZ2VOYW1lIiwibG9ja1BhdGgiLCJmaW5kVXAiLCJjd2QiLCJ0eXBlIiwibm9kZU1vZHVsZXNQYXRoIiwicGF0aCIsImpvaW4iLCJkaXJuYW1lIiwiZnMiLCJwYXRoRXhpc3RzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1bmRlZmluZWQiLCJkZXRlcm1pbmVOb2RlTW9kdWxlc1BhdGgiLCJQYWNrYWdlTm90Rm91bmRFcnJvciIsIkVycm9yIiwieWFybk9yTnBtIiwiZ2V0RWxlY3Ryb25Nb2R1bGVOYW1lIiwicGFja2FnZUpTT04iLCJkZXZEZXBlbmRlbmNpZXMiLCJmaW5kIiwicGtnIiwiZ2V0RWxlY3Ryb25QYWNrYWdlSlNPTlBhdGgiLCJlbGVjdHJvblBhY2thZ2VKU09OUGF0aCIsIm1vZHVsZU5hbWUiLCJwYWNrYWdlSlNPTlBhdGgiLCJ2ZXJzaW9uIiwic2VtdmVyIiwidmFsaWQiLCJlbGVjdHJvblBhY2thZ2VKU09OIiwicmVhZEpzb24iLCJkZXYiLCJleGFjdCIsImFsdGVyZWREZXYiLCJjb25jYXQiLCJhbHRlcmVkRXhhY3QiLCJPYmplY3QiLCJrZXlzIiwiZmlsdGVyIiwiZGVwZW5kZW5jaWVzIiwiZWxlY3Ryb25LZXkiLCJwdXNoIl0sIm1hcHBpbmdzIjoiOzs7O1FBNkVzQkEscUJBQXFCLEdBQXJCQSxxQkFBcUI7UUFVckJDLGtCQUFrQixHQUFsQkEsa0JBQWtCO1FBcUJ4QkMsd0JBQXdCLEdBQXhCQSx3QkFBd0I7QUE1R3RCLEdBQU8sQ0FBUCxNQUFPO0FBQ04sR0FBUyxDQUFULE9BQVM7QUFDYixHQUFVLENBQVYsUUFBVTtBQUNSLEdBQU0sQ0FBTixLQUFNO0FBQ0osR0FBUSxDQUFSLE9BQVE7QUFDTCxHQUFlLENBQWYsVUFBZTs7Ozs7O0FBRXJDLEtBQUssQ0FBQ0MsQ0FBQyxPQUFHQyxNQUFLLFVBQUMsQ0FBaUM7QUFFakQsS0FBSyxDQUFDQyxvQkFBb0IsR0FBRyxDQUFDO0lBQUEsQ0FBMkI7SUFBRSxDQUFtQjtJQUFFLENBQWtCO0lBQUUsQ0FBVTtBQUFBLENBQUM7U0FPdEdDLGVBQWUsQ0FBQ0MsR0FBVyxFQUFXLENBQUM7SUFDOUMsTUFBTSxDQUFDRixvQkFBb0IsQ0FBQ0csUUFBUSxDQUFDRCxHQUFHO0FBQzFDLENBQUM7ZUFFY0UsMkJBQTJCLENBQUNDLEdBQVcsRUFBRUMsV0FBbUIsRUFBK0IsQ0FBQztJQUN6R1IsQ0FBQyxDQUFDLENBQTBEO0lBQzVELEtB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