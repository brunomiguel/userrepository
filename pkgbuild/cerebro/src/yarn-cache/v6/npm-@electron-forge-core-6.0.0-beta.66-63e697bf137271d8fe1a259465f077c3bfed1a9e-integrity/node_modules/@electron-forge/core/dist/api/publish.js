"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = void 0;
var _asyncOra = require("@electron-forge/async-ora");
var _chalk = _interopRequireDefault(require("chalk"));
var _debug = _interopRequireDefault(require("debug"));
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _path = _interopRequireDefault(require("path"));
var _forgeConfig = _interopRequireDefault(require("../util/forge-config"));
var _resolveDir = _interopRequireDefault(require("../util/resolve-dir"));
var _publishState = _interopRequireDefault(require("../util/publish-state"));
var _outDir = _interopRequireDefault(require("../util/out-dir"));
var _make = _interopRequireDefault(require("./make"));
var _requireSearch = _interopRequireDefault(require("../util/require-search"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const d = (0, _debug).default('electron-forge:publish');
const publish = async ({ dir =process.cwd() , interactive =false , makeOptions ={} , publishTargets =undefined , dryRun =false , dryRunResume =false , makeResults =undefined , outDir  })=>{
    _asyncOra.asyncOra.interactive = interactive;
    if (dryRun && dryRunResume) {
        throw new Error("Can't dry run and resume a dry run at the same time");
    }
    if (dryRunResume && makeResults) {
        throw new Error("Can't resume a dry run and use the provided makeResults at the same time");
    }
    const forgeConfig = await (0, _forgeConfig).default(dir);
    const calculatedOutDir = outDir || (0, _outDir).default(dir, forgeConfig);
    const dryRunDir = _path.default.resolve(calculatedOutDir, 'publish-dry-run');
    if (dryRunResume) {
        d('attempting to resume from dry run');
        const publishes = await _publishState.default.loadFromDirectory(dryRunDir, dir);
        for (const publishStates of publishes){
            d('publishing for given state set');
            await publish({
                dir,
                interactive,
                publishTargets,
                makeOptions,
                dryRun: false,
                dryRunResume: false,
                makeResults: publishStates.map(({ state  })=>state
                )
            });
        }
        return;
    }
    if (!makeResults) {
        d('triggering make');
        makeResults = await (0, _make).default({
            dir,
            interactive,
            ...makeOptions
        });
    } else {
        // Restore values from dry run
        d('restoring publish settings from dry run');
        for (const makeResult of makeResults){
            makeOptions.platform = makeResult.platform;
            makeOptions.arch = makeResult.arch;
            for (const makePath of makeResult.artifacts){
                if (!await _fsExtra.default.pathExists(makePath)) {
                    throw new Error(`Attempted to resume a dry run but an artifact (${makePath}) could not be found`);
                }
            }
        }
    }
    if (dryRun) {
        d('saving results of make in dry run state', makeResults);
        await _fsExtra.default.remove(dryRunDir);
        await _publishState.default.saveToDirectory(dryRunDir, makeResults, dir);
        return;
    }
    const resolvedDir = await (0, _resolveDir).default(dir);
    if (!resolvedDir) {
        throw new Error('Failed to locate publishable Electron application');
    }
    dir = resolvedDir;
    // const testPlatform = makeOptions.platform || process.platform as ForgePlatform;
    if (!publishTargets) {
        publishTargets = forgeConfig.publishers || [];
    // .filter(publisher => (typeof publisher !== 'string' && publisher.platforms)
    //   ? publisher.platforms.includes(testPlatform) : true);
    }
    publishTargets = publishTargets.map((target)=>{
        if (typeof target === 'string') {
            return (forgeConfig.publishers || []).find((p)=>{
                if (typeof p === 'string') return false;
                // eslint-disable-next-line no-underscore-dangle
                if (p.__isElectronForgePublisher) return false;
                return p.name === target;
            }) || {
                name: target
            };
        }
        return target;
    });
    for (const publishTarget of publishTargets){
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        let publisher;
        // eslint-disable-next-line no-underscore-dangle
        if (publishTarget.__isElectronForgePublisher) {
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            publisher = publishTarget;
        } else {
            const resolvablePublishTarget = publishTarget;
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            let PublisherClass;
            await (0, _asyncOra).asyncOra(`Resolving publish target: ${_chalk.default.cyan(resolvablePublishTarget.name)}`, async ()=>{
                // eslint-disable-line no-loop-func
                PublisherClass = (0, _requireSearch).default(dir, [
                    resolvablePublishTarget.name
                ]);
                if (!PublisherClass) {
                    throw new Error(`Could not find a publish target with the name: ${resolvablePublishTarget.name}. Make sure it's listed in the devDependencies of your package.json`);
                }
            });
            publisher = new PublisherClass(resolvablePublishTarget.config || {}, resolvablePublishTarget.platforms);
        }
        await publisher.publish({
            dir,
            makeResults,
            forgeConfig
        });
    }
};
var _default = publish;
exports.default = _default;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcGkvcHVibGlzaC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3luY09yYSB9IGZyb20gJ0BlbGVjdHJvbi1mb3JnZS9hc3luYy1vcmEnO1xuaW1wb3J0IHtcbiAgSUZvcmdlUmVzb2x2YWJsZVB1Ymxpc2hlcixcbiAgSUZvcmdlUHVibGlzaGVyLFxuICBGb3JnZUNvbmZpZ1B1Ymxpc2hlcixcbiAgRm9yZ2VNYWtlUmVzdWx0LFxuICAvLyBGb3JnZVBsYXRmb3JtLFxufSBmcm9tICdAZWxlY3Ryb24tZm9yZ2Uvc2hhcmVkLXR5cGVzJztcbmltcG9ydCBQdWJsaXNoZXJCYXNlIGZyb20gJ0BlbGVjdHJvbi1mb3JnZS9wdWJsaXNoZXItYmFzZSc7XG5cbmltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5pbXBvcnQgZ2V0Rm9yZ2VDb25maWcgZnJvbSAnLi4vdXRpbC9mb3JnZS1jb25maWcnO1xuaW1wb3J0IHJlc29sdmVEaXIgZnJvbSAnLi4vdXRpbC9yZXNvbHZlLWRpcic7XG5pbXBvcnQgUHVibGlzaFN0YXRlIGZyb20gJy4uL3V0aWwvcHVibGlzaC1zdGF0ZSc7XG5pbXBvcnQgZ2V0Q3VycmVudE91dERpciBmcm9tICcuLi91dGlsL291dC1kaXInO1xuXG5pbXBvcnQgbWFrZSwgeyBNYWtlT3B0aW9ucyB9IGZyb20gJy4vbWFrZSc7XG5pbXBvcnQgcmVxdWlyZVNlYXJjaCBmcm9tICcuLi91dGlsL3JlcXVpcmUtc2VhcmNoJztcblxuY29uc3QgZCA9IGRlYnVnKCdlbGVjdHJvbi1mb3JnZTpwdWJsaXNoJyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHVibGlzaE9wdGlvbnMge1xuICAvKipcbiAgICogVGhlIHBhdGggdG8gdGhlIGFwcCB0byBiZSBwdWJsaXNoZWRcbiAgICovXG4gIGRpcj86IHN0cmluZztcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gdXNlIHNlbnNpYmxlIGRlZmF1bHRzIG9yIHByb21wdCB0aGUgdXNlciB2aXN1YWxseVxuICAgKi9cbiAgaW50ZXJhY3RpdmU/OiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIHB1Ymxpc2ggdGFyZ2V0cywgYnkgZGVmYXVsdCBwdWxsZWQgZnJvbSBmb3JnZSBjb25maWcsIHNldCB0aGlzIHByb3AgdG9cbiAgICogb3ZlcnJpZGUgdGhhdCBsaXN0XG4gICAqL1xuICBwdWJsaXNoVGFyZ2V0cz86IEZvcmdlQ29uZmlnUHVibGlzaGVyW107XG4gIC8qKlxuICAgKiBPcHRpb25zIG9iamVjdCB0byBwYXNzZWQgdGhyb3VnaCB0byBtYWtlKClcbiAgICovXG4gIG1ha2VPcHRpb25zPzogTWFrZU9wdGlvbnM7XG4gIC8qKlxuICAgKiBUaGUgcGF0aCB0byB0aGUgZGlyZWN0b3J5IGNvbnRhaW5pbmcgZ2VuZXJhdGVkIGRpc3RyaWJ1dGFibGVzXG4gICAqL1xuICBvdXREaXI/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGdlbmVyYXRlIGRyeSBydW4gbWV0YSBkYXRhIGJ1dCBub3QgYWN0dWFsbHkgcHVibGlzaFxuICAgKi9cbiAgZHJ5UnVuPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRvIGF0dGVtcHQgdG8gcmVzdW1lIGEgcHJldmlvdXNseSBzYXZlZCBgZHJ5UnVuYCBhbmQgcHVibGlzaFxuICAgKlxuICAgKiBZb3UgY2FuJ3QgdXNlIHRoaXMgY29tYmluYXRpb24gYXQgdGhlIHNhbWUgdGltZSBhcyBkcnlSdW49dHJ1ZVxuICAgKi9cbiAgZHJ5UnVuUmVzdW1lPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFByb3ZpZGUgcmVzdWx0cyBmcm9tIG1ha2Ugc28gdGhhdCB0aGUgcHVibGlzaCBzdGVwIGRvZXNuJ3QgcnVuIG1ha2UgaXRzZWxmXG4gICAqL1xuICBtYWtlUmVzdWx0cz86IEZvcmdlTWFrZVJlc3VsdFtdO1xufVxuXG5jb25zdCBwdWJsaXNoID0gYXN5bmMgKHtcbiAgZGlyID0gcHJvY2Vzcy5jd2QoKSxcbiAgaW50ZXJhY3RpdmUgPSBmYWxzZSxcbiAgbWFrZU9wdGlvbnMgPSB7fSxcbiAgcHVibGlzaFRhcmdldHMgPSB1bmRlZmluZWQsXG4gIGRyeVJ1biA9IGZhbHNlLFxuICBkcnlSdW5SZXN1bWUgPSBmYWxzZSxcbiAgbWFrZVJlc3VsdHMgPSB1bmRlZmluZWQsXG4gIG91dERpcixcbn06IFB1Ymxpc2hPcHRpb25zKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIGFzeW5jT3JhLmludGVyYWN0aXZlID0gaW50ZXJhY3RpdmU7XG5cbiAgaWYgKGRyeVJ1biAmJiBkcnlSdW5SZXN1bWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBkcnkgcnVuIGFuZCByZXN1bWUgYSBkcnkgcnVuIGF0IHRoZSBzYW1lIHRpbWVcIik7XG4gIH1cbiAgaWYgKGRyeVJ1blJlc3VtZSAmJiBtYWtlUmVzdWx0cykge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IHJlc3VtZSBhIGRyeSBydW4gYW5kIHVzZSB0aGUgcHJvdmlkZWQgbWFrZVJlc3VsdHMgYXQgdGhlIHNhbWUgdGltZVwiKTtcbiAgfVxuXG4gIGNvbnN0IGZvcmdlQ29uZmlnID0gYXdhaXQgZ2V0Rm9yZ2VDb25maWcoZGlyKTtcblxuICBjb25zdCBjYWxjdWxhdGVkT3V0RGlyID0gb3V0RGlyIHx8IGdldEN1cnJlbnRPdXREaXIoZGlyLCBmb3JnZUNvbmZpZyk7XG4gIGNvbnN0IGRyeVJ1bkRpciA9IHBhdGgucmVzb2x2ZShjYWxjdWxhdGVkT3V0RGlyLCAncHVibGlzaC1kcnktcnVuJyk7XG5cbiAgaWYgKGRyeVJ1blJlc3VtZSkge1xuICAgIGQoJ2F0dGVtcHRpbmcgdG8gcmVzdW1lIGZyb20gZHJ5IHJ1bicpO1xuICAgIGNvbnN0IHB1Ymxpc2hlcyA9IGF3YWl0IFB1Ymxpc2hTdGF0ZS5sb2FkRnJvbURpcmVjdG9yeShkcnlSdW5EaXIsIGRpcik7XG4gICAgZm9yIChjb25zdCBwdWJsaXNoU3RhdGVzIG9mIHB1Ymxpc2hlcykge1xuICAgICAgZCgncHVibGlzaGluZyBmb3IgZ2l2ZW4gc3RhdGUgc2V0Jyk7XG4gICAgICBhd2FpdCBwdWJsaXNoKHtcbiAgICAgICAgZGlyLFxuICAgICAgICBpbnRlcmFjdGl2ZSxcbiAgICAgICAgcHVibGlzaFRhcmdldHMsXG4gICAgICAgIG1ha2VPcHRpb25zLFxuICAgICAgICBkcnlSdW46IGZhbHNlLFxuICAgICAgICBkcnlSdW5SZXN1bWU6IGZhbHNlLFxuICAgICAgICBtYWtlUmVzdWx0czogcHVibGlzaFN0YXRlcy5tYXAoKHsgc3RhdGUgfSkgPT4gc3RhdGUpLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghbWFrZVJlc3VsdHMpIHtcbiAgICBkKCd0cmlnZ2VyaW5nIG1ha2UnKTtcbiAgICBtYWtlUmVzdWx0cyA9IGF3YWl0IG1ha2Uoe1xuICAgICAgZGlyLFxuICAgICAgaW50ZXJhY3RpdmUsXG4gICAgICAuLi5tYWtlT3B0aW9ucyxcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBSZXN0b3JlIHZhbHVlcyBmcm9tIGRyeSBydW5cbiAgICBkKCdyZXN0b3JpbmcgcHVibGlzaCBzZXR0aW5ncyBmcm9tIGRyeSBydW4nKTtcblxuICAgIGZvciAoY29uc3QgbWFrZVJlc3VsdCBvZiBtYWtlUmVzdWx0cykge1xuICAgICAgbWFrZU9wdGlvbnMucGxhdGZvcm0gPSBtYWtlUmVzdWx0LnBsYXRmb3JtO1xuICAgICAgbWFrZU9wdGlvbnMuYXJjaCA9IG1ha2VSZXN1bHQuYXJjaDtcblxuICAgICAgZm9yIChjb25zdCBtYWtlUGF0aCBvZiBtYWtlUmVzdWx0LmFydGlmYWN0cykge1xuICAgICAgICBpZiAoIShhd2FpdCBmcy5wYXRoRXhpc3RzKG1ha2VQYXRoKSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byByZXN1bWUgYSBkcnkgcnVuIGJ1dCBhbiBhcnRpZmFjdCAoJHttYWtlUGF0aH0pIGNvdWxkIG5vdCBiZSBmb3VuZGApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGRyeVJ1bikge1xuICAgIGQoJ3NhdmluZyByZXN1bHRzIG9mIG1ha2UgaW4gZHJ5IHJ1biBzdGF0ZScsIG1ha2VSZXN1bHRzKTtcbiAgICBhd2FpdCBmcy5yZW1vdmUoZHJ5UnVuRGlyKTtcbiAgICBhd2FpdCBQdWJsaXNoU3RhdGUuc2F2ZVRvRGlyZWN0b3J5KGRyeVJ1bkRpciwgbWFrZVJlc3VsdHMsIGRpcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgcmVzb2x2ZWREaXIgPSBhd2FpdCByZXNvbHZlRGlyKGRpcik7XG4gIGlmICghcmVzb2x2ZWREaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2NhdGUgcHVibGlzaGFibGUgRWxlY3Ryb24gYXBwbGljYXRpb24nKTtcbiAgfVxuICBkaXIgPSByZXNvbHZlZERpcjtcblxuICAvLyBjb25zdCB0ZXN0UGxhdGZvcm0gPSBtYWtlT3B0aW9ucy5wbGF0Zm9ybSB8fCBwcm9jZXNzLnBsYXRmb3JtIGFzIEZvcmdlUGxhdGZvcm07XG4gIGlmICghcHVibGlzaFRhcmdldHMpIHtcbiAgICBwdWJsaXNoVGFyZ2V0cyA9IGZvcmdlQ29uZmlnLnB1Ymxpc2hlcnMgfHwgW107XG4gICAgLy8gLmZpbHRlcihwdWJsaXNoZXIgPT4gKHR5cGVvZiBwdWJsaXNoZXIgIT09ICdzdHJpbmcnICYmIHB1Ymxpc2hlci5wbGF0Zm9ybXMpXG4gICAgLy8gICA/IHB1Ymxpc2hlci5wbGF0Zm9ybXMuaW5jbHVkZXModGVzdFBsYXRmb3JtKSA6IHRydWUpO1xuICB9XG4gIHB1Ymxpc2hUYXJnZXRzID0gKHB1Ymxpc2hUYXJnZXRzIGFzIEZvcmdlQ29uZmlnUHVibGlzaGVyW10pLm1hcCgodGFyZ2V0KSA9PiB7XG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAoZm9yZ2VDb25maWcucHVibGlzaGVycyB8fCBbXSkuZmluZCgocDogRm9yZ2VDb25maWdQdWJsaXNoZXIpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIHAgPT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlXG4gICAgICAgICAgaWYgKChwIGFzIElGb3JnZVB1Ymxpc2hlcikuX19pc0VsZWN0cm9uRm9yZ2VQdWJsaXNoZXIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gKHAgYXMgSUZvcmdlUmVzb2x2YWJsZVB1Ymxpc2hlcikubmFtZSA9PT0gdGFyZ2V0O1xuICAgICAgICB9KSB8fCB7IG5hbWU6IHRhcmdldCB9XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9KTtcblxuICBmb3IgKGNvbnN0IHB1Ymxpc2hUYXJnZXQgb2YgcHVibGlzaFRhcmdldHMpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGxldCBwdWJsaXNoZXI6IFB1Ymxpc2hlckJhc2U8YW55PjtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZXJzY29yZS1kYW5nbGVcbiAgICBpZiAoKHB1Ymxpc2hUYXJnZXQgYXMgSUZvcmdlUHVibGlzaGVyKS5fX2lzRWxlY3Ryb25Gb3JnZVB1Ymxpc2hlcikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgIHB1Ymxpc2hlciA9IHB1Ymxpc2hUYXJnZXQgYXMgUHVibGlzaGVyQmFzZTxhbnk+O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXNvbHZhYmxlUHVibGlzaFRhcmdldCA9IHB1Ymxpc2hUYXJnZXQgYXMgSUZvcmdlUmVzb2x2YWJsZVB1Ymxpc2hlcjtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICBsZXQgUHVibGlzaGVyQ2xhc3M6IGFueTtcbiAgICAgIGF3YWl0IGFzeW5jT3JhKGBSZXNvbHZpbmcgcHVibGlzaCB0YXJnZXQ6ICR7Y2hhbGsuY3lhbihyZXNvbHZhYmxlUHVibGlzaFRhcmdldC5uYW1lKX1gLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9vcC1mdW5jXG4gICAgICAgIFB1Ymxpc2hlckNsYXNzID0gcmVxdWlyZVNlYXJjaChkaXIsIFtyZXNvbHZhYmxlUHVibGlzaFRhcmdldC5uYW1lXSk7XG4gICAgICAgIGlmICghUHVibGlzaGVyQ2xhc3MpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgQ291bGQgbm90IGZpbmQgYSBwdWJsaXNoIHRhcmdldCB3aXRoIHRoZSBuYW1lOiAke3Jlc29sdmFibGVQdWJsaXNoVGFyZ2V0Lm5hbWV9LiBNYWtlIHN1cmUgaXQncyBsaXN0ZWQgaW4gdGhlIGRldkRlcGVuZGVuY2llcyBvZiB5b3VyIHBhY2thZ2UuanNvbmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcHVibGlzaGVyID0gbmV3IFB1Ymxpc2hlckNsYXNzKHJlc29sdmFibGVQdWJsaXNoVGFyZ2V0LmNvbmZpZyB8fCB7fSwgcmVzb2x2YWJsZVB1Ymxpc2hUYXJnZXQucGxhdGZvcm1zKTtcbiAgICB9XG5cbiAgICBhd2FpdCBwdWJsaXNoZXIucHVibGlzaCh7XG4gICAgICBkaXIsXG4gICAgICBtYWtlUmVzdWx0cyxcbiAgICAgIGZvcmdlQ29uZmlnLFxuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBwdWJsaXNoO1xuIl0sIm5hbWVzIjpbImQiLCJkZWJ1ZyIsInB1Ymxpc2giLCJkaXIiLCJwcm9jZXNzIiwiY3dkIiwiaW50ZXJhY3RpdmUiLCJtYWtlT3B0aW9ucyIsInB1Ymxpc2hUYXJnZXRzIiwidW5kZWZpbmVkIiwiZHJ5UnVuIiwiZHJ5UnVuUmVzdW1lIiwibWFrZVJlc3VsdHMiLCJvdXREaXIiLCJhc3luY09yYSIsIkVycm9yIiwiZm9yZ2VDb25maWciLCJnZXRGb3JnZUNvbmZpZyIsImNhbGN1bGF0ZWRPdXREaXIiLCJnZXRDdXJyZW50T3V0RGlyIiwiZHJ5UnVuRGlyIiwicGF0aCIsInJlc29sdmUiLCJwdWJsaXNoZXMiLCJQdWJsaXNoU3RhdGUiLCJsb2FkRnJvbURpcmVjdG9yeSIsInB1Ymxpc2hTdGF0ZXMiLCJtYXAiLCJzdGF0ZSIsIm1ha2UiLCJtYWtlUmVzdWx0IiwicGxhdGZvcm0iLCJhcmNoIiwibWFrZVBhdGgiLCJhcnRpZmFjdHMiLCJmcyIsInBhdGhFeGlzdHMiLCJyZW1vdmUiLCJzYXZlVG9EaXJlY3RvcnkiLCJyZXNvbHZlZERpciIsInJlc29sdmVEaXIiLCJwdWJsaXNoZXJzIiwidGFyZ2V0IiwiZmluZCIsInAiLCJfX2lzRWxlY3Ryb25Gb3JnZVB1Ymxpc2hlciIsIm5hbWUiLCJwdWJsaXNoVGFyZ2V0IiwicHVibGlzaGVyIiwicmVzb2x2YWJsZVB1Ymxpc2hUYXJnZXQiLCJQdWJsaXNoZXJDbGFzcyIsImNoYWxrIiwiY3lhbiIsInJlcXVpcmVTZWFyY2giLCJjb25maWciLCJwbGF0Zm9ybXMiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQXlCLEdBQTJCLENBQTNCLFNBQTJCO0FBVWxDLEdBQU8sQ0FBUCxNQUFPO0FBQ1AsR0FBTyxDQUFQLE1BQU87QUFDVixHQUFVLENBQVYsUUFBVTtBQUNSLEdBQU0sQ0FBTixLQUFNO0FBRUksR0FBc0IsQ0FBdEIsWUFBc0I7QUFDMUIsR0FBcUIsQ0FBckIsV0FBcUI7QUFDbkIsR0FBdUIsQ0FBdkIsYUFBdUI7QUFDbkIsR0FBaUIsQ0FBakIsT0FBaUI7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