"use strict";var e=require("@virtuoso.dev/react-urx"),t=require("@virtuoso.dev/urx"),n=require("react"),o=require("react-dom");function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var i=r(t),a=r(n);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t.indexOf(n=i[o])>=0||(r[n]=e[n]);return r}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var m,d,f="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;exports.LogLevel=void 0,(d=exports.LogLevel||(exports.LogLevel={}))[d.DEBUG=0]="DEBUG",d[d.INFO=1]="INFO",d[d.WARN=2]="WARN",d[d.ERROR=3]="ERROR";var p=((m={})[exports.LogLevel.DEBUG]="debug",m[exports.LogLevel.INFO]="log",m[exports.LogLevel.WARN]="warn",m[exports.LogLevel.ERROR]="error",m),h=i.system(function(){var e=i.statefulStream(exports.LogLevel.ERROR);return{log:i.statefulStream(function(t,n,o){var r;void 0===o&&(o=exports.LogLevel.INFO),o>=(null!=(r=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?r:i.getValue(e))&&console[p[o]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)}),logLevel:e}},[],{singleton:!0});function g(e,t){void 0===t&&(t=!0);var o=n.useRef(null),r=function(e){};if("undefined"!=typeof ResizeObserver){var i=new ResizeObserver(function(t){var n=t[0].target;null!==n.offsetParent&&e(n)});r=function(e){e&&t?(i.observe(e),o.current=e):(o.current&&i.unobserve(o.current),o.current=null)}}return{ref:o,callbackRef:r}}function v(e,t){return void 0===t&&(t=!0),g(e,t).callbackRef}function S(e,t,n,o,r,i,a){return g(function(n){for(var l=function(e,t,n,o){var r=e.length;if(0===r)return null;for(var i=[],a=0;a<r;a++){var l=e.item(a);if(l&&void 0!==l.dataset.index){var s=parseInt(l.dataset.index),u=parseFloat(l.dataset.knownSize),c=t(l,"offsetHeight");if(0===c&&o("Zero-sized element, this should not happen",{child:l},exports.LogLevel.ERROR),c!==u){var m=i[i.length-1];0===i.length||m.size!==c||m.endIndex!==s-1?i.push({startIndex:s,endIndex:s,size:c}):i[i.length-1].endIndex++}}}return i}(n.children,t,0,r),s=n.parentElement;!s.dataset.virtuosoScroller;)s=s.parentElement;var u="window"===s.firstElementChild.dataset.viewportType,c=a?a.scrollTop:u?window.pageYOffset||document.documentElement.scrollTop:s.scrollTop,m=a?a.scrollHeight:u?document.documentElement.scrollHeight:s.scrollHeight,d=a?a.offsetHeight:u?window.innerHeight:s.offsetHeight;o({scrollTop:Math.max(c,0),scrollHeight:m,viewportHeight:d}),null==i||i(function(e,t,n){return"normal"===t||null!=t&&t.endsWith("px")||n("row-gap was not resolved to pixel value correctly",t,exports.LogLevel.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}(0,getComputedStyle(n).rowGap,r)),null!==l&&e(l)},n)}function C(e,t){return Math.round(e.getBoundingClientRect()[t])}function x(e,t){return Math.abs(e-t)<1.01}function I(e,t,r,a,l){void 0===a&&(a=i.noop);var s=n.useRef(null),u=n.useRef(null),c=n.useRef(null),m=n.useRef(!1),d=n.useCallback(function(n){var r=n.target,i=r===window||r===document,a=i?window.pageYOffset||document.documentElement.scrollTop:r.scrollTop,l=i?document.documentElement.scrollHeight:r.scrollHeight,s=i?window.innerHeight:r.offsetHeight,d=function(){e({scrollTop:Math.max(a,0),scrollHeight:l,viewportHeight:s})};m.current?o.flushSync(d):d(),m.current=!1,null!==u.current&&(a===u.current||a<=0||a===l-s)&&(u.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t]);return n.useEffect(function(){var e=l||s.current;return a(l||s.current),d({target:e}),e.addEventListener("scroll",d,{passive:!0}),function(){a(null),e.removeEventListener("scroll",d)}},[s,d,r,a,l]),{scrollerRef:s,scrollByCallback:function(e){m.current=!0,s.current.scrollBy(e)},scrollToCallback:function(n){var o=s.current;if(o&&(!("offsetHeight"in o)||0!==o.offsetHeight)){var r,i,a,l="smooth"===n.behavior;if(o===window?(i=Math.max(C(document.documentElement,"height"),document.documentElement.scrollHeight),r=window.innerHeight,a=document.documentElement.scrollTop):(i=o.scrollHeight,r=C(o,"height"),a=o.scrollTop),n.top=Math.ceil(Math.max(Math.min(i-r,n.top),0)),x(r,i)||n.top===a)return e({scrollTop:a,scrollHeight:i,viewportHeight:r}),void(l&&t(!0));l?(u.current=n.top,c.current&&clearTimeout(c.current),c.current=setTimeout(function(){c.current=null,u.current=null,t(!0)},1e3)):u.current=null,o.scrollTo(n)}}}}var T=i.system(function(){var e=i.stream(),t=i.stream(),n=i.statefulStream(0),o=i.stream(),r=i.statefulStream(0),a=i.stream(),l=i.stream(),s=i.statefulStream(0),u=i.statefulStream(0),c=i.statefulStream(0),m=i.statefulStream(0),d=i.stream(),f=i.stream(),p=i.statefulStream(!1),h=i.statefulStream(!1);return i.connect(i.pipe(e,i.map(function(e){return e.scrollTop})),t),i.connect(i.pipe(e,i.map(function(e){return e.scrollHeight})),l),i.connect(t,r),{scrollContainerState:e,scrollTop:t,viewportHeight:a,headerHeight:s,fixedHeaderHeight:u,fixedFooterHeight:c,footerHeight:m,scrollHeight:l,smoothScrollTargetReached:o,react18ConcurrentRendering:h,scrollTo:d,scrollBy:f,statefulScrollTop:r,deviation:n,scrollingInProgress:p}},[],{singleton:!0}),w={lvl:0};function b(e,t,n,o,r){return void 0===o&&(o=w),void 0===r&&(r=w),{k:e,v:t,lvl:n,l:o,r:r}}function y(e){return e===w}function E(){return w}function H(e,t){if(y(e))return w;var n=e.k,o=e.l,r=e.r;if(t===n){if(y(o))return r;if(y(r))return o;var i=z(o);return V(P(e,{k:i[0],v:i[1],l:B(o)}))}return V(P(e,t<n?{l:H(o,t)}:{r:H(r,t)}))}function L(e,t,n){if(void 0===n&&(n="k"),y(e))return[-Infinity,void 0];if(e[n]===t)return[e.k,e.v];if(e[n]<t){var o=L(e.r,t,n);return-Infinity===o[0]?[e.k,e.v]:o}return L(e.l,t,n)}function R(e,t,n){return y(e)?b(t,n,1):t===e.k?P(e,{k:t,v:n}):function(e){return U(A(e))}(P(e,t<e.k?{l:R(e.l,t,n)}:{r:R(e.r,t,n)}))}function F(e,t,n){if(y(e))return[];var o=e.k,r=e.v,i=e.r,a=[];return o>t&&(a=a.concat(F(e.l,t,n))),o>=t&&o<=n&&a.push({k:o,v:r}),o<=n&&(a=a.concat(F(i,t,n))),a}function k(e){return y(e)?[]:[].concat(k(e.l),[{k:e.k,v:e.v}],k(e.r))}function z(e){return y(e.r)?[e.k,e.v]:z(e.r)}function B(e){return y(e.r)?e.l:V(P(e,{r:B(e.r)}))}function P(e,t){return b(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function O(e){return y(e)||e.lvl>e.r.lvl}function V(e){var t=e.l,n=e.r,o=e.lvl;if(n.lvl>=o-1&&t.lvl>=o-1)return e;if(o>n.lvl+1){if(O(t))return A(P(e,{lvl:o-1}));if(y(t)||y(t.r))throw new Error("Unexpected empty nodes");return P(t.r,{l:P(t,{r:t.r.l}),r:P(e,{l:t.r.r,lvl:o-1}),lvl:o})}if(O(e))return U(P(e,{lvl:o-1}));if(y(n)||y(n.l))throw new Error("Unexpected empty nodes");var r=n.l,i=O(r)?n.lvl-1:n.lvl;return P(r,{l:P(e,{r:r.l,lvl:o-1}),r:U(P(n,{l:r.r,lvl:i})),lvl:r.lvl+1})}function M(e,t,n){return y(e)?[]:W(F(e,L(e,t)[0],n),function(e){return{index:e.k,value:e.v}})}function W(e,t){var n=e.length;if(0===n)return[];for(var o=t(e[0]),r=o.index,i=o.value,a=[],l=1;l<n;l++){var s=t(e[l]),u=s.index,c=s.value;a.push({start:r,end:u-1,value:i}),r=u,i=c}return a.push({start:r,end:Infinity,value:i}),a}function U(e){var t=e.r,n=e.lvl;return y(t)||y(t.r)||t.lvl!==n||t.r.lvl!==n?e:P(t,{l:P(e,{r:t.l}),lvl:n+1})}function A(e){var t=e.l;return y(t)||t.lvl!==e.lvl?e:P(t,{r:P(e,{l:t.r})})}function N(e,t,n,o){void 0===o&&(o=0);for(var r=e.length-1;o<=r;){var i=Math.floor((o+r)/2),a=n(e[i],t);if(0===a)return i;if(-1===a){if(r-o<2)return i-1;r=i-1}else{if(r===o)return i;o=i+1}}throw new Error("Failed binary finding record in array - "+e.join(",")+", searched for "+t)}function D(e,t,n){return e[N(e,t,n)]}var G=i.system(function(){return{recalcInProgress:i.statefulStream(!1)}},[],{singleton:!0});function j(e){var t=e.size,n=e.startIndex,o=e.endIndex;return function(e){return e.start===n&&(e.end===o||Infinity===e.end)&&e.value===t}}function _(e,t){var n=e.index;return t===n?0:t<n?-1:1}function K(e,t){var n=e.offset;return t===n?0:t<n?-1:1}function q(e){return{index:e.index,value:e}}function Y(e,t,n,o){var r=e,i=0,a=0,l=0,s=0;if(0!==t){l=r[s=N(r,t-1,_)].offset;var u=L(n,t-1);i=u[0],a=u[1],r.length&&r[s].size===L(n,t)[1]&&(s-=1),r=r.slice(0,s+1)}else r=[];for(var m,d=c(M(n,t,Infinity));!(m=d()).done;){var f=m.value,p=f.start,h=f.value,g=p-i,v=g*a+l+g*o;r.push({offset:v,size:h,index:p}),i=p,l=v,a=h}return{offsetTree:r,lastIndex:i,lastOffset:l,lastSize:a}}function Z(e,t){var n=t[0],o=t[1],r=t[3];n.length>0&&(0,t[2])("received item sizes",n,exports.LogLevel.DEBUG);var i=e.sizeTree,a=i,l=0;if(o.length>0&&y(i)&&2===n.length){var s=n[0].size,u=n[1].size;a=o.reduce(function(e,t){return R(R(e,t,s),t+1,u)},a)}else{var m=function(e,t){for(var n,o=y(e)?0:Infinity,r=c(t);!(n=r()).done;){var i=n.value,a=i.size,l=i.startIndex,s=i.endIndex;if(o=Math.min(o,l),y(e))e=R(e,0,a);else{var u=M(e,l-1,s+1);if(!u.some(j(i))){for(var m,d=!1,f=!1,p=c(u);!(m=p()).done;){var h=m.value,g=h.start,v=h.end,S=h.value;d?(s>=g||a===S)&&(e=H(e,g)):(f=S!==a,d=!0),v>s&&s>=g&&S!==a&&(e=R(e,s+1,S))}f&&(e=R(e,l,a))}}}return[e,o]}(a,n);a=m[0],l=m[1]}if(a===i)return e;var d=Y(e.offsetTree,l,a,r),f=d.offsetTree;return{sizeTree:a,offsetTree:f,lastIndex:d.lastIndex,lastOffset:d.lastOffset,lastSize:d.lastSize,groupOffsetTree:o.reduce(function(e,t){return R(e,t,J(t,f,r))},E()),groupIndices:o}}function J(e,t,n){if(0===t.length)return 0;var o=D(t,e,_),r=e-o.index,i=o.size*r+(r-1)*n+o.offset;return i>0?i+n:i}function $(e,t,n){if(function(e){return void 0!==e.groupIndex}(e))return t.groupIndices[e.groupIndex]+1;var o=Q("LAST"===e.index?n:e.index,t);return Math.max(0,o,Math.min(n,o))}function Q(e,t){if(!X(t))return e;for(var n=0;t.groupIndices[n]<=e+n;)n++;return e+n}function X(e){return!y(e.groupOffsetTree)}var ee={offsetHeight:"height",offsetWidth:"width"},te=i.system(function(e){var t=e[0].log,n=e[1].recalcInProgress,o=i.stream(),r=i.stream(),a=i.statefulStreamFromEmitter(r,0),s=i.stream(),u=i.stream(),c=i.statefulStream(0),m=i.statefulStream([]),d=i.statefulStream(void 0),f=i.statefulStream(void 0),p=i.statefulStream(function(e,t){return C(e,ee[t])}),h=i.statefulStream(void 0),g=i.statefulStream(0),v={offsetTree:[],sizeTree:E(),groupOffsetTree:E(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},S=i.statefulStreamFromEmitter(i.pipe(o,i.withLatestFrom(m,t,g),i.scan(Z,v),i.distinctUntilChanged()),v);i.connect(i.pipe(m,i.filter(function(e){return e.length>0}),i.withLatestFrom(S,g),i.map(function(e){var t=e[0],n=e[1],o=e[2],r=t.reduce(function(e,t,r){return R(e,t,J(t,n.offsetTree,o)||r)},E());return l({},n,{groupIndices:t,groupOffsetTree:r})})),S),i.connect(i.pipe(r,i.withLatestFrom(S),i.filter(function(e){return e[0]<e[1].lastIndex}),i.map(function(e){var t=e[1];return[{startIndex:e[0],endIndex:t.lastIndex,size:t.lastSize}]})),o),i.connect(d,f);var x=i.statefulStreamFromEmitter(i.pipe(d,i.map(function(e){return void 0===e})),!0);i.connect(i.pipe(f,i.filter(function(e){return void 0!==e&&y(i.getValue(S).sizeTree)}),i.map(function(e){return[{startIndex:0,endIndex:0,size:e}]})),o);var I=i.streamFromEmitter(i.pipe(o,i.withLatestFrom(S),i.scan(function(e,t){var n=t[1];return{changed:n!==e.sizes,sizes:n}},{changed:!1,sizes:v}),i.map(function(e){return e.changed})));i.subscribe(i.pipe(c,i.scan(function(e,t){return{diff:e.prev-t,prev:t}},{diff:0,prev:0}),i.map(function(e){return e.diff})),function(e){e>0?(i.publish(n,!0),i.publish(s,e)):e<0&&i.publish(u,e)}),i.subscribe(i.pipe(c,i.withLatestFrom(t)),function(e){e[0]<0&&(0,e[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:c},exports.LogLevel.ERROR)});var T=i.streamFromEmitter(s);i.connect(i.pipe(s,i.withLatestFrom(S),i.map(function(e){var t=e[0],n=e[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return k(n.sizeTree).reduce(function(e,n){var o=n.k,r=n.v;return{ranges:[].concat(e.ranges,[{startIndex:e.prevIndex,endIndex:o+t-1,size:e.prevSize}]),prevIndex:o+t,prevSize:r}},{ranges:[],prevIndex:0,prevSize:n.lastSize}).ranges})),o);var w=i.streamFromEmitter(i.pipe(u,i.withLatestFrom(S,g),i.map(function(e){return J(-e[0],e[1].offsetTree,e[2])})));return i.connect(i.pipe(u,i.withLatestFrom(S,g),i.map(function(e){var t=e[0],n=e[1],o=e[2];if(n.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var r=k(n.sizeTree).reduce(function(e,n){var o=n.v;return R(e,Math.max(0,n.k+t),o)},E());return l({},n,{sizeTree:r},Y(n.offsetTree,0,r,o))})),S),{data:h,totalCount:r,sizeRanges:o,groupIndices:m,defaultItemSize:f,fixedItemSize:d,unshiftWith:s,shiftWith:u,shiftWithOffset:w,beforeUnshiftWith:T,firstItemIndex:c,gap:g,sizes:S,listRefresh:I,statefulTotalCount:a,trackItemSizes:x,itemSize:p}},i.tup(h,G),{singleton:!0}),ne="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function oe(e){var t="number"==typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&ne||(t.behavior="auto"),t.offset||(t.offset=0),t}var re=i.system(function(e){var t=e[0],n=t.sizes,o=t.totalCount,r=t.listRefresh,a=t.gap,l=e[1],s=l.scrollingInProgress,u=l.viewportHeight,c=l.scrollTo,m=l.smoothScrollTargetReached,d=l.headerHeight,f=l.footerHeight,p=l.fixedHeaderHeight,h=l.fixedFooterHeight,g=e[2].log,v=i.stream(),S=i.statefulStream(0),C=null,x=null,I=null;function T(){C&&(C(),C=null),I&&(I(),I=null),x&&(clearTimeout(x),x=null),i.publish(s,!1)}return i.connect(i.pipe(v,i.withLatestFrom(n,u,o,S,d,f,g),i.withLatestFrom(a,p,h),i.map(function(e){var t=e[0],n=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7],p=e[1],h=e[2],g=e[3],S=oe(n),w=S.align,b=S.behavior,y=S.offset,E=l-1,H=$(S,o,E),R=J(H,o.offsetTree,p)+c;"end"===w?(R+=h+L(o.sizeTree,H)[1]-a+g,H===E&&(R+=d)):"center"===w?R+=(h+L(o.sizeTree,H)[1]-a+g)/2:R-=u,y&&(R+=y);var F=function(e){T(),e?(f("retrying to scroll to",{location:n},exports.LogLevel.DEBUG),i.publish(v,n)):f("list did not change, scroll successful",{},exports.LogLevel.DEBUG)};if(T(),"smooth"===b){var k=!1;I=i.subscribe(r,function(e){k=k||e}),C=i.handleNext(m,function(){F(k)})}else C=i.handleNext(i.pipe(r,function(e){var t=setTimeout(function(){e(!1)},150);return function(n){n&&(e(!0),clearTimeout(t))}}),F);return x=setTimeout(function(){T()},1200),i.publish(s,!0),f("scrolling from index to",{index:H,top:R,behavior:b},exports.LogLevel.DEBUG),{top:R,behavior:b}})),c),{scrollToIndex:v,topListHeight:S}},i.tup(te,T,h),{singleton:!0}),ie="up",ae={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},le=i.system(function(e){var t=e[0],n=t.scrollContainerState,o=t.scrollTop,r=t.viewportHeight,a=t.headerHeight,l=t.footerHeight,s=t.scrollBy,u=i.statefulStream(!1),c=i.statefulStream(!0),m=i.stream(),d=i.stream(),f=i.statefulStream(4),p=i.statefulStream(0),h=i.statefulStreamFromEmitter(i.pipe(i.merge(i.pipe(i.duc(o),i.skip(1),i.mapTo(!0)),i.pipe(i.duc(o),i.skip(1),i.mapTo(!1),i.debounceTime(100))),i.distinctUntilChanged()),!1),g=i.statefulStreamFromEmitter(i.pipe(i.merge(i.pipe(s,i.mapTo(!0)),i.pipe(s,i.mapTo(!1),i.debounceTime(200))),i.distinctUntilChanged()),!1);i.connect(i.pipe(i.combineLatest(i.duc(o),i.duc(p)),i.map(function(e){return e[0]<=e[1]}),i.distinctUntilChanged()),c),i.connect(i.pipe(c,i.throttleTime(50)),d);var v=i.streamFromEmitter(i.pipe(i.combineLatest(n,i.duc(r),i.duc(a),i.duc(l),i.duc(f)),i.scan(function(e,t){var n,o,r=t[0],i=r.scrollTop,a=r.scrollHeight,l=t[1],s={viewportHeight:l,scrollTop:i,scrollHeight:a};return i+l-a>-t[4]?(i>e.state.scrollTop?(n="SCROLLED_DOWN",o=e.state.scrollTop-i):(n="SIZE_DECREASED",o=e.state.scrollTop-i||e.scrollTopDelta),{atBottom:!0,state:s,atBottomBecause:n,scrollTopDelta:o}):{atBottom:!1,notAtBottomBecause:s.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":l<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":i<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:s}},ae),i.distinctUntilChanged(function(e,t){return e&&e.atBottom===t.atBottom}))),S=i.statefulStreamFromEmitter(i.pipe(n,i.scan(function(e,t){var n=t.scrollTop,o=t.scrollHeight,r=t.viewportHeight;return x(e.scrollHeight,o)?{scrollTop:n,scrollHeight:o,jump:0,changed:!1}:e.scrollTop!==n&&o-(n+r)<1?{scrollHeight:o,scrollTop:n,jump:e.scrollTop-n,changed:!0}:{scrollHeight:o,scrollTop:n,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),i.filter(function(e){return e.changed}),i.map(function(e){return e.jump})),0);i.connect(i.pipe(v,i.map(function(e){return e.atBottom})),u),i.connect(i.pipe(u,i.throttleTime(50)),m);var C=i.statefulStream("down");i.connect(i.pipe(n,i.map(function(e){return e.scrollTop}),i.distinctUntilChanged(),i.scan(function(e,t){return i.getValue(g)?{direction:e.direction,prevScrollTop:t}:{direction:t<e.prevScrollTop?ie:"down",prevScrollTop:t}},{direction:"down",prevScrollTop:0}),i.map(function(e){return e.direction})),C),i.connect(i.pipe(n,i.throttleTime(50),i.mapTo("none")),C);var I=i.statefulStream(0);return i.connect(i.pipe(h,i.filter(function(e){return!e}),i.mapTo(0)),I),i.connect(i.pipe(o,i.throttleTime(100),i.withLatestFrom(h),i.filter(function(e){return!!e[1]}),i.scan(function(e,t){return[e[1],t[0]]},[0,0]),i.map(function(e){return e[1]-e[0]})),I),{isScrolling:h,isAtTop:c,isAtBottom:u,atBottomState:v,atTopStateChange:d,atBottomStateChange:m,scrollDirection:C,atBottomThreshold:f,atTopThreshold:p,scrollVelocity:I,lastJumpDueToItemResize:S}},i.tup(T)),se=i.system(function(e){var t=e[0].log,n=i.statefulStream(!1),o=i.streamFromEmitter(i.pipe(n,i.filter(function(e){return e}),i.distinctUntilChanged()));return i.subscribe(n,function(e){e&&i.getValue(t)("props updated",{},exports.LogLevel.DEBUG)}),{propsReady:n,didMount:o}},i.tup(h),{singleton:!0}),ue=i.system(function(e){var t=e[0],n=t.sizes,o=t.listRefresh,r=t.defaultItemSize,a=e[1].scrollTop,l=e[2].scrollToIndex,s=e[3].didMount,u=i.statefulStream(!0),c=i.statefulStream(0);return i.connect(i.pipe(s,i.withLatestFrom(c),i.filter(function(e){return!!e[1]}),i.mapTo(!1)),u),i.subscribe(i.pipe(i.combineLatest(o,s),i.withLatestFrom(u,n,r),i.filter(function(e){var t=e[1],n=e[3];return e[0][1]&&(!y(e[2].sizeTree)||void 0!==n)&&!t}),i.withLatestFrom(c)),function(e){var t=e[1];setTimeout(function(){i.handleNext(a,function(){i.publish(u,!0)}),i.publish(l,t)})}),{scrolledToInitialItem:u,initialTopMostItemIndex:c}},i.tup(te,T,re,se),{singleton:!0});function ce(e){return!!e&&("smooth"===e?"smooth":"auto")}var me=i.system(function(e){var t=e[0],n=t.totalCount,o=t.listRefresh,r=e[1],a=r.isAtBottom,l=r.atBottomState,s=e[2].scrollToIndex,u=e[3].scrolledToInitialItem,c=e[4],m=c.propsReady,d=c.didMount,f=e[5].log,p=e[6].scrollingInProgress,h=i.statefulStream(!1),g=i.stream(),v=null;function S(e){i.publish(s,{index:"LAST",align:"end",behavior:e})}function C(e){var t=i.handleNext(l,function(t){!e||t.atBottom||"SIZE_INCREASED"!==t.notAtBottomBecause||v||(i.getValue(f)("scrolling to bottom due to increased size",{},exports.LogLevel.DEBUG),S("auto"))});setTimeout(t,100)}return i.subscribe(i.pipe(i.combineLatest(i.pipe(i.duc(n),i.skip(1)),d),i.withLatestFrom(i.duc(h),a,u,p),i.map(function(e){var t=e[0],n=t[0],o=t[1]&&e[3],r="auto";return o&&(r=function(e,t){return"function"==typeof e?ce(e(t)):t&&ce(e)}(e[1],e[2]||e[4]),o=o&&!!r),{totalCount:n,shouldFollow:o,followOutputBehavior:r}}),i.filter(function(e){return e.shouldFollow})),function(e){var t=e.totalCount,n=e.followOutputBehavior;v&&(v(),v=null),v=i.handleNext(o,function(){i.getValue(f)("following output to ",{totalCount:t},exports.LogLevel.DEBUG),S(n),v=null})}),i.subscribe(i.pipe(i.combineLatest(i.duc(h),n,m),i.filter(function(e){return e[0]&&e[2]}),i.scan(function(e,t){var n=t[1];return{refreshed:e.value===n,value:n}},{refreshed:!1,value:0}),i.filter(function(e){return e.refreshed}),i.withLatestFrom(h,n)),function(e){C(!1!==e[1])}),i.subscribe(g,function(){C(!1!==i.getValue(h))}),i.subscribe(i.combineLatest(i.duc(h),l),function(e){var t=e[1];e[0]&&!t.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===t.notAtBottomBecause&&S("auto")}),{followOutput:h,autoscrollToBottom:g}},i.tup(te,le,re,ue,se,h,T));function de(e){return e.reduce(function(e,t){return e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e},{totalCount:0,groupIndices:[]})}var fe=i.system(function(e){var t=e[0],n=t.totalCount,o=t.groupIndices,r=t.sizes,a=e[1],l=a.scrollTop,s=a.headerHeight,u=i.stream(),c=i.stream(),m=i.streamFromEmitter(i.pipe(u,i.map(de)));return i.connect(i.pipe(m,i.map(function(e){return e.totalCount})),n),i.connect(i.pipe(m,i.map(function(e){return e.groupIndices})),o),i.connect(i.pipe(i.combineLatest(l,r,s),i.filter(function(e){return X(e[1])}),i.map(function(e){return L(e[1].groupOffsetTree,Math.max(e[0]-e[2],0),"v")[0]}),i.distinctUntilChanged(),i.map(function(e){return[e]})),c),{groupCounts:u,topItemsIndexes:c}},i.tup(te,T));function pe(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function he(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}function ge(e,t,n){return"number"==typeof e?n===ie&&"top"===t||"down"===n&&"bottom"===t?e:0:n===ie?"top"===t?e.main:e.reverse:"bottom"===t?e.main:e.reverse}function ve(e,t){return"number"==typeof e?e:e[t]||0}var Se=i.system(function(e){var t=e[0],n=t.scrollTop,o=t.viewportHeight,r=t.deviation,a=t.headerHeight,l=t.fixedHeaderHeight,s=i.stream(),u=i.statefulStream(0),c=i.statefulStream(0),m=i.statefulStream(0),d=i.statefulStreamFromEmitter(i.pipe(i.combineLatest(i.duc(n),i.duc(o),i.duc(a),i.duc(s,pe),i.duc(m),i.duc(u),i.duc(l),i.duc(r),i.duc(c)),i.map(function(e){var t=e[0],n=e[1],o=e[2],r=e[3],i=r[0],a=r[1],l=e[4],s=e[6],u=e[7],c=e[8],m=t-u,d=e[5]+s,f=Math.max(o-m,0),p="none",h=ve(c,"top"),g=ve(c,"bottom");return i-=u,a+=o+s,(i+=o+s)>t+d-h&&(p=ie),(a-=u)<t-f+n+g&&(p="down"),"none"!==p?[Math.max(m-o-ge(l,"top",p)-h,0),m-f-s+n+ge(l,"bottom",p)+g]:null}),i.filter(function(e){return null!=e}),i.distinctUntilChanged(pe)),[0,0]);return{listBoundary:s,overscan:m,topListHeight:u,increaseViewportBy:c,visibleRange:d}},i.tup(T),{singleton:!0}),Ce={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function xe(e,t,n){if(0===e.length)return[];if(!X(t))return e.map(function(e){return l({},e,{index:e.index+n,originalIndex:e.index})});for(var o,r=[],i=M(t.groupOffsetTree,e[0].index,e[e.length-1].index),a=void 0,s=0,u=c(e);!(o=u()).done;){var m=o.value;(!a||a.end<m.index)&&(a=i.shift(),s=t.groupIndices.indexOf(a.start)),r.push(l({},m.index===a.start?{type:"group",index:s}:{index:m.index-(s+1)+n,groupIndex:s},{size:m.size,offset:m.offset,originalIndex:m.index,data:m.data}))}return r}function Ie(e,t,n,o,r,i){var a=0,l=0;if(e.length>0){a=e[0].offset;var s=e[e.length-1];l=s.offset+s.size}var u=n-r.lastIndex,c=a,m=r.lastOffset+u*r.lastSize+(u-1)*o-l;return{items:xe(e,r,i),topItems:xe(t,r,i),topListHeight:t.reduce(function(e,t){return t.size+e},0),offsetTop:a,offsetBottom:m,top:c,bottom:l,totalCount:n,firstItemIndex:i}}var Te=i.system(function(e){var t=e[0],n=t.sizes,o=t.totalCount,r=t.data,a=t.firstItemIndex,s=t.gap,u=e[1],m=e[2],d=m.visibleRange,f=m.listBoundary,p=m.topListHeight,h=e[3],g=h.scrolledToInitialItem,v=h.initialTopMostItemIndex,S=e[4].topListHeight,C=e[5],x=e[6].didMount,I=e[7].recalcInProgress,T=i.statefulStream([]),w=i.stream();i.connect(u.topItemsIndexes,T);var b=i.statefulStreamFromEmitter(i.pipe(i.combineLatest(x,I,i.duc(d,pe),i.duc(o),i.duc(n),i.duc(v),g,i.duc(T),i.duc(a),i.duc(s),r),i.filter(function(e){return e[0]&&!e[1]}),i.map(function(e){var t=e[2],n=t[0],o=t[1],r=e[3],a=e[5],s=e[6],u=e[7],m=e[8],d=e[9],f=e[10],p=e[4],h=p.sizeTree,g=p.offsetTree;if(0===r||0===n&&0===o)return l({},Ce,{totalCount:r});if(y(h))return Ie(function(e,t,n){if(X(t)){var o=Q(e,t);return[{index:L(t.groupOffsetTree,o)[0],size:0,offset:0},{index:o,size:0,offset:0,data:n&&n[0]}]}return[{index:e,size:0,offset:0,data:n&&n[0]}]}(function(e,t){return"number"==typeof e?e:"LAST"===e.index?t-1:e.index}(a,r),p,f),[],r,d,p,m);var v=[];if(u.length>0)for(var S,C=u[0],x=u[u.length-1],I=0,T=c(M(h,C,x));!(S=T()).done;)for(var w=S.value,b=w.value,E=Math.max(w.start,C),H=Math.min(w.end,x),R=E;R<=H;R++)v.push({index:R,size:b,offset:I,data:f&&f[R]}),I+=b;if(!s)return Ie([],v,r,d,p,m);var F=u.length>0?u[u.length-1]+1:0,k=function(e,t,n,o){return void 0===o&&(o=0),o>0&&(t=Math.max(t,D(e,o,_).offset)),W((i=n,l=N(r=e,t,a=K),s=N(r,i,a,l),r.slice(l,s+1)),q);var r,i,a,l,s}(g,n,o,F);if(0===k.length)return null;var z=r-1;return Ie(i.tap([],function(e){for(var t,r=c(k);!(t=r()).done;){var i=t.value,a=i.value,l=a.offset,s=i.start,u=a.size;if(a.offset<n){var m=(s+=Math.floor((n-a.offset+d)/(u+d)))-i.start;l+=m*u+m*d}s<F&&(l+=(F-s)*u,s=F);for(var p=Math.min(i.end,z),h=s;h<=p&&!(l>=o);h++)e.push({index:h,size:u,offset:l,data:f&&f[h]}),l+=u+d}}),v,r,d,p,m)}),i.filter(function(e){return null!==e}),i.distinctUntilChanged()),Ce);return i.connect(i.pipe(r,i.filter(function(e){return void 0!==e}),i.map(function(e){return e.length})),o),i.connect(i.pipe(b,i.map(function(e){return e.topListHeight})),S),i.connect(S,p),i.connect(i.pipe(b,i.map(function(e){return[e.top,e.bottom]})),f),i.connect(i.pipe(b,i.map(function(e){return e.items})),w),l({listState:b,topItemsIndexes:T,endReached:i.streamFromEmitter(i.pipe(b,i.filter(function(e){return e.items.length>0}),i.withLatestFrom(o,r),i.filter(function(e){var t=e[0].items;return t[t.length-1].originalIndex===e[1]-1}),i.map(function(e){return[e[1]-1,e[2]]}),i.distinctUntilChanged(pe),i.map(function(e){return e[0]}))),startReached:i.streamFromEmitter(i.pipe(b,i.throttleTime(200),i.filter(function(e){var t=e.items;return t.length>0&&t[0].originalIndex===e.topItems.length}),i.map(function(e){return e.items[0].index}),i.distinctUntilChanged())),rangeChanged:i.streamFromEmitter(i.pipe(b,i.filter(function(e){return e.items.length>0}),i.map(function(e){for(var t=e.items,n=0,o=t.length-1;"group"===t[n].type&&n<o;)n++;for(;"group"===t[o].type&&o>n;)o--;return{startIndex:t[n].index,endIndex:t[o].index}}),i.distinctUntilChanged(he))),itemsRendered:w},C)},i.tup(te,fe,Se,ue,re,le,se,G),{singleton:!0}),we=i.system(function(e){var t=e[0],n=t.sizes,o=t.firstItemIndex,r=t.data,a=t.gap,l=e[1].listState,s=e[2].didMount,u=i.statefulStream(0);return i.connect(i.pipe(s,i.withLatestFrom(u),i.filter(function(e){return 0!==e[1]}),i.withLatestFrom(n,o,a,r),i.map(function(e){var t=e[0][1],n=e[1],o=e[2],r=e[3],i=e[4],a=void 0===i?[]:i,l=0;if(n.groupIndices.length>0)for(var s,u=c(n.groupIndices);!((s=u()).done||s.value-l>=t);)l++;var m=t+l;return Ie(Array.from({length:m}).map(function(e,t){return{index:t,size:0,offset:0,data:a[t]}}),[],m,r,n,o)})),l),{initialItemCount:u}},i.tup(te,Te,se),{singleton:!0}),be=i.system(function(e){var t=e[0].scrollVelocity,n=i.statefulStream(!1),o=i.stream(),r=i.statefulStream(!1);return i.connect(i.pipe(t,i.withLatestFrom(r,n,o),i.filter(function(e){return!!e[1]}),i.map(function(e){var t=e[0],n=e[1],o=e[2],r=e[3],i=n.enter;if(o){if((0,n.exit)(t,r))return!1}else if(i(t,r))return!0;return o}),i.distinctUntilChanged()),n),i.subscribe(i.pipe(i.combineLatest(n,t,o),i.withLatestFrom(r)),function(e){var t=e[0],n=e[1];return t[0]&&n&&n.change&&n.change(t[1],t[2])}),{isSeeking:n,scrollSeekConfiguration:r,scrollVelocity:t,scrollSeekRangeChanged:o}},i.tup(le),{singleton:!0}),ye=i.system(function(e){var t=e[0].topItemsIndexes,n=i.statefulStream(0);return i.connect(i.pipe(n,i.filter(function(e){return e>0}),i.map(function(e){return Array.from({length:e}).map(function(e,t){return t})})),t),{topItemCount:n}},i.tup(Te)),Ee=i.system(function(e){var t=e[0],n=t.footerHeight,o=t.headerHeight,r=t.fixedHeaderHeight,a=t.fixedFooterHeight,l=e[1].listState,s=i.stream(),u=i.statefulStreamFromEmitter(i.pipe(i.combineLatest(n,a,o,r,l),i.map(function(e){var t=e[4];return e[0]+e[1]+e[2]+e[3]+t.offsetBottom+t.bottom})),0);return i.connect(i.duc(u),s),{totalListHeight:u,totalListHeightChanged:s}},i.tup(T,Te),{singleton:!0});function He(e){var t,n=!1;return function(){return n||(n=!0,t=e()),t}}var Le=He(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),Re=i.system(function(e){var t=e[0],n=t.scrollBy,o=t.scrollTop,r=t.deviation,a=t.scrollingInProgress,l=e[1],s=l.isScrolling,u=l.isAtBottom,c=l.scrollDirection,m=e[3],d=m.beforeUnshiftWith,f=m.shiftWithOffset,p=m.sizes,h=m.gap,g=e[4].log,v=e[5].recalcInProgress,S=i.streamFromEmitter(i.pipe(e[2].listState,i.withLatestFrom(l.lastJumpDueToItemResize),i.scan(function(e,t){var n=e[1],o=t[0],r=o.items,i=o.totalCount,a=o.bottom+o.offsetBottom,l=0;return e[2]===i&&n.length>0&&r.length>0&&(0===r[0].originalIndex&&0===n[0].originalIndex||0!=(l=a-e[3])&&(l+=t[1])),[l,r,i,a]},[0,[],0,0]),i.filter(function(e){return 0!==e[0]}),i.withLatestFrom(o,c,a,u,g),i.filter(function(e){return!e[3]&&0!==e[1]&&e[2]===ie}),i.map(function(e){var t=e[0][0];return(0,e[5])("Upward scrolling compensation",{amount:t},exports.LogLevel.DEBUG),t})));function C(e){e>0?(i.publish(n,{top:-e,behavior:"auto"}),i.publish(r,0)):(i.publish(r,0),i.publish(n,{top:-e,behavior:"auto"}))}return i.subscribe(i.pipe(S,i.withLatestFrom(r,s)),function(e){var t=e[0],n=e[1];e[2]&&Le()?i.publish(r,n-t):C(-t)}),i.subscribe(i.pipe(i.combineLatest(i.statefulStreamFromEmitter(s,!1),r,v),i.filter(function(e){return!e[0]&&!e[2]&&0!==e[1]}),i.map(function(e){return e[1]}),i.throttleTime(1)),C),i.connect(i.pipe(f,i.map(function(e){return{top:-e}})),n),i.subscribe(i.pipe(d,i.withLatestFrom(p,h),i.map(function(e){var t=e[0];return t*e[1].lastSize+t*e[2]})),function(e){i.publish(r,e),requestAnimationFrame(function(){i.publish(n,{top:e}),requestAnimationFrame(function(){i.publish(r,0),i.publish(v,!1)})})}),{deviation:r}},i.tup(T,le,Te,te,h,G)),Fe=i.system(function(e){var t=e[0].totalListHeight,n=e[1].didMount,o=e[2].scrollTo,r=i.statefulStream(0);return i.subscribe(i.pipe(n,i.withLatestFrom(r),i.filter(function(e){return 0!==e[1]}),i.map(function(e){return{top:e[1]}})),function(e){i.handleNext(i.pipe(t,i.filter(function(e){return 0!==e})),function(){setTimeout(function(){i.publish(o,e)})})}),{initialScrollTop:r}},i.tup(Ee,se,T),{singleton:!0}),ke=i.system(function(e){var t=e[0].viewportHeight,n=e[1].totalListHeight,o=i.statefulStream(!1);return{alignToBottom:o,paddingTopAddition:i.statefulStreamFromEmitter(i.pipe(i.combineLatest(o,t,n),i.filter(function(e){return e[0]}),i.map(function(e){return Math.max(0,e[1]-e[2])}),i.distinctUntilChanged()),0)}},i.tup(T,Ee),{singleton:!0}),ze=i.system(function(e){var t=e[0],n=t.scrollTo,o=t.scrollContainerState,r=i.stream(),a=i.stream(),s=i.stream(),u=i.statefulStream(!1),c=i.statefulStream(void 0);return i.connect(i.pipe(i.combineLatest(r,a),i.map(function(e){var t=e[0],n=t.viewportHeight,o=t.scrollHeight;return{scrollTop:Math.max(0,t.scrollTop-e[1].offsetTop),scrollHeight:o,viewportHeight:n}})),o),i.connect(i.pipe(n,i.withLatestFrom(a),i.map(function(e){var t=e[0];return l({},t,{top:t.top+e[1].offsetTop})})),s),{useWindowScroll:u,customScrollParent:c,windowScrollContainerState:r,windowViewportRect:a,windowScrollTo:s}},i.tup(T)),Be=["done","behavior","align"],Pe=i.system(function(e){var t=e[0],n=t.sizes,o=t.totalCount,r=t.gap,a=e[1],u=a.scrollTop,c=a.viewportHeight,m=a.headerHeight,d=a.fixedHeaderHeight,f=a.fixedFooterHeight,p=a.scrollingInProgress,h=e[2].scrollToIndex,g=i.stream();return i.connect(i.pipe(g,i.withLatestFrom(n,c,o,m,d,f,u),i.withLatestFrom(r),i.map(function(e){var t=e[0],n=t[0],o=t[1],r=t[2],a=t[3],u=t[4],c=t[5],m=t[6],d=t[7],f=e[1],h=n.done,g=n.behavior,v=n.align,S=s(n,Be),C=null,x=$(n,o,a-1),I=J(x,o.offsetTree,f)+u+c;return I<d+c?C=l({},S,{behavior:g,align:null!=v?v:"start"}):I+L(o.sizeTree,x)[1]>d+r-m&&(C=l({},S,{behavior:g,align:null!=v?v:"end"})),C?h&&i.handleNext(i.pipe(p,i.skip(1),i.filter(function(e){return!1===e})),h):h&&h(),C}),i.filter(function(e){return null!==e})),h),{scrollIntoView:g}},i.tup(te,T,re,Te,h),{singleton:!0}),Oe=["listState","topItemsIndexes"],Ve=i.system(function(e){return l({},e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},i.tup(Se,we,se,be,Ee,Fe,ke,ze,Pe)),Me=i.system(function(e){var t=e[0],n=t.totalCount,o=t.sizeRanges,r=t.fixedItemSize,a=t.defaultItemSize,u=t.trackItemSizes,c=t.itemSize,m=t.data,d=t.firstItemIndex,f=t.groupIndices,p=t.statefulTotalCount,h=t.gap,g=e[1],v=g.initialTopMostItemIndex,S=g.scrolledToInitialItem,C=e[2],x=e[3],I=e[4],T=I.listState,w=I.topItemsIndexes,b=s(I,Oe),y=e[5].scrollToIndex,E=e[7].topItemCount,H=e[8].groupCounts,L=e[9],R=e[10];return i.connect(b.rangeChanged,L.scrollSeekRangeChanged),i.connect(i.pipe(L.windowViewportRect,i.map(function(e){return e.visibleHeight})),C.viewportHeight),l({totalCount:n,data:m,firstItemIndex:d,sizeRanges:o,initialTopMostItemIndex:v,scrolledToInitialItem:S,topItemsIndexes:w,topItemCount:E,groupCounts:H,fixedItemHeight:r,defaultItemHeight:a,gap:h},x,{statefulTotalCount:p,listState:T,scrollToIndex:y,trackItemSizes:u,itemSize:c,groupIndices:f},b,L,C,R)},i.tup(te,ue,T,me,Te,re,Re,ye,fe,Ve,h)),We=He(function(){if("undefined"==typeof document)return"sticky";var e=document.createElement("div");return e.style.position="-webkit-sticky","-webkit-sticky"===e.style.position?"-webkit-sticky":"sticky"});function Ue(e,t){var o=n.useRef(null),r=n.useCallback(function(n){if(null!==n&&n.offsetParent){var r,i,a=n.getBoundingClientRect(),l=a.width;if(t){var s=t.getBoundingClientRect(),u=a.top-s.top;r=s.height-Math.max(0,u),i=u+t.scrollTop}else r=window.innerHeight-Math.max(0,a.top),i=a.top+window.pageYOffset;o.current={offsetTop:i,visibleHeight:r,visibleWidth:l},e(o.current)}},[e,t]),i=g(r),a=i.callbackRef,l=i.ref,s=n.useCallback(function(){r(l.current)},[r,l]);return n.useEffect(function(){if(t){t.addEventListener("scroll",s);var e=new ResizeObserver(s);return e.observe(t),function(){t.removeEventListener("scroll",s),e.unobserve(t)}}return window.addEventListener("scroll",s),window.addEventListener("resize",s),function(){window.removeEventListener("scroll",s),window.removeEventListener("resize",s)}},[s,t]),a}var Ae=a.createContext(void 0),Ne=a.createContext(void 0),De=["placeholder"],Ge=["style","children"],je=["style","children"];function _e(e){return e}var Ke=i.system(function(){var e=i.statefulStream(function(e){return"Item "+e}),t=i.statefulStream(null),n=i.statefulStream(function(e){return"Group "+e}),o=i.statefulStream({}),r=i.statefulStream(_e),a=i.statefulStream("div"),l=i.statefulStream(i.noop),s=function(e,t){return void 0===t&&(t=null),i.statefulStreamFromEmitter(i.pipe(o,i.map(function(t){return t[e]}),i.distinctUntilChanged()),t)};return{context:t,itemContent:e,groupContent:n,components:o,computeItemKey:r,headerFooterTag:a,scrollerRef:l,FooterComponent:s("Footer"),HeaderComponent:s("Header"),TopItemListComponent:s("TopItemList"),ListComponent:s("List","div"),ItemComponent:s("Item","div"),GroupComponent:s("Group","div"),ScrollerComponent:s("Scroller","div"),EmptyPlaceholder:s("EmptyPlaceholder"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder")}});function qe(e,t){var n=i.stream();return i.subscribe(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+t,"color: red;","color: inherit;","color: blue;")}),i.connect(n,e),n}var Ye=i.system(function(e){var t=e[0],n=e[1],o={item:qe(n.itemContent,"Rename the %citem%c prop to %citemContent."),group:qe(n.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:qe(t.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:qe(t.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:qe(t.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:i.stream(),maxHeightCacheSize:i.stream(),footer:i.stream(),header:i.stream(),HeaderContainer:i.stream(),FooterContainer:i.stream(),ItemContainer:i.stream(),ScrollContainer:i.stream(),GroupContainer:i.stream(),ListContainer:i.stream(),emptyComponent:i.stream(),scrollSeek:i.stream()};function r(e,t,o){i.connect(i.pipe(e,i.withLatestFrom(n.components),i.map(function(e){var n,r=e[0],i=e[1];return console.warn("react-virtuoso: "+o+" property is deprecated. Pass components."+t+" instead."),l({},i,((n={})[t]=r,n))})),n.components)}return i.subscribe(o.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),i.subscribe(o.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),i.subscribe(o.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),i.subscribe(o.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),i.subscribe(o.scrollSeek,function(e){var o=e.placeholder,r=s(e,De);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),i.publish(n.components,l({},i.getValue(n.components),{ScrollSeekPlaceholder:o})),i.publish(t.scrollSeekConfiguration,r)}),r(o.footer,"Footer","footer"),r(o.header,"Header","header"),r(o.ItemContainer,"Item","ItemContainer"),r(o.ListContainer,"List","ListContainer"),r(o.ScrollContainer,"Scroller","ScrollContainer"),r(o.emptyComponent,"EmptyPlaceholder","emptyComponent"),r(o.GroupContainer,"Group","GroupContainer"),l({},t,n,o)},i.tup(Me,Ke)),Ze=function(e){return a.createElement("div",{style:{height:e.height}})},Je={position:We(),zIndex:1,overflowAnchor:"none"},$e={overflowAnchor:"none"},Qe=a.memo(function(e){var t=e.showTopList,o=void 0!==t&&t,r=pt("listState"),s=ft("sizeRanges"),u=pt("useWindowScroll"),c=pt("customScrollParent"),m=ft("windowScrollContainerState"),d=ft("scrollContainerState"),f=c||u?m:d,p=pt("itemContent"),h=pt("context"),g=pt("groupContent"),v=pt("trackItemSizes"),C=pt("itemSize"),x=pt("log"),I=ft("gap"),T=S(s,C,v,o?i.noop:f,x,I,c).callbackRef,w=a.useState(0),b=w[0],y=w[1];ht("deviation",function(e){b!==e&&y(e)});var E=pt("EmptyPlaceholder"),H=pt("ScrollSeekPlaceholder")||Ze,L=pt("ListComponent"),R=pt("ItemComponent"),F=pt("GroupComponent"),k=pt("computeItemKey"),z=pt("isSeeking"),B=pt("groupIndices").length>0,P=pt("paddingTopAddition"),O=o?{}:{boxSizing:"border-box",paddingTop:r.offsetTop+P,paddingBottom:r.offsetBottom,marginTop:b};return!o&&0===r.totalCount&&E?n.createElement(E,nt(E,h)):n.createElement(L,l({},nt(L,h),{ref:T,style:O,"data-test-id":o?"virtuoso-top-item-list":"virtuoso-item-list"}),(o?r.topItems:r.items).map(function(e){var t=e.originalIndex,o=k(t+r.firstItemIndex,e.data,h);return z?n.createElement(H,l({},nt(H,h),{key:o,index:e.index,height:e.size,type:e.type||"item"},"group"===e.type?{}:{groupIndex:e.groupIndex})):"group"===e.type?n.createElement(F,l({},nt(F,h),{key:o,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:Je}),g(e.index)):n.createElement(R,l({},nt(R,h),{key:o,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:$e}),B?p(e.index,e.groupIndex,e.data,h):p(e.index,e.data,h))}))}),Xe={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},et={width:"100%",height:"100%",position:"absolute",top:0},tt={width:"100%",position:We(),top:0};function nt(e,t){if("string"!=typeof e)return{context:t}}var ot=a.memo(function(){var e=pt("HeaderComponent"),t=ft("headerHeight"),o=pt("headerFooterTag"),r=v(function(e){return t(C(e,"height"))}),i=pt("context");return e?n.createElement(o,{ref:r},n.createElement(e,nt(e,i))):null}),rt=a.memo(function(){var e=pt("FooterComponent"),t=ft("footerHeight"),o=pt("headerFooterTag"),r=v(function(e){return t(C(e,"height"))}),i=pt("context");return e?n.createElement(o,{ref:r},n.createElement(e,nt(e,i))):null});function it(e){var t=e.usePublisher,o=e.useEmitter,r=e.useEmitterValue;return a.memo(function(e){var i=e.style,a=e.children,u=s(e,Ge),c=t("scrollContainerState"),m=r("ScrollerComponent"),d=t("smoothScrollTargetReached"),f=r("scrollerRef"),p=r("context"),h=I(c,d,m,f),g=h.scrollerRef,v=h.scrollByCallback;return o("scrollTo",h.scrollToCallback),o("scrollBy",v),n.createElement(m,l({ref:g,style:l({},Xe,i),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},u,nt(m,p)),a)})}function at(e){var t=e.usePublisher,o=e.useEmitter,r=e.useEmitterValue;return a.memo(function(e){var a=e.style,u=e.children,c=s(e,je),m=t("windowScrollContainerState"),d=r("ScrollerComponent"),p=t("smoothScrollTargetReached"),h=r("totalListHeight"),g=r("deviation"),v=r("customScrollParent"),S=r("context"),C=I(m,p,d,i.noop,v),x=C.scrollerRef,T=C.scrollByCallback,w=C.scrollToCallback;return f(function(){return x.current=v||window,function(){x.current=null}},[x,v]),o("windowScrollTo",w),o("scrollBy",T),n.createElement(d,l({style:l({position:"relative"},a,0!==h?{height:h+g}:{}),"data-virtuoso-scroller":!0},c,nt(d,S)),u)})}var lt=function(e){var t=e.children,o=n.useContext(Ae),r=ft("viewportHeight"),l=ft("fixedItemHeight"),s=v(i.compose(r,function(e){return C(e,"height")}));return a.useEffect(function(){o&&(r(o.viewportHeight),l(o.itemHeight))},[o,r,l]),a.createElement("div",{style:et,ref:s,"data-viewport-type":"element"},t)},st=function(e){var t=e.children,o=n.useContext(Ae),r=ft("windowViewportRect"),i=ft("fixedItemHeight"),l=pt("customScrollParent"),s=Ue(r,l);return a.useEffect(function(){o&&(i(o.itemHeight),r({offsetTop:0,visibleHeight:o.viewportHeight,visibleWidth:100}))},[o,r,i]),a.createElement("div",{ref:s,style:et,"data-viewport-type":"window"},t)},ut=function(e){var t=e.children,o=pt("TopItemListComponent"),r=pt("headerHeight"),i=l({},tt,{marginTop:r+"px"}),a=pt("context");return n.createElement(o||"div",{style:i,context:a},t)},ct=a.memo(function(e){var t=pt("useWindowScroll"),n=pt("topItemsIndexes").length>0,o=pt("customScrollParent"),r=o||t?st:lt;return a.createElement(o||t?vt:gt,l({},e),a.createElement(r,null,a.createElement(ot,null),a.createElement(Qe,null),a.createElement(rt,null)),n&&a.createElement(ut,null,a.createElement(Qe,{showTopList:!0})))}),mt=e.systemToComponent(Ye,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ct),dt=mt.Component,ft=mt.usePublisher,pt=mt.useEmitterValue,ht=mt.useEmitter,gt=it({usePublisher:ft,useEmitterValue:pt,useEmitter:ht}),vt=at({usePublisher:ft,useEmitterValue:pt,useEmitter:ht}),St={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Ct={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},xt=Math.round,It=Math.ceil,Tt=Math.floor,wt=Math.min,bt=Math.max;function yt(e,t,n){return Array.from({length:t-e+1}).map(function(t,o){return{index:o+e,data:null==n?void 0:n[o+e]}})}function Et(e,t){return e&&e.column===t.column&&e.row===t.row}var Ht=i.system(function(e){var t=e[0],n=t.overscan,o=t.visibleRange,r=t.listBoundary,a=e[1],s=a.scrollTop,u=a.viewportHeight,c=a.scrollBy,m=a.scrollTo,d=a.smoothScrollTargetReached,f=a.scrollContainerState,p=a.footerHeight,h=a.headerHeight,g=e[2],v=e[3],S=e[4],C=S.propsReady,x=S.didMount,I=e[5],T=I.windowViewportRect,w=I.windowScrollTo,b=I.useWindowScroll,y=I.customScrollParent,E=I.windowScrollContainerState,H=e[6],L=i.statefulStream(0),R=i.statefulStream(0),F=i.statefulStream(St),k=i.statefulStream({height:0,width:0}),z=i.statefulStream({height:0,width:0}),B=i.stream(),P=i.stream(),O=i.statefulStream(0),V=i.statefulStream(void 0),M=i.statefulStream({row:0,column:0});i.connect(i.pipe(i.combineLatest(x,R,V),i.filter(function(e){return 0!==e[1]}),i.map(function(e){return{items:yt(0,e[1]-1,e[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),F),i.connect(i.pipe(i.combineLatest(i.duc(L),o,i.duc(M,Et),i.duc(z,function(e,t){return e&&e.width===t.width&&e.height===t.height}),V),i.withLatestFrom(k),i.map(function(e){var t=e[0],n=t[0],o=t[1],r=o[0],i=o[1],a=t[2],s=t[3],u=t[4],c=e[1],m=a.row,d=a.column,f=s.height,p=s.width,h=c.width;if(0===n||0===h)return St;if(0===p)return function(e){return l({},Ct,{items:e})}(yt(0,0,u));var g=Ft(h,p,d),v=g*Tt((r+m)/(f+m)),S=g*It((i+m)/(f+m))-1;S=wt(n-1,bt(S,g-1));var C=yt(v=wt(S,bt(0,v)),S,u),x=Lt(c,a,s,C),I=x.top,T=x.bottom,w=It(n/g);return{items:C,offsetTop:I,offsetBottom:w*f+(w-1)*m-T,top:I,bottom:T,itemHeight:f,itemWidth:p}})),F),i.connect(i.pipe(V,i.filter(function(e){return void 0!==e}),i.map(function(e){return e.length})),L),i.connect(i.pipe(k,i.map(function(e){return e.height})),u),i.connect(i.pipe(i.combineLatest(k,z,F,M),i.map(function(e){var t=Lt(e[0],e[3],e[1],e[2].items);return[t.top,t.bottom]}),i.distinctUntilChanged(pe)),r);var W=i.streamFromEmitter(i.pipe(i.duc(F),i.filter(function(e){return e.items.length>0}),i.withLatestFrom(L),i.filter(function(e){var t=e[0].items;return t[t.length-1].index===e[1]-1}),i.map(function(e){return e[1]-1}),i.distinctUntilChanged())),U=i.streamFromEmitter(i.pipe(i.duc(F),i.filter(function(e){var t=e.items;return t.length>0&&0===t[0].index}),i.mapTo(0),i.distinctUntilChanged())),A=i.streamFromEmitter(i.pipe(i.duc(F),i.filter(function(e){return e.items.length>0}),i.map(function(e){var t=e.items;return{startIndex:t[0].index,endIndex:t[t.length-1].index}}),i.distinctUntilChanged(he)));i.connect(A,v.scrollSeekRangeChanged),i.connect(i.pipe(B,i.withLatestFrom(k,z,L,M),i.map(function(e){var t=e[1],n=e[2],o=e[3],r=e[4],i=oe(e[0]),a=i.align,l=i.behavior,s=i.offset,u=i.index;"LAST"===u&&(u=o-1);var c=Rt(t,r,n,u=bt(0,u,wt(o-1,u)));return"end"===a?c=xt(c-t.height+n.height):"center"===a&&(c=xt(c-t.height/2+n.height/2)),s&&(c+=s),{top:c,behavior:l}})),m);var N=i.statefulStreamFromEmitter(i.pipe(F,i.map(function(e){return e.offsetBottom+e.bottom})),0);return i.connect(i.pipe(T,i.map(function(e){return{width:e.visibleWidth,height:e.visibleHeight}})),k),l({data:V,totalCount:L,viewportDimensions:k,itemDimensions:z,scrollTop:s,scrollHeight:P,overscan:n,scrollBy:c,scrollTo:m,scrollToIndex:B,smoothScrollTargetReached:d,windowViewportRect:T,windowScrollTo:w,useWindowScroll:b,customScrollParent:y,windowScrollContainerState:E,deviation:O,scrollContainerState:f,footerHeight:p,headerHeight:h,initialItemCount:R,gap:M},v,{gridState:F,totalListHeight:N},g,{startReached:U,endReached:W,rangeChanged:A,propsReady:C},H)},i.tup(Se,T,le,be,se,ze,h));function Lt(e,t,n,o){var r=n.height;return void 0===r||0===o.length?{top:0,bottom:0}:{top:Rt(e,t,n,o[0].index),bottom:Rt(e,t,n,o[o.length-1].index)+r}}function Rt(e,t,n,o){var r=Ft(e.width,n.width,t.column),i=Tt(o/r),a=i*n.height+bt(0,i-1)*t.row;return a>0?a+t.row:a}function Ft(e,t,n){return bt(1,Tt((e+n)/(t+n)))}var kt=["placeholder"],zt=i.system(function(){var e=i.statefulStream(function(e){return"Item "+e}),t=i.statefulStream({}),n=i.statefulStream(null),o=i.statefulStream("virtuoso-grid-item"),r=i.statefulStream("virtuoso-grid-list"),a=i.statefulStream(_e),l=i.statefulStream("div"),s=i.statefulStream(i.noop),u=function(e,n){return void 0===n&&(n=null),i.statefulStreamFromEmitter(i.pipe(t,i.map(function(t){return t[e]}),i.distinctUntilChanged()),n)};return{context:n,itemContent:e,components:t,computeItemKey:a,itemClassName:o,listClassName:r,headerFooterTag:l,scrollerRef:s,FooterComponent:u("Footer"),HeaderComponent:u("Header"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),ScrollerComponent:u("Scroller","div"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}}),Bt=i.system(function(e){var t=e[0],n=e[1],o={item:qe(n.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:i.stream(),ScrollContainer:i.stream(),ListContainer:i.stream(),emptyComponent:i.stream(),scrollSeek:i.stream()};function r(e,t,o){i.connect(i.pipe(e,i.withLatestFrom(n.components),i.map(function(e){var n,r=e[0],i=e[1];return console.warn("react-virtuoso: "+o+" property is deprecated. Pass components."+t+" instead."),l({},i,((n={})[t]=r,n))})),n.components)}return i.subscribe(o.scrollSeek,function(e){var o=e.placeholder,r=s(e,kt);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),i.publish(n.components,l({},i.getValue(n.components),{ScrollSeekPlaceholder:o})),i.publish(t.scrollSeekConfiguration,r)}),r(o.ItemContainer,"Item","ItemContainer"),r(o.ListContainer,"List","ListContainer"),r(o.ScrollContainer,"Scroller","ScrollContainer"),l({},t,n,o)},i.tup(Ht,zt)),Pt=a.memo(function(){var e=Gt("gridState"),t=Gt("listClassName"),o=Gt("itemClassName"),r=Gt("itemContent"),i=Gt("computeItemKey"),a=Gt("isSeeking"),s=Dt("scrollHeight"),u=Gt("ItemComponent"),c=Gt("ListComponent"),m=Gt("ScrollSeekPlaceholder"),d=Gt("context"),f=Dt("itemDimensions"),p=Dt("gap"),h=Gt("log"),g=v(function(e){s(e.parentElement.parentElement.scrollHeight);var t=e.firstChild;t&&f(t.getBoundingClientRect()),p({row:qt("row-gap",getComputedStyle(e).rowGap,h),column:qt("column-gap",getComputedStyle(e).columnGap,h)})});return n.createElement(c,l({ref:g,className:t},nt(c,d),{style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom}}),e.items.map(function(t){var s=i(t.index,t.data,d);return a?n.createElement(m,l({key:s},nt(m,d),{index:t.index,height:e.itemHeight,width:e.itemWidth})):n.createElement(u,l({},nt(u,d),{className:o,"data-index":t.index,key:s}),r(t.index,t.data,d))}))}),Ot=a.memo(function(){var e=Gt("HeaderComponent"),t=Dt("headerHeight"),o=Gt("headerFooterTag"),r=v(function(e){return t(C(e,"height"))}),i=Gt("context");return e?n.createElement(o,{ref:r},n.createElement(e,nt(e,i))):null}),Vt=a.memo(function(){var e=Gt("FooterComponent"),t=Dt("footerHeight"),o=Gt("headerFooterTag"),r=v(function(e){return t(C(e,"height"))}),i=Gt("context");return e?n.createElement(o,{ref:r},n.createElement(e,nt(e,i))):null}),Mt=function(e){var t=e.children,o=n.useContext(Ne),r=Dt("itemDimensions"),i=Dt("viewportDimensions"),l=v(function(e){i(e.getBoundingClientRect())});return a.useEffect(function(){o&&(i({height:o.viewportHeight,width:o.viewportWidth}),r({height:o.itemHeight,width:o.itemWidth}))},[o,i,r]),a.createElement("div",{style:et,ref:l},t)},Wt=function(e){var t=e.children,o=n.useContext(Ne),r=Dt("windowViewportRect"),i=Dt("itemDimensions"),l=Gt("customScrollParent"),s=Ue(r,l);return a.useEffect(function(){o&&(i({height:o.itemHeight,width:o.itemWidth}),r({offsetTop:0,visibleHeight:o.viewportHeight,visibleWidth:o.viewportWidth}))},[o,r,i]),a.createElement("div",{ref:s,style:et},t)},Ut=a.memo(function(e){var t=l({},e),n=Gt("useWindowScroll"),o=Gt("customScrollParent"),r=o||n?Wt:Mt;return a.createElement(o||n?Kt:_t,l({},t),a.createElement(r,null,a.createElement(Ot,null),a.createElement(Pt,null),a.createElement(Vt,null)))}),At=e.systemToComponent(Bt,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},Ut),Nt=At.Component,Dt=At.usePublisher,Gt=At.useEmitterValue,jt=At.useEmitter,_t=it({usePublisher:Dt,useEmitterValue:Gt,useEmitter:jt}),Kt=at({usePublisher:Dt,useEmitterValue:Gt,useEmitter:jt});function qt(e,t,n){return"normal"===t||null!=t&&t.endsWith("px")||n(e+" was not resolved to pixel value correctly",t,exports.LogLevel.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}var Yt=i.system(function(){var e=i.statefulStream(function(e){return a.createElement("td",null,"Item $",e)}),t=i.statefulStream(null),n=i.statefulStream(null),o=i.statefulStream(null),r=i.statefulStream({}),l=i.statefulStream(_e),s=i.statefulStream(i.noop),u=function(e,t){return void 0===t&&(t=null),i.statefulStreamFromEmitter(i.pipe(r,i.map(function(t){return t[e]}),i.distinctUntilChanged()),t)};return{context:t,itemContent:e,fixedHeaderContent:n,fixedFooterContent:o,components:r,computeItemKey:l,scrollerRef:s,TableComponent:u("Table","table"),TableHeadComponent:u("TableHead","thead"),TableFooterComponent:u("TableFoot","tfoot"),TableBodyComponent:u("TableBody","tbody"),TableRowComponent:u("TableRow","tr"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder"),FillerRow:u("FillerRow")}}),Zt=i.system(function(e){return l({},e[0],e[1])},i.tup(Me,Yt)),Jt=function(e){return a.createElement("tr",null,a.createElement("td",{style:{height:e.height}}))},$t=function(e){return a.createElement("tr",null,a.createElement("td",{style:{height:e.height,padding:0,border:0}}))},Qt=a.memo(function(){var e=an("listState"),t=rn("sizeRanges"),o=an("useWindowScroll"),r=an("customScrollParent"),i=rn("windowScrollContainerState"),s=rn("scrollContainerState"),u=r||o?i:s,c=an("itemContent"),m=an("trackItemSizes"),d=S(t,an("itemSize"),m,u,an("log"),void 0,r),f=d.callbackRef,p=d.ref,h=a.useState(0),g=h[0],v=h[1];ln("deviation",function(e){g!==e&&(p.current.style.marginTop=e+"px",v(e))});var C=an("EmptyPlaceholder"),x=an("ScrollSeekPlaceholder")||Jt,I=an("FillerRow")||$t,T=an("TableBodyComponent"),w=an("TableRowComponent"),b=an("computeItemKey"),y=an("isSeeking"),E=an("paddingTopAddition"),H=an("firstItemIndex"),L=an("statefulTotalCount"),R=an("context");if(0===L&&C)return n.createElement(C,nt(C,R));var F=e.offsetTop+E+g,k=e.offsetBottom,z=F>0?a.createElement(I,{height:F,key:"padding-top"}):null,B=k>0?a.createElement(I,{height:k,key:"padding-bottom"}):null,P=e.items.map(function(e){var t=e.originalIndex,o=b(t+H,e.data,R);return y?n.createElement(x,l({},nt(x,R),{key:o,index:e.index,height:e.size,type:e.type||"item"})):n.createElement(w,l({},nt(w,R),{key:o,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:{overflowAnchor:"none"}}),c(e.index,e.data,R))});return n.createElement(T,l({ref:f,"data-test-id":"virtuoso-item-list"},nt(T,R)),[z].concat(P,[B]))}),Xt=function(e){var t=e.children,o=n.useContext(Ae),r=rn("viewportHeight"),l=rn("fixedItemHeight"),s=v(i.compose(r,function(e){return C(e,"height")}));return a.useEffect(function(){o&&(r(o.viewportHeight),l(o.itemHeight))},[o,r,l]),a.createElement("div",{style:et,ref:s,"data-viewport-type":"element"},t)},en=function(e){var t=e.children,o=n.useContext(Ae),r=rn("windowViewportRect"),i=rn("fixedItemHeight"),l=an("customScrollParent"),s=Ue(r,l);return a.useEffect(function(){o&&(i(o.itemHeight),r({offsetTop:0,visibleHeight:o.viewportHeight,visibleWidth:100}))},[o,r,i]),a.createElement("div",{ref:s,style:et,"data-viewport-type":"window"},t)},tn=a.memo(function(e){var t=an("useWindowScroll"),n=an("customScrollParent"),o=rn("fixedHeaderHeight"),r=rn("fixedFooterHeight"),s=an("fixedHeaderContent"),u=an("fixedFooterContent"),c=an("context"),m=v(i.compose(o,function(e){return C(e,"height")})),d=v(i.compose(r,function(e){return C(e,"height")})),f=n||t?un:sn,p=n||t?en:Xt,h=an("TableComponent"),g=an("TableHeadComponent"),S=an("TableFooterComponent"),x=s?a.createElement(g,l({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:m},nt(g,c)),s()):null,I=u?a.createElement(S,l({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:d},nt(S,c)),u()):null;return a.createElement(f,l({},e),a.createElement(p,null,a.createElement(h,l({style:{borderSpacing:0}},nt(h,c)),[x,a.createElement(Qt,{key:"TableBody"}),I])))}),nn=e.systemToComponent(Zt,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},tn),on=nn.Component,rn=nn.usePublisher,an=nn.useEmitterValue,ln=nn.useEmitter,sn=it({usePublisher:rn,useEmitterValue:an,useEmitter:ln}),un=at({usePublisher:rn,useEmitterValue:an,useEmitter:ln}),cn=dt,mn=on,dn=Nt;exports.GroupedVirtuoso=dt,exports.TableVirtuoso=mn,exports.Virtuoso=cn,exports.VirtuosoGrid=dn,exports.VirtuosoGridMockContext=Ne,exports.VirtuosoMockContext=Ae;
//# sourceMappingURL=index.js.map
