{"version":3,"sources":["getBlobDuration.js"],"names":["getBlobDuration","_callee","blob","tempVideoEl","durationP","_regenerator","wrap","_context","prev","next","document","createElement","Promise","resolve","reject","addEventListener","duration","Infinity","currentTime","Number","MAX_SAFE_INTEGER","ontimeupdate","onerror","event","target","error","src","String","window","URL","createObjectURL","abrupt","stop"],"mappings":"6WAK8BA,8KAAf,SAAAC,EAA+BC,GAA/B,IAAAC,EAAAC,EAAA,OAAAC,aAAA,QAAAC,KAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OACPN,EAAcO,SAASC,cAAc,SAErCP,EAAY,IAAIQ,QAAQ,SAACC,EAASC,GACtCX,EAAYY,iBAAiB,iBAAkB,WAE1CZ,EAAYa,WAAaC,EAAAA,GAC1Bd,EAAYe,YAAcC,OAAOC,iBAZzCjB,EAAAkB,aAAA,WAcUlB,EAAYkB,aAAe,KAC3BR,EAAQV,EAAYa,UACpBb,EAAYe,YAAc,IAK5BL,EAAQV,EAAYa,YAExBb,EAAYmB,QAAU,SAACC,GAAD,OAAWT,EAAOS,EAAMC,OAAOC,UAlB1CtB,EAAAuB,IAAA,iBAAAxB,GAAAA,aAAAyB,OAAAzB,EAAA0B,OAAAC,IAAAC,gBAAA5B,GAAAK,EAAAwB,OAAA,SAGP3B,GAHO,KAAA,EAAA,IAAA,MAAA,OAAAG,EAAAyB,SAAA/B","file":"getBlobDuration.js","sourcesContent":["/**\n * @param {Blob|String} blob\n *\n * @returns {Promise<Number>} Blob duration in seconds.\n */\nexport default async function getBlobDuration(blob) {\n  const tempVideoEl = document.createElement('video')\n\n  const durationP = new Promise((resolve, reject) => {\n    tempVideoEl.addEventListener('loadedmetadata', () => {\n      // Chrome bug: https://bugs.chromium.org/p/chromium/issues/detail?id=642012\n      if(tempVideoEl.duration === Infinity) {\n        tempVideoEl.currentTime = Number.MAX_SAFE_INTEGER\n        tempVideoEl.ontimeupdate = () => {\n          tempVideoEl.ontimeupdate = null\n          resolve(tempVideoEl.duration)\n          tempVideoEl.currentTime = 0\n        }\n      }\n      // Normal behavior\n      else\n        resolve(tempVideoEl.duration)\n    })\n    tempVideoEl.onerror = (event) => reject(event.target.error)\n  })\n\n  tempVideoEl.src = typeof blob === 'string' || blob instanceof String\n    ? blob\n    : window.URL.createObjectURL(blob)\n\n  return durationP\n}\n"]}