{
  "manifest": {
    "name": "ytdl-core",
    "description": "YouTube video downloader in pure javascript.",
    "keywords": [
      "youtube",
      "video",
      "download"
    ],
    "version": "4.11.2",
    "repository": {
      "type": "git",
      "url": "git://github.com/fent/node-ytdl-core.git"
    },
    "author": {
      "name": "fent",
      "email": "fentbox@gmail.com",
      "url": "https://github.com/fent"
    },
    "contributors": [
      {
        "name": "Tobias Kutscha",
        "url": "https://github.com/TimeForANinja"
      },
      {
        "name": "Andrew Kelley",
        "url": "https://github.com/andrewrk"
      },
      {
        "name": "Mauricio Allende",
        "url": "https://github.com/mallendeo"
      },
      {
        "name": "Rodrigo Altamirano",
        "url": "https://github.com/raltamirano"
      },
      {
        "name": "Jim Buck",
        "url": "https://github.com/JimmyBoh"
      },
      {
        "name": "Paweł Ruciński",
        "url": "https://github.com/Roki100"
      },
      {
        "name": "Alexander Paolini",
        "url": "https://github.com/Million900o"
      }
    ],
    "main": "./lib/index.js",
    "types": "./typings/index.d.ts",
    "files": [
      "lib",
      "typings"
    ],
    "scripts": {
      "test": "nyc --reporter=lcov --reporter=text-summary npm run test:unit",
      "test:unit": "mocha --ignore test/irl-test.js test/*-test.js --timeout 4000",
      "test:irl": "mocha --timeout 16000 test/irl-test.js",
      "lint": "eslint ./",
      "lint:fix": "eslint --fix ./",
      "lint:typings": "tslint typings/index.d.ts",
      "lint:typings:fix": "tslint --fix typings/index.d.ts"
    },
    "dependencies": {
      "m3u8stream": "^0.8.6",
      "miniget": "^4.2.2",
      "sax": "^1.1.3"
    },
    "devDependencies": {
      "@types/node": "^13.1.0",
      "assert-diff": "^3.0.1",
      "dtslint": "^3.6.14",
      "eslint": "^6.8.0",
      "mocha": "^7.0.0",
      "muk-require": "^1.2.0",
      "nock": "^13.0.4",
      "nyc": "^15.0.0",
      "sinon": "^9.0.0",
      "stream-equal": "~1.1.0",
      "typescript": "^3.9.7"
    },
    "engines": {
      "node": ">=12"
    },
    "license": "MIT",
    "_registry": "npm",
    "_loc": "/home/brunomiguel/userrepository/pkgbuild/cerebro/src/yarn-cache/v6/npm-ytdl-core-4.11.2-c2341916b9757171741a2fa118b6ffbb4ffd92f7-integrity/node_modules/ytdl-core/package.json",
    "readmeFilename": "README.md",
    "readme": "# node-ytdl-core\n\n![Depfu](https://img.shields.io/depfu/fent/node-ytdl-core)\n[![codecov](https://codecov.io/gh/fent/node-ytdl-core/branch/master/graph/badge.svg)](https://codecov.io/gh/fent/node-ytdl-core)\n[![Discord](https://img.shields.io/discord/484464227067887645.svg)](https://discord.gg/V3vSCs7)\n\nYet another YouTube downloading module. Written with only Javascript and a node-friendly streaming interface.\n\n# Support\nYou can contact us for support on our [chat server](https://discord.gg/V3vSCs7)\n\n# Usage\n\n```js\nconst fs = require('fs');\nconst ytdl = require('ytdl-core');\n// TypeScript: import ytdl from 'ytdl-core'; with --esModuleInterop\n// TypeScript: import * as ytdl from 'ytdl-core'; with --allowSyntheticDefaultImports\n// TypeScript: import ytdl = require('ytdl-core'); with neither of the above\n\nytdl('http://www.youtube.com/watch?v=aqz-KE-bpKQ')\n  .pipe(fs.createWriteStream('video.mp4'));\n```\n\n\n# API\n### ytdl(url, [options])\n\nAttempts to download a video from the given url. Returns a [readable stream](https://nodejs.org/api/stream.html#stream_class_stream_readable). `options` can have the following, in addition to any [`getInfo()` option](#async-ytdlgetinfourl-options) and [`chooseFormat()` option](#ytdlchooseformatformats-options).\n\n* `range` - A byte range in the form `{start: INT, end: INT}` that specifies part of the file to download, ie {start: 10355705, end: 12452856}. Not supported on segmented (DASH MPD, m3u8) formats.\n  * This downloads a portion of the file, and not a separately spliced video.\n* `begin` - What time in the video to begin. Supports formats `00:00:00.000`, `0ms, 0s, 0m, 0h`, or number of milliseconds. Example: `1:30`, `05:10.123`, `10m30s`.\n  * For live videos, this also accepts a unix timestamp or Date object, and defaults to `Date.now()`.\n  * This option is not very reliable for non-live videos, see [#129](https://github.com/fent/node-ytdl-core/issues/129) and [#219](https://github.com/fent/node-ytdl-core/issues/219).\n* `liveBuffer` - How much time buffer to use for live videos in milliseconds. Default is `20000`.\n* `highWaterMark` - How much of the video download to buffer into memory. See [node's docs](https://nodejs.org/api/stream.html#stream_constructor_new_stream_writable_options) for more. Defaults to 512KB.\n* `dlChunkSize` - When the chosen format is video only or audio only, the download is separated into multiple chunks to avoid throttling. This option specifies the size of each chunk in bytes. Setting it to 0 disables chunking. Defaults to 10MB.\n* `IPv6Block` - IPv6 block to rotate through, an alternative to using a proxy. [Read more](#how-does-using-an-ipv6-block-help). Defaults to `undefined`.\n\n#### Event: info\n* [`ytdl.videoInfo`](typings/index.d.ts#L194) - Info.\n* [`ytdl.videoFormat`](typings/index.d.ts#L22) - Video Format.\n\nEmitted when the video's `info` is fetched, along with the chosen format to download.\n\n#### Event: progress\n* `number` - Chunk length in bytes or segment number.\n* `number` - Total bytes or segments downloaded.\n* `number` - Total bytes or segments.\n\nEmitted whenever a new chunk is received. Passes values describing the download progress.\n\n#### miniget events\n\nAll [miniget events](https://github.com/fent/node-miniget#event-redirect) are forwarded and can be listened to from the returned stream.\n\n### Stream#destroy()\n\nCall to abort and stop downloading a video.\n\n### async ytdl.getBasicInfo(url, [options])\n\nUse this if you only want to get metainfo from a video.\n\n### async ytdl.getInfo(url, [options])\n\nGets metainfo from a video. Includes additional formats, and ready to download deciphered URL. This is what the `ytdl()` function uses internally.\n\n`options` can have the following\n\n* `requestOptions` - Anything to merge into the request options which [miniget](https://github.com/fent/node-miniget) is called with, such as `headers`.\n* `requestCallback` - Provide a callback function that receives miniget request stream objects used while fetching metainfo.\n* `lang` - The 2 character symbol of a language. Default is `en`.\n\n### ytdl.downloadFromInfo(info, options)\n\nOnce you have received metadata from a video with the `ytdl.getInfo` function, you may pass that information along with other options to this function.\n\n### ytdl.chooseFormat(formats, options)\n\nCan be used if you'd like to choose a format yourself. Throws an Error if it fails to find any matching format.\n\n`options` can have the following\n\n* `quality` - Video quality to download. Can be an [itag value](http://en.wikipedia.org/wiki/YouTube#Quality_and_formats), a list of itag values, or one of these strings: `highest`/`lowest`/`highestaudio`/`lowestaudio`/`highestvideo`/`lowestvideo`. `highestaudio`/`lowestaudio` try to minimize video bitrate for equally good audio formats while `highestvideo`/`lowestvideo` try to minimize audio respectively. Defaults to `highest`, which prefers formats with both video and audio.\n\n  A typical video's formats will be sorted in the following way using `quality: 'highest'`\n  ```\n  itag container quality codecs                 bitrate  audio bitrate\n  18   mp4       360p    avc1.42001E, mp4a.40.2 696.66KB 96KB\n  137  mp4       1080p   avc1.640028            4.53MB\n  248  webm      1080p   vp9                    2.52MB\n  136  mp4       720p    avc1.4d4016            2.2MB\n  247  webm      720p    vp9                    1.44MB\n  135  mp4       480p    avc1.4d4014            1.1MB\n  134  mp4       360p    avc1.4d401e            593.26KB\n  140  mp4               mp4a.40.2                       128KB\n  ```\n  format 18 at 360p will be chosen first since it's the highest quality format with both video and audio. If you'd like a higher quality format with both video and audio, see the section on [handling separate streams](#handling-separate-streams).\n* `filter` - Used to filter the list of formats to choose from. Can be `audioandvideo` or `videoandaudio` to filter formats that contain both video and audio, `video` to filter for formats that contain video, or `videoonly` for formats that contain video and no additional audio track. Can also be `audio` or `audioonly`. You can give a filtering function that gets called with each format available. This function is given the `format` object as its first argument, and should return true if the format is preferable.\n  ```js\n  // Example with custom function.\n  ytdl(url, { filter: format => format.container === 'mp4' })\n  ```\n* `format` - Primarily used to download specific video or audio streams. This can be a specific `format` object returned from `getInfo`.\n  * Supplying this option will ignore the `filter` and `quality` options since the format is explicitly provided.\n\n```js\n// Example of choosing a video format.\nlet info = await ytdl.getInfo(videoID);\nlet format = ytdl.chooseFormat(info.formats, { quality: '134' });\nconsole.log('Format found!', format);\n```\n\n### ytdl.filterFormats(formats, filter)\n\nIf you'd like to work with only some formats, you can use the [`filter` option above](#ytdlurl-options).\n\n```js\n// Example of filtering the formats to audio only.\nlet info = await ytdl.getInfo(videoID);\nlet audioFormats = ytdl.filterFormats(info.formats, 'audioonly');\nconsole.log('Formats with only audio: ' + audioFormats.length);\n```\n\n### ytdl.validateID(id)\n\nReturns true if the given string satisfies YouTube's ID format.\n\n### ytdl.validateURL(url)\n\nReturns true if able to parse out a valid video ID.\n\n### ytdl.getURLVideoID(url)\n\nReturns a video ID from a YouTube URL.\nThrows an Error if it fails to parse an ID.\n\n### ytdl.getVideoID(str)\n\nSame as the above `ytdl.getURLVideoID()`, but can be called with the video ID directly, in which case it returns it. This is what ytdl uses internally.\nThrows an Error if it fails to parse an ID.\n\n### ytdl.version\n\nThe version string taken directly from the package.json.\n\n## Limitations\n\nytdl cannot download videos that fall into the following\n* Regionally restricted (requires a [proxy](example/proxy.js))\n* Private (if you have access, requires [cookies](example/cookies.js))\n* Rentals (if you have access, requires [cookies](example/cookies.js))\n* YouTube Premium content (if you have access, requires [cookies](example/cookies.js))\n* Only [HLS Livestreams](https://en.wikipedia.org/wiki/HTTP_Live_Streaming) are currently supported. Other formats will get filtered out in ytdl.chooseFormats\n\nGenerated download links are valid for 6 hours, and may only be downloadable from the same IP address.\n\n### Ratelimits\nWhen doing to many requests YouTube might block. This will result in your requests getting denied with HTTP-StatusCode 429. The following Steps might help you:\n* Update ytdl-core to the latest version\n* Use proxies (you can find an example [here](https://github.com/fent/node-ytdl-core/blob/master/example/proxy.js))\n* Extend on the Proxy Idea by rotating (IPv6-)Addresses\n  * read [this](#How-does-using-an-IPv6-block-help?) for more information about this\n* Use cookies (you can find an example [here](https://github.com/fent/node-ytdl-core/blob/master/example/cookies.js))\n  * for this to take effect you have to FIRST wait for the current ratelimit to expire\n* Wait it out (it usually goes away within a few days)\n\n#### How does using an IPv6 block help?\n\nFor request-intensive tasks it might be useful to spread your requests across multiple source IP-Addresses. Changing the source IP that you use is similar to using a proxy, except without bypassing restrictions such as a region lock. More IP-Addresses result in less requests per IP and therefor increase your ratelimit. Since IPv4 Addresses are a limited Resource we advise to use IPv6.\n\nUsing an IPv6 block is essentially having millions of IPv6 addresses at your request. In a /64 IPv6 block (which is usually the Block given to a single Household), there are 18,446,744,073,709,551,616 unique IPv6 addresses. This would allow you to make each request with a different IPv6 address.\n\nEven though using an IP-Block does help against ratelimits it requires you to setup your host system to accept http traffic from every message in an IP-Block. We can not help you with the setup for any specific host / hosting provider but searching the internet most likely can.\n\n## Handling Separate Streams\n\nTypically 1080p or better videos do not have audio encoded with it. The audio must be downloaded separately and merged via an encoding library. `ffmpeg` is the most widely used tool, with many [Node.js modules available](https://www.npmjs.com/search?q=ffmpeg). Use the `format` objects returned from `ytdl.getInfo` to download specific streams to combine to fit your needs. Look at [example/ffmpeg.js](example/ffmpeg.js) for an example on doing this.\n\n## What if it stops working?\n\nYouTube updates their website all the time, it's not that rare for this to stop working. If it doesn't work for you and you're using the latest version, feel free to open up an issue. Make sure to check if there isn't one already with the same error.\n\nRun the tests at `test/irl-test.js` to make sure this is really an issue with ytdl-core.\n\n    npm run test:irl\n\nThese tests are not mocked, they try to start downloading a few videos. If these fail, then it's time to debug. If the error you're getting is signature deciphering, check `lib/sig.js`. Otherwise, the error is likely within `lib/info.js`.\n\n# Install\n\n```bash\nnpm install ytdl-core@latest\n```\n\nOr for Yarn users:\n```bash\nyarn add ytdl-core@latest\n```\n\nMake sure you're installing the latest version of ytdl-core to keep up with the latest fixes.\n\nIf you're using a bot or app that uses ytdl-core such as [ytdl-core-discord](https://github.com/amishshah/ytdl-core-discord) or [discord-player](https://github.com/Androz2091/discord-player), it may be dependent on an older version. To update its ytdl-core version, that library has to update its `package.json` file, you can't simply change the version on your project's `package.json`, the app will still use its own older version of ytdl-core.\n\nLook in their repo to see if they already have an active pull request that updates ytdl-core. If they don't, open an issue asking them to update ytdl-core, or better yet, fork the project and submit a pull request with the updated version.\n\nWhile you wait for the pull reques to merge, you can point to its branch in your `package.json`\n\n```json\n  \"ytdl-core-discord\": \"amishshah/ytdl-core-discord#dependabot/npm_and_yarn/ytdl-core-2.0.1\"\n```\n\n## Update Checks\n\nThe issue of using an outdated version of ytdl-core became so prevalent, that ytdl-core now checks for updates at run time, and every 12 hours. If it finds an update, it will print a warning to the console advising you to update. Due to the nature of this library, it is important to always use the latest version as YouTube continues to update.\n\nIf you'd like to disable this update check, you can do so by providing the `YTDL_NO_UPDATE` env variable.\n\n```\nenv YTDL_NO_UPDATE=1 node myapp.js\n```\n\n# Related Projects\n\n- [ytdl](https://github.com/fent/node-ytdl) - A cli wrapper of this.\n- [pully](https://github.com/JimmyBoh/pully) - Another cli wrapper of this aimed at high quality formats.\n- [ytsr](https://github.com/TimeForANinja/node-ytsr) - YouTube video search results.\n- [ytpl](https://github.com/TimeForANinja/node-ytpl) - YouTube playlist and channel resolver.\n\n\n# Tests\nTests are written with [mocha](https://mochajs.org)\n\n```bash\nnpm test\n```\n",
    "licenseText": "MIT License\n\nCopyright (C) 2012-present by fent\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. \n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/ytdl-core/-/ytdl-core-4.11.2.tgz#c2341916b9757171741a2fa118b6ffbb4ffd92f7",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/ytdl-core/-/ytdl-core-4.11.2.tgz",
    "hash": "c2341916b9757171741a2fa118b6ffbb4ffd92f7",
    "integrity": "sha512-D939t9b4ZzP3v0zDvehR2q+KgG97UTgrTKju3pOPGQcXtl4W6W5z0EpznzcJFu+OOpl7S7Ge8hv8zU65QnxYug==",
    "registry": "npm",
    "packageName": "ytdl-core",
    "cacheIntegrity": "sha512-D939t9b4ZzP3v0zDvehR2q+KgG97UTgrTKju3pOPGQcXtl4W6W5z0EpznzcJFu+OOpl7S7Ge8hv8zU65QnxYug== sha1-wjQZFrl1cXF0Gi+hGLb/u0/9kvc="
  },
  "registry": "npm",
  "hash": "c2341916b9757171741a2fa118b6ffbb4ffd92f7"
}