#!/usr/bin/env node
"use strict";
var _asyncOra = require("@electron-forge/async-ora");
var _chalk = _interopRequireDefault(require("chalk"));
var _commander = _interopRequireDefault(require("commander"));
require("./util/terminate");
var _checkSystem = _interopRequireDefault(require("./util/check-system"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// eslint-disable-next-line @typescript-eslint/no-var-requires
const metadata = require('../package.json');
const originalSC = _commander.default.executeSubCommand.bind(_commander.default);
_commander.default.executeSubCommand = (argv, args, unknown)=>{
    let indexOfDoubleDash = process.argv.indexOf('--');
    indexOfDoubleDash = indexOfDoubleDash < 0 ? process.argv.length + 1 : indexOfDoubleDash;
    const passThroughArgs = args.filter((arg)=>process.argv.indexOf(arg) > indexOfDoubleDash
    );
    const normalArgs = args.filter((arg)=>process.argv.indexOf(arg) <= indexOfDoubleDash
    );
    let newArgs = args;
    let newUnknown = unknown;
    if (passThroughArgs.length > 0) {
        newArgs = normalArgs.concat(unknown).concat('--').concat(passThroughArgs);
        newUnknown = [];
    }
    return originalSC(argv, newArgs, newUnknown);
};
_commander.default.version(metadata.version).option('--verbose', 'Enables verbose mode').command('init', 'Initialize a new Electron application').command('import', 'Attempts to navigate you through the process of importing an existing project to "electron-forge"').command('lint', 'Lints the current Electron application').command('package', 'Package the current Electron application').command('make', 'Generate distributables for the current Electron application').command('start', 'Start the current Electron application').command('publish', 'Publish the current Electron application to GitHub').command('install', 'Install an Electron application from GitHub').on('command:*', (commands)=>{
    // eslint-disable-next-line no-underscore-dangle
    if (!_commander.default._execs.has(commands[0])) {
        console.error();
        console.error(_chalk.default.red(`Unknown command "${_commander.default.args.join(' ')}".`));
        console.error('See --help for a list of available commands.');
        process.exit(1);
    }
});
(async ()=>{
    let goodSystem;
    await (0, _asyncOra).asyncOra('Checking your system', async (ora)=>{
        goodSystem = await (0, _checkSystem).default(ora);
    });
    if (!goodSystem) {
        console.error(_chalk.default.red(`It looks like you are missing some dependencies you need to get Electron running.
Make sure you have git installed and Node.js version ${metadata.engines.node}`));
        process.exit(1);
    }
    _commander.default.parse(process.argv);
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGVjdHJvbi1mb3JnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIjIS91c3IvYmluL2VudiBub2RlXG4vLyBUaGlzIGZpbGUgcmVxdWlyZXMgYSBzaGViYW5nIGFib3ZlLiBJZiBpdCBpcyBtaXNzaW5nLCB0aGlzIGlzIGFuIGVycm9yLlxuXG5pbXBvcnQgeyBhc3luY09yYSB9IGZyb20gJ0BlbGVjdHJvbi1mb3JnZS9hc3luYy1vcmEnO1xuaW1wb3J0IGNoYWxrIGZyb20gJ2NoYWxrJztcbmltcG9ydCBwcm9ncmFtIGZyb20gJ2NvbW1hbmRlcic7XG5cbmltcG9ydCAnLi91dGlsL3Rlcm1pbmF0ZSc7XG5cbmltcG9ydCBjaGVja1N5c3RlbSBmcm9tICcuL3V0aWwvY2hlY2stc3lzdGVtJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXNcbmNvbnN0IG1ldGFkYXRhID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJyk7XG5cbmNvbnN0IG9yaWdpbmFsU0MgPSBwcm9ncmFtLmV4ZWN1dGVTdWJDb21tYW5kLmJpbmQocHJvZ3JhbSk7XG5wcm9ncmFtLmV4ZWN1dGVTdWJDb21tYW5kID0gKGFyZ3Y6IHN0cmluZ1tdLCBhcmdzOiBzdHJpbmdbXSwgdW5rbm93bjogc3RyaW5nW10pID0+IHtcbiAgbGV0IGluZGV4T2ZEb3VibGVEYXNoID0gcHJvY2Vzcy5hcmd2LmluZGV4T2YoJy0tJyk7XG4gIGluZGV4T2ZEb3VibGVEYXNoID0gaW5kZXhPZkRvdWJsZURhc2ggPCAwID8gcHJvY2Vzcy5hcmd2Lmxlbmd0aCArIDEgOiBpbmRleE9mRG91YmxlRGFzaDtcblxuICBjb25zdCBwYXNzVGhyb3VnaEFyZ3MgPSBhcmdzLmZpbHRlcigoYXJnKSA9PiBwcm9jZXNzLmFyZ3YuaW5kZXhPZihhcmcpID4gaW5kZXhPZkRvdWJsZURhc2gpO1xuICBjb25zdCBub3JtYWxBcmdzID0gYXJncy5maWx0ZXIoKGFyZykgPT4gcHJvY2Vzcy5hcmd2LmluZGV4T2YoYXJnKSA8PSBpbmRleE9mRG91YmxlRGFzaCk7XG5cbiAgbGV0IG5ld0FyZ3MgPSBhcmdzO1xuICBsZXQgbmV3VW5rbm93biA9IHVua25vd247XG4gIGlmIChwYXNzVGhyb3VnaEFyZ3MubGVuZ3RoID4gMCkge1xuICAgIG5ld0FyZ3MgPSBub3JtYWxBcmdzLmNvbmNhdCh1bmtub3duKS5jb25jYXQoJy0tJykuY29uY2F0KHBhc3NUaHJvdWdoQXJncyk7XG4gICAgbmV3VW5rbm93biA9IFtdO1xuICB9XG4gIHJldHVybiBvcmlnaW5hbFNDKGFyZ3YsIG5ld0FyZ3MsIG5ld1Vua25vd24pO1xufTtcblxucHJvZ3JhbVxuICAudmVyc2lvbihtZXRhZGF0YS52ZXJzaW9uKVxuICAub3B0aW9uKCctLXZlcmJvc2UnLCAnRW5hYmxlcyB2ZXJib3NlIG1vZGUnKVxuICAuY29tbWFuZCgnaW5pdCcsICdJbml0aWFsaXplIGEgbmV3IEVsZWN0cm9uIGFwcGxpY2F0aW9uJylcbiAgLmNvbW1hbmQoJ2ltcG9ydCcsICdBdHRlbXB0cyB0byBuYXZpZ2F0ZSB5b3UgdGhyb3VnaCB0aGUgcHJvY2VzcyBvZiBpbXBvcnRpbmcgYW4gZXhpc3RpbmcgcHJvamVjdCB0byBcImVsZWN0cm9uLWZvcmdlXCInKVxuICAuY29tbWFuZCgnbGludCcsICdMaW50cyB0aGUgY3VycmVudCBFbGVjdHJvbiBhcHBsaWNhdGlvbicpXG4gIC5jb21tYW5kKCdwYWNrYWdlJywgJ1BhY2thZ2UgdGhlIGN1cnJlbnQgRWxlY3Ryb24gYXBwbGljYXRpb24nKVxuICAuY29tbWFuZCgnbWFrZScsICdHZW5lcmF0ZSBkaXN0cmlidXRhYmxlcyBmb3IgdGhlIGN1cnJlbnQgRWxlY3Ryb24gYXBwbGljYXRpb24nKVxuICAuY29tbWFuZCgnc3RhcnQnLCAnU3RhcnQgdGhlIGN1cnJlbnQgRWxlY3Ryb24gYXBwbGljYXRpb24nKVxuICAuY29tbWFuZCgncHVibGlzaCcsICdQdWJsaXNoIHRoZSBjdXJyZW50IEVsZWN0cm9uIGFwcGxpY2F0aW9uIHRvIEdpdEh1YicpXG4gIC5jb21tYW5kKCdpbnN0YWxsJywgJ0luc3RhbGwgYW4gRWxlY3Ryb24gYXBwbGljYXRpb24gZnJvbSBHaXRIdWInKVxuICAub24oJ2NvbW1hbmQ6KicsIChjb21tYW5kcykgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlcnNjb3JlLWRhbmdsZVxuICAgIGlmICghcHJvZ3JhbS5fZXhlY3MuaGFzKGNvbW1hbmRzWzBdKSkge1xuICAgICAgY29uc29sZS5lcnJvcigpO1xuICAgICAgY29uc29sZS5lcnJvcihjaGFsay5yZWQoYFVua25vd24gY29tbWFuZCBcIiR7cHJvZ3JhbS5hcmdzLmpvaW4oJyAnKX1cIi5gKSk7XG4gICAgICBjb25zb2xlLmVycm9yKCdTZWUgLS1oZWxwIGZvciBhIGxpc3Qgb2YgYXZhaWxhYmxlIGNvbW1hbmRzLicpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfSk7XG5cbihhc3luYyAoKSA9PiB7XG4gIGxldCBnb29kU3lzdGVtO1xuICBhd2FpdCBhc3luY09yYSgnQ2hlY2tpbmcgeW91ciBzeXN0ZW0nLCBhc3luYyAob3JhKSA9PiB7XG4gICAgZ29vZFN5c3RlbSA9IGF3YWl0IGNoZWNrU3lzdGVtKG9yYSk7XG4gIH0pO1xuXG4gIGlmICghZ29vZFN5c3RlbSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBjaGFsay5yZWQoYEl0IGxvb2tzIGxpa2UgeW91IGFyZSBtaXNzaW5nIHNvbWUgZGVwZW5kZW5jaWVzIHlvdSBuZWVkIHRvIGdldCBFbGVjdHJvbiBydW5uaW5nLlxuTWFrZSBzdXJlIHlvdSBoYXZlIGdpdCBpbnN0YWxsZWQgYW5kIE5vZGUuanMgdmVyc2lvbiAke21ldGFkYXRhLmVuZ2luZXMubm9kZX1gKVxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgcHJvZ3JhbS5wYXJzZShwcm9jZXNzLmFyZ3YpO1xufSkoKTtcbiJdLCJuYW1lcyI6WyJtZXRhZGF0YSIsInJlcXVpcmUiLCJvcmlnaW5hbFNDIiwicHJvZ3JhbSIsImV4ZWN1dGVTdWJDb21tYW5kIiwiYmluZCIsImFyZ3YiLCJhcmdzIiwidW5rbm93biIsImluZGV4T2ZEb3VibGVEYXNoIiwicHJvY2VzcyIsImluZGV4T2YiLCJsZW5ndGgiLCJwYXNzVGhyb3VnaEFyZ3MiLCJmaWx0ZXIiLCJhcmciLCJub3JtYWxBcmdzIiwibmV3QXJncyIsIm5ld1Vua25vd24iLCJjb25jYXQiLCJ2ZXJzaW9uIiwib3B0aW9uIiwiY29tbWFuZCIsIm9uIiwiY29tbWFuZHMiLCJfZXhlY3MiLCJoYXMiLCJjb25zb2xlIiwiZXJyb3IiLCJjaGFsayIsInJlZCIsImpvaW4iLCJleGl0IiwiZ29vZFN5c3RlbSIsImFzeW5jT3JhIiwib3JhIiwiY2hlY2tTeXN0ZW0iLCJlbmdpbmVzIiwibm9kZSIsInBhcnNlIl0sIm1hcHBpbmdzIjoiOztBQUd5QixHQUEyQixDQUEzQixTQUEyQjtBQUNsQyxHQUFPLENBQVAsTUFBTztBQUNMLEdBQVcsQ0FBWCxVQUFXOztBQUlQLEdBQXFCLENBQXJCLFlBQXFCOzs7Ozs7QUFFN0MsRUFBOEQsQUFBOUQsNERBQThEO0FBQzlELEtBQUssQ0FBQ0EsUUFBUSxHQUFHQyxPQUFPLENBQUMsQ0FBaUI7QUFFMUMsS0FBSyxDQUFDQyxVQUFVLEdBQUdDLFVBQU8sU0FBQ0MsaUJBQWlCLENBQUNDLElBQUksQ0FBQ0YsVUFBTztBQUN6REEsVUFBTyxTQUFDQyxpQkFBaUIsSUFBSUUsSUFBYyxFQUFFQyxJQUFjLEVBQUVDLE9BQWlCLEdBQUssQ0FBQztJQUNsRixHQUFHLENBQUNDLGlCQUFpQixHQUFHQyxPQUFPLENBQUNKLElBQUksQ0FBQ0ssT0FBTyxDQUFDLENBQUk7SUFDakRGLGlCQUFpQixHQUFHQSxpQkFBaUIsR0FBRyxDQUFDLEdBQUdDLE9BQU8sQ0FBQ0osSUFBSSxDQUFDTSxNQUFNLEdBQUcsQ0FBQyxHQUFHSCxpQkFBaUI7SUFFdkYs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