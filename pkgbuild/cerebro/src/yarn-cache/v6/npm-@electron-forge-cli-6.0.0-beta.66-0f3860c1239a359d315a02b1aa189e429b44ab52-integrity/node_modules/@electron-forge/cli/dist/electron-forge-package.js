"use strict";
var _core = require("@electron-forge/core");
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _get = require("@electron/get");
var _commander = _interopRequireDefault(require("commander"));
var _path = _interopRequireDefault(require("path"));
require("./util/terminate");
var _workingDir = _interopRequireDefault(require("./util/working-dir"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
(async ()=>{
    let dir = process.cwd();
    _commander.default.version((await _fsExtra.default.readJson(_path.default.resolve(__dirname, '../package.json'))).version).arguments('[cwd]').option('-a, --arch [arch]', 'Target architecture').option('-p, --platform [platform]', 'Target build platform').action((cwd)=>{
        dir = (0, _workingDir).default(dir, cwd);
    }).parse(process.argv);
    (0, _get).initializeProxy();
    const packageOpts = {
        dir,
        interactive: true
    };
    if (_commander.default.arch) packageOpts.arch = _commander.default.arch;
    if (_commander.default.platform) packageOpts.platform = _commander.default.platform;
    await _core.api.package(packageOpts);
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGVjdHJvbi1mb3JnZS1wYWNrYWdlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFwaSwgUGFja2FnZU9wdGlvbnMgfSBmcm9tICdAZWxlY3Ryb24tZm9yZ2UvY29yZSc7XG5cbmltcG9ydCBmcyBmcm9tICdmcy1leHRyYSc7XG5pbXBvcnQgeyBpbml0aWFsaXplUHJveHkgfSBmcm9tICdAZWxlY3Ryb24vZ2V0JztcbmltcG9ydCBwcm9ncmFtIGZyb20gJ2NvbW1hbmRlcic7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuaW1wb3J0ICcuL3V0aWwvdGVybWluYXRlJztcbmltcG9ydCB3b3JraW5nRGlyIGZyb20gJy4vdXRpbC93b3JraW5nLWRpcic7XG5cbihhc3luYyAoKSA9PiB7XG4gIGxldCBkaXI6IHN0cmluZyA9IHByb2Nlc3MuY3dkKCk7XG4gIHByb2dyYW1cbiAgICAudmVyc2lvbigoYXdhaXQgZnMucmVhZEpzb24ocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uL3BhY2thZ2UuanNvbicpKSkudmVyc2lvbilcbiAgICAuYXJndW1lbnRzKCdbY3dkXScpXG4gICAgLm9wdGlvbignLWEsIC0tYXJjaCBbYXJjaF0nLCAnVGFyZ2V0IGFyY2hpdGVjdHVyZScpXG4gICAgLm9wdGlvbignLXAsIC0tcGxhdGZvcm0gW3BsYXRmb3JtXScsICdUYXJnZXQgYnVpbGQgcGxhdGZvcm0nKVxuICAgIC5hY3Rpb24oKGN3ZCkgPT4ge1xuICAgICAgZGlyID0gd29ya2luZ0RpcihkaXIsIGN3ZCk7XG4gICAgfSlcbiAgICAucGFyc2UocHJvY2Vzcy5hcmd2KTtcblxuICBpbml0aWFsaXplUHJveHkoKTtcblxuICBjb25zdCBwYWNrYWdlT3B0czogUGFja2FnZU9wdGlvbnMgPSB7XG4gICAgZGlyLFxuICAgIGludGVyYWN0aXZlOiB0cnVlLFxuICB9O1xuICBpZiAocHJvZ3JhbS5hcmNoKSBwYWNrYWdlT3B0cy5hcmNoID0gcHJvZ3JhbS5hcmNoO1xuICBpZiAocHJvZ3JhbS5wbGF0Zm9ybSkgcGFja2FnZU9wdHMucGxhdGZvcm0gPSBwcm9ncmFtLnBsYXRmb3JtO1xuXG4gIGF3YWl0IGFwaS5wYWNrYWdlKHBhY2thZ2VPcHRzKTtcbn0pKCk7XG4iXSwibmFtZXMiOlsiZGlyIiwicHJvY2VzcyIsImN3ZCIsInByb2dyYW0iLCJ2ZXJzaW9uIiwiZnMiLCJyZWFkSnNvbiIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiYXJndW1lbnRzIiwib3B0aW9uIiwiYWN0aW9uIiwid29ya2luZ0RpciIsInBhcnNlIiwiYXJndiIsImluaXRpYWxpemVQcm94eSIsInBhY2thZ2VPcHRzIiwiaW50ZXJhY3RpdmUiLCJhcmNoIiwicGxhdGZvcm0iLCJhcGkiLCJwYWNrYWdlIl0sIm1hcHBpbmdzIjoiO0FBQW9DLEdBQXNCLENBQXRCLEtBQXNCO0FBRTNDLEdBQVUsQ0FBVixRQUFVO0FBQ08sR0FBZSxDQUFmLElBQWU7QUFDM0IsR0FBVyxDQUFYLFVBQVc7QUFDZCxHQUFNLENBQU4sS0FBTTs7QUFHQSxHQUFvQixDQUFwQixXQUFvQjs7Ozs7O1dBRTlCLENBQUM7SUFDWixHQUFHLENBQUNBLEdBQUcsR0FBV0MsT0FBTyxDQUFDQyxHQUFHO0lBQzdCQyxVQUFPLFNBQ0pDLE9BQU8sRUFBRSxLQUFLLENBQUNDLFFBQUUsU0FBQ0MsUUFBUSxDQUFDQyxLQUFJLFNBQUNDLE9BQU8sQ0FBQ0MsU0FBUyxFQUFFLENBQWlCLG9CQUFJTCxPQUFPLEVBQy9FTSxTQUFTLENBQUMsQ0FBTyxRQUNqQkMsTUFBTSxDQUFDLENBQW1CLG9CQUFFLENBQXFCLHNCQUNqREEsTUFBTSxDQUFDLENBQTJCLDRCQUFFLENBQXVCLHdCQUMzREMsTUFBTSxFQUFFVixHQUFHLEdBQUssQ0FBQztRQUNoQkYsR0FBRyxPQUFHYSxXQUFVLFVBQUNiLEdBQUcsRUFBRUUsR0FBRztJQUMzQixDQUFDLEVBQ0FZLEtBQUssQ0FBQ2IsT0FBTyxDQUFDYyxJQUFJO1FBRXJCQyxJQUFlO0lBRWYsS0FBSyxDQUFDQyxXQUFXLEdBQW1CLENBQUM7UUFDbkNqQixHQUFHO1FBQ0hrQixXQUFXLEVBQUUsSUFBSTtJQUNuQixDQUFDO0lBQ0QsRUFBRSxFQUFFZixVQUFPLFNBQUNnQixJQUFJLEVBQUVGLFdBQVcsQ0FBQ0UsSUFBSSxHQUFHaEIsVUFBTyxTQUFDZ0IsSUFBSTtJQUNqRCxFQUFFLEVBQUVoQixVQUFPLFNBQUNpQixRQUFRLEVBQUVILFdBQVcsQ0FBQ0csUUFBUSxHQUFHakIsVUFBTyxTQUFDaUIsUUFBUTtJQUU3RCxLQUFLLENBQUNDLEtBQUcsS0FBQ0MsT0FBTyxDQUFDTCxXQUFXO0FBQy9CLENBQUMifQ==