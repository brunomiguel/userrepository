"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = workingDir;
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _path = _interopRequireDefault(require("path"));
function workingDir(dir, cwd, checkExisting = true) {
    let finalDir = dir;
    if (cwd) {
        if (_path.default.isAbsolute(cwd) && (!checkExisting || _fsExtra.default.existsSync(cwd))) {
            finalDir = cwd;
        } else {
            const resolved = _path.default.resolve(finalDir, cwd);
            if (!checkExisting || _fsExtra.default.existsSync(resolved)) {
                finalDir = resolved;
            }
        }
    }
    return finalDir;
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3dvcmtpbmctZGlyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcy1leHRyYSc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd29ya2luZ0RpcihkaXI6IHN0cmluZywgY3dkOiBzdHJpbmcsIGNoZWNrRXhpc3RpbmcgPSB0cnVlKTogc3RyaW5nIHtcbiAgbGV0IGZpbmFsRGlyID0gZGlyO1xuICBpZiAoY3dkKSB7XG4gICAgaWYgKHBhdGguaXNBYnNvbHV0ZShjd2QpICYmICghY2hlY2tFeGlzdGluZyB8fCBmcy5leGlzdHNTeW5jKGN3ZCkpKSB7XG4gICAgICBmaW5hbERpciA9IGN3ZDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmVzb2x2ZWQgPSBwYXRoLnJlc29sdmUoZmluYWxEaXIsIGN3ZCk7XG4gICAgICBpZiAoIWNoZWNrRXhpc3RpbmcgfHwgZnMuZXhpc3RzU3luYyhyZXNvbHZlZCkpIHtcbiAgICAgICAgZmluYWxEaXIgPSByZXNvbHZlZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmluYWxEaXI7XG59XG4iXSwibmFtZXMiOlsid29ya2luZ0RpciIsImRpciIsImN3ZCIsImNoZWNrRXhpc3RpbmciLCJmaW5hbERpciIsInBhdGgiLCJpc0Fic29sdXRlIiwiZnMiLCJleGlzdHNTeW5jIiwicmVzb2x2ZWQiLCJyZXNvbHZlIl0sIm1hcHBpbmdzIjoiOzs7O2tCQUd3QkEsVUFBVTtBQUhuQixHQUFVLENBQVYsUUFBVTtBQUNSLEdBQU0sQ0FBTixLQUFNO1NBRUNBLFVBQVUsQ0FBQ0MsR0FBVyxFQUFFQyxHQUFXLEVBQUVDLGFBQWEsR0FBRyxJQUFJLEVBQVUsQ0FBQztJQUMxRixHQUFHLENBQUNDLFFBQVEsR0FBR0gsR0FBRztJQUNsQixFQUFFLEVBQUVDLEdBQUcsRUFBRSxDQUFDO1FBQ1IsRUFBRSxFQUFFRyxLQUFJLFNBQUNDLFVBQVUsQ0FBQ0osR0FBRyxPQUFPQyxhQUFhLElBQUlJLFFBQUUsU0FBQ0MsVUFBVSxDQUFDTixHQUFHLElBQUksQ0FBQztZQUNuRUUsUUFBUSxHQUFHRixHQUFHO1FBQ2hCLENBQUMsTUFBTSxDQUFDO1lBQ04sS0FBSyxDQUFDTyxRQUFRLEdBQUdKLEtBQUksU0FBQ0ssT0FBTyxDQUFDTixRQUFRLEVBQUVGLEdBQUc7WUFDM0MsRUFBRSxHQUFHQyxhQUFhLElBQUlJLFFBQUUsU0FBQ0MsVUFBVSxDQUFDQyxRQUFRLEdBQUcsQ0FBQztnQkFDOUNMLFFBQVEsR0FBR0ssUUFBUTtZQUNyQixDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCxNQUFNLENBQUNMLFFBQVE7QUFDakIsQ0FBQyJ9