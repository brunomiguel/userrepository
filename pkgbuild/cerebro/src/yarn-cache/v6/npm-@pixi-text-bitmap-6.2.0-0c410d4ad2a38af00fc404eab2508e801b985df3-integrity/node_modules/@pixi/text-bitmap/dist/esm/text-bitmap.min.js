/*!
 * @pixi/text-bitmap - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
import{Rectangle as e,Point as t,ObservablePoint as r}from"@pixi/math";import{settings as i}from"@pixi/settings";import{MeshGeometry as n,MeshMaterial as a,Mesh as o}from"@pixi/mesh";import{hex2rgb as s,string2hex as h,getResolutionOfUrl as l,removeItems as u}from"@pixi/utils";import{BaseTexture as f,Texture as c,Program as d}from"@pixi/core";import{TEXT_GRADIENT as p,TextStyle as g,TextMetrics as m}from"@pixi/text";import{ALPHA_MODES as v,BLEND_MODES as x}from"@pixi/constants";import{Container as y}from"@pixi/display";import{LoaderResource as b}from"@pixi/loaders";var _=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var w=function(){return function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}(),T=function(){function e(){}return e.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},e.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in t){var n=t[i].match(/^[a-z]+/gm)[0],a=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var s in a){var h=a[s].split("="),l=h[0],u=h[1].replace(/"/gm,""),f=parseFloat(u),c=isNaN(f)?u:f;o[l]=c}r[n].push(o)}var d=new w;return r.info.forEach(function(e){return d.info.push({face:e.face,size:parseInt(e.size,10)})}),r.common.forEach(function(e){return d.common.push({lineHeight:parseInt(e.lineHeight,10)})}),r.page.forEach(function(e){return d.page.push({id:parseInt(e.id,10),file:e.file})}),r.char.forEach(function(e){return d.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})}),r.kerning.forEach(function(e){return d.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})}),r.distanceField.forEach(function(e){return d.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})}),d},e}(),A=function(){function e(){}return e.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},e.parse=function(e){for(var t=new w,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),n=e.getElementsByTagName("page"),a=e.getElementsByTagName("char"),o=e.getElementsByTagName("kerning"),s=e.getElementsByTagName("distanceField"),h=0;h<r.length;h++)t.info.push({face:r[h].getAttribute("face"),size:parseInt(r[h].getAttribute("size"),10)});for(h=0;h<i.length;h++)t.common.push({lineHeight:parseInt(i[h].getAttribute("lineHeight"),10)});for(h=0;h<n.length;h++)t.page.push({id:parseInt(n[h].getAttribute("id"),10)||0,file:n[h].getAttribute("file")});for(h=0;h<a.length;h++){var l=a[h];t.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(h=0;h<o.length;h++)t.kerning.push({first:parseInt(o[h].getAttribute("first"),10),second:parseInt(o[h].getAttribute("second"),10),amount:parseInt(o[h].getAttribute("amount"),10)});for(h=0;h<s.length;h++)t.distanceField.push({fieldType:s[h].getAttribute("fieldType"),distanceRange:parseInt(s[h].getAttribute("distanceRange"),10)});return t},e}(),S=function(){function e(){}return e.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var t=(new self.DOMParser).parseFromString(e,"text/xml");return A.test(t)}return!1},e.parse=function(e){var t=(new self.DOMParser).parseFromString(e,"text/xml");return A.parse(t)},e}(),P=[T,A,S];function M(e){for(var t=0;t<P.length;t++)if(P[t].test(e))return P[t];return null}function C(e,t,r,i,n,a,o){var l=r.text,u=r.fontProperties;t.translate(i,n),t.scale(a,a);var f=o.strokeThickness/2,c=-o.strokeThickness/2;t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=function(e,t,r,i,n,a){var o,s=r.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var h=r.dropShadow?r.dropShadowDistance:0,l=r.padding||0,u=e.width/i-h-2*l,f=e.height/i-h-2*l,c=s.slice(),d=r.fillGradientStops.slice();if(!d.length)for(var g=c.length+1,m=1;m<g;++m)d.push(m/g);if(c.unshift(s[0]),d.unshift(0),c.push(s[s.length-1]),d.push(1),r.fillGradientType===p.LINEAR_VERTICAL){o=t.createLinearGradient(u/2,l,u/2,f+l);var v=0,x=(a.fontProperties.fontSize+r.strokeThickness)/f;for(m=0;m<n.length;m++)for(var y=a.lineHeight*m,b=0;b<c.length;b++){var _=y/f+("number"==typeof d[b]?d[b]:b/c.length)*x,w=Math.max(v,_);w=Math.min(w,1),o.addColorStop(w,c[b]),v=w}}else{o=t.createLinearGradient(l,f/2,u+l,f/2);var T=c.length+1,A=1;for(m=0;m<c.length;m++){var S=void 0;S="number"==typeof d[m]?d[m]:A/T,o.addColorStop(S,c[m]),A++}}return o}(e,t,o,a,[l],r),t.strokeStyle=o.stroke;var d=o.dropShadowColor,g=s("number"==typeof d?d:h(d));o.dropShadow?(t.shadowColor="rgba("+255*g[0]+","+255*g[1]+","+255*g[2]+","+o.dropShadowAlpha+")",t.shadowBlur=o.dropShadowBlur,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*o.dropShadowDistance,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*o.dropShadowDistance):(t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),o.stroke&&o.strokeThickness&&t.strokeText(l,f,c+r.lineHeight-u.descent),o.fill&&t.fillText(l,f,c+r.lineHeight-u.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function I(e){return Array.from?Array.from(e):e.split("")}function E(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var O=function(){function t(t,r,i){var n,a,o=t.info[0],s=t.common[0],h=t.page[0],u=t.distanceField[0],f=l(h.file),d={};this._ownsTextures=i,this.font=o.face,this.size=o.size,this.lineHeight=s.lineHeight/f,this.chars={},this.pageTextures=d;for(var p=0;p<t.page.length;p++){var g=t.page[p],m=g.id,x=g.file;d[m]=r instanceof Array?r[p]:r[x],(null==u?void 0:u.fieldType)&&"none"!==u.fieldType&&(d[m].baseTexture.alphaMode=v.NO_PREMULTIPLIED_ALPHA)}for(p=0;p<t.char.length;p++){var y=t.char[p],b=(m=y.id,y.page),_=t.char[p],w=_.x,T=_.y,A=_.width,S=_.height,P=_.xoffset,M=_.yoffset,C=_.xadvance;T/=f,A/=f,S/=f,P/=f,M/=f,C/=f;var I=new e((w/=f)+d[b].frame.x/f,T+d[b].frame.y/f,A,S);this.chars[m]={xOffset:P,yOffset:M,xAdvance:C,kerning:{},texture:new c(d[b].baseTexture,I),page:b}}for(p=0;p<t.kerning.length;p++){var E=t.kerning[p],O=E.first,F=E.second,k=E.amount;O/=f,F/=f,k/=f,this.chars[F]&&(this.chars[F].kerning[O]=k)}this.distanceFieldRange=null==u?void 0:u.distanceRange,this.distanceFieldType=null!==(a=null===(n=null==u?void 0:u.fieldType)||void 0===n?void 0:n.toLowerCase())&&void 0!==a?a:"none"}return t.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},t.install=function(e,r,i){var n;if(e instanceof w)n=e;else{var a=M(e);if(!a)throw new Error("Unrecognized data format for font.");n=a.parse(e)}r instanceof c&&(r=[r]);var o=new t(n,r,i);return t.available[o.font]=o,o},t.uninstall=function(e){var r=t.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete t.available[e]},t.from=function(e,r,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},t.defaultOptions,i),a=n.chars,o=n.padding,s=n.resolution,h=n.textureWidth,l=n.textureHeight,u=function(e){"string"==typeof e&&(e=[e]);for(var t=[],r=0,i=e.length;r<i;r++){var n=e[r];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var a=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<a)throw new Error("[BitmapFont]: Invalid character range.");for(var s=a,h=o;s<=h;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,I(n))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(a),d=r instanceof g?r:new g(r),p=h,v=new w;v.info[0]={face:d.fontFamily,size:d.fontSize},v.common[0]={lineHeight:d.fontSize};for(var x,y,b,_=0,T=0,A=0,S=[],P=0;P<u.length;P++){x||((x=document.createElement("canvas")).width=h,x.height=l,y=x.getContext("2d"),b=new f(x,{resolution:s}),S.push(new c(b)),v.page.push({id:S.length-1,file:""}));var M=m.measureText(u[P],d,!1,x),O=M.width,F=Math.ceil(M.height),k=Math.ceil(("italic"===d.fontStyle?2:1)*O);if(T>=l-F*s){if(0===T)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+d.fontSize+"px fonts");--P,x=null,y=null,b=null,T=0,_=0,A=0}else if(A=Math.max(F+M.fontProperties.descent,A),k*s+_>=p)--P,T+=A*s,T=Math.ceil(T),_=0,A=0;else{C(x,y,M,_,T,s,d);var z=E(M.text);v.char.push({id:z,page:S.length-1,x:_/s,y:T/s,width:k,height:F,xoffset:0,yoffset:0,xadvance:Math.ceil(O-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0))}),_+=(k+2*o)*s,_=Math.ceil(_)}}P=0;for(var H=u.length;P<H;P++)for(var N=u[P],D=0;D<H;D++){var B=u[D],L=y.measureText(N).width,j=y.measureText(B).width,R=y.measureText(N+B).width-(L+j);R&&v.kerning.push({first:E(N),second:E(B),amount:R})}var W=new t(v,S,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=W,W},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),F=[],k=[],z=[],H=function(e){function s(t,n){void 0===n&&(n={});var a=e.call(this)||this;a._tint=16777215;var o=Object.assign({},s.styleDefaults,n),h=o.align,l=o.tint,u=o.maxWidth,f=o.letterSpacing,c=o.fontName,d=o.fontSize;if(!O.available[c])throw new Error('Missing BitmapFont "'+c+'"');return a._activePagesMeshData=[],a._textWidth=0,a._textHeight=0,a._align=h,a._tint=l,a._fontName=c,a._fontSize=d||O.available[c].size,a._text=t,a._maxWidth=u,a._maxLineHeight=0,a._letterSpacing=f,a._anchor=new r(function(){a.dirty=!0},a,0,0),a._roundPixels=i.ROUND_PIXELS,a.dirty=!0,a._textureCache={},a}return function(e,t){function r(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(s,e),s.prototype.updateText=function(){for(var e,r=O.available[this._fontName],i=this._fontSize/r.size,s=new t,h=[],l=[],f=[],p=I(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),g=this._maxWidth*r.size/this._fontSize,m="none"===r.distanceFieldType?F:k,v=null,y=0,b=0,_=0,w=-1,T=0,A=0,S=0,P=0,M=0;M<p.length;M++){var C=E(ee=p[M]);if(/(?:\s)/.test(ee)&&(w=M,T=y,P++),"\r"!==ee&&"\n"!==ee){var H=r.chars[C];if(H){v&&H.kerning[v]&&(s.x+=H.kerning[v]);var N=z.pop()||{texture:c.EMPTY,line:0,charCode:0,prevSpaces:0,position:new t};N.texture=H.texture,N.line=_,N.charCode=C,N.position.x=s.x+H.xOffset+this._letterSpacing/2,N.position.y=s.y+H.yOffset,N.prevSpaces=P,h.push(N),y=N.position.x+H.texture.orig.width,s.x+=H.xAdvance+this._letterSpacing,S=Math.max(S,H.yOffset+H.texture.height),v=C,-1!==w&&g>0&&s.x>g&&(u(h,1+w-++A,1+M-w),M=w,w=-1,l.push(T),f.push(h.length>0?h[h.length-1].prevSpaces:0),b=Math.max(b,T),_++,s.x=0,s.y+=r.lineHeight,v=null,P=0)}}else l.push(y),f.push(-1),b=Math.max(b,y),++_,++A,s.x=0,s.y+=r.lineHeight,v=null,P=0}var D=p[p.length-1];"\r"!==D&&"\n"!==D&&(/(?:\s)/.test(D)&&(y=T),l.push(y),b=Math.max(b,y),f.push(-1));var B=[];for(M=0;M<=_;M++){var L=0;"right"===this._align?L=b-l[M]:"center"===this._align?L=(b-l[M])/2:"justify"===this._align&&(L=f[M]<0?0:(b-l[M])/f[M]),B.push(L)}var j=h.length,R={},W=[],U=this._activePagesMeshData;for(M=0;M<U.length;M++)m.push(U[M]);for(M=0;M<j;M++){var X=(re=h[M].texture).baseTexture.uid;if(!R[X]){if(!(le=m.pop())){var Y=new n,G=void 0,V=void 0;"none"===r.distanceFieldType?(G=new a(c.EMPTY),V=x.NORMAL):(G=new a(c.EMPTY,{program:d.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),V=x.NORMAL_NPM);var Z=new o(Y,G);Z.blendMode=V,le={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Z,vertices:null,uvs:null,indices:null}}le.index=0,le.indexCount=0,le.vertexCount=0,le.uvsCount=0,le.total=0;var q=this._textureCache;q[X]=q[X]||new c(re.baseTexture),le.mesh.texture=q[X],le.mesh.tint=this._tint,W.push(le),R[X]=le}R[X].total++}for(M=0;M<U.length;M++)-1===W.indexOf(U[M])&&this.removeChild(U[M].mesh);for(M=0;M<W.length;M++)W[M].mesh.parent!==this&&this.addChild(W[M].mesh);for(var M in this._activePagesMeshData=W,R){var $=(le=R[M]).total;if(!((null===(e=le.indices)||void 0===e?void 0:e.length)>6*$)||le.vertices.length<2*o.BATCHABLE_SIZE)le.vertices=new Float32Array(8*$),le.uvs=new Float32Array(8*$),le.indices=new Uint16Array(6*$);else for(var J=le.total,K=le.vertices,Q=4*J*2;Q<K.length;Q++)K[Q]=0;le.mesh.size=6*$}for(M=0;M<j;M++){var ee,te=(ee=h[M]).position.x+B[ee.line]*("justify"===this._align?ee.prevSpaces:1);this._roundPixels&&(te=Math.round(te));var re,ie=te*i,ne=ee.position.y*i,ae=R[(re=ee.texture).baseTexture.uid],oe=re.frame,se=re._uvs,he=ae.index++;ae.indices[6*he+0]=0+4*he,ae.indices[6*he+1]=1+4*he,ae.indices[6*he+2]=2+4*he,ae.indices[6*he+3]=0+4*he,ae.indices[6*he+4]=2+4*he,ae.indices[6*he+5]=3+4*he,ae.vertices[8*he+0]=ie,ae.vertices[8*he+1]=ne,ae.vertices[8*he+2]=ie+oe.width*i,ae.vertices[8*he+3]=ne,ae.vertices[8*he+4]=ie+oe.width*i,ae.vertices[8*he+5]=ne+oe.height*i,ae.vertices[8*he+6]=ie,ae.vertices[8*he+7]=ne+oe.height*i,ae.uvs[8*he+0]=se.x0,ae.uvs[8*he+1]=se.y0,ae.uvs[8*he+2]=se.x1,ae.uvs[8*he+3]=se.y1,ae.uvs[8*he+4]=se.x2,ae.uvs[8*he+5]=se.y2,ae.uvs[8*he+6]=se.x3,ae.uvs[8*he+7]=se.y3}for(var M in this._textWidth=b*i,this._textHeight=(s.y+r.lineHeight)*i,R){var le=R[M];if(0!==this.anchor.x||0!==this.anchor.y)for(var ue=0,fe=this._textWidth*this.anchor.x,ce=this._textHeight*this.anchor.y,de=0;de<le.total;de++)le.vertices[ue++]-=fe,le.vertices[ue++]-=ce,le.vertices[ue++]-=fe,le.vertices[ue++]-=ce,le.vertices[ue++]-=fe,le.vertices[ue++]-=ce,le.vertices[ue++]-=fe,le.vertices[ue++]-=ce;this._maxLineHeight=S*i;var pe=le.mesh.geometry.getBuffer("aVertexPosition"),ge=le.mesh.geometry.getBuffer("aTextureCoord"),me=le.mesh.geometry.getIndex();pe.data=le.vertices,ge.data=le.uvs,me.data=le.indices,pe.update(),ge.update(),me.update()}for(M=0;M<h.length;M++)z.push(h[M])},s.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},s.prototype._render=function(t){var r=O.available[this._fontName],i=r.distanceFieldRange,n=r.distanceFieldType,a=r.size;if("none"!==n)for(var o=this.worldTransform,s=o.a,h=o.b,l=o.c,u=o.d,f=Math.sqrt(s*s+h*h),c=Math.sqrt(l*l+u*u),d=(Math.abs(f)+Math.abs(c))/2,p=this._fontSize/a,g=0,m=this._activePagesMeshData;g<m.length;g++){m[g].mesh.shader.uniforms.uFWidth=d*i*p*t.resolution}e.prototype._render.call(this,t)},s.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},s.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(s.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!O.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"anchor",{get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),s.prototype.destroy=function(t){var r=this._textureCache;for(var i in r){r[i].destroy(),delete r[i]}this._textureCache=null,e.prototype.destroy.call(this,t)},s.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},s}(y),N=function(){function e(){}return e.add=function(){b.setExtensionXhrType("fnt",b.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){var i=M(t.data);if(i)for(var n=e.getBaseUrl(this,t),a=i.parse(t.data),o={},s=function(e){o[e.metadata.pageFile]=e.texture,Object.keys(o).length===a.page.length&&(t.bitmapFont=O.install(a,o,!0),r())},h=0;h<a.page.length;++h){var l=a.page[h].file,u=n+l,f=!1;for(var c in this.resources){var d=this.resources[c];if(d.url===u){d.metadata.pageFile=l,d.texture?s(d):d.onAfterMiddleware.add(s),f=!0;break}}if(!f){var p={crossOrigin:t.crossOrigin,loadType:b.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},t.metadata.imageMetadata),parentResource:t};this.add(u,p,s)}}else r()},e.getBaseUrl=function(t,r){var i=r.isDataUrl?"":e.dirname(r.url);return r.isDataUrl&&("."===i&&(i=""),t.baseUrl&&i&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(i+="/")),(i=i.replace(t.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/"),i},e.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},e}();export{O as BitmapFont,w as BitmapFontData,N as BitmapFontLoader,H as BitmapText};
//# sourceMappingURL=text-bitmap.min.js.map
